LavaPack.loadBundle([[5976,{"../../../shared/constants/app":4977,"../../../shared/constants/common":4979,"../../../shared/constants/metametrics":4989,"../../../shared/constants/network":4993,"../../../shared/constants/swaps":5003,"../../../shared/constants/transaction":5007,"../../../shared/lib/swaps-utils":5017,"../../../shared/lib/transactions-controller-utils":5021,"../../../shared/modules/Numeric":5023,"../../../shared/modules/conversion.utils":5030,"../../../shared/modules/selectors":5048,"../../../shared/modules/selectors/networks":5049,"../../helpers/constants/routes":5986,"../../pages/swaps/swaps.util":6714,"../../selectors":6731,"../../store/actions":6744,"../metamask/metamask":5968,"@metamask/transaction-controller":2523,"@metamask/utils":2620,"@reduxjs/toolkit":2692,"@sentry/browser":2747,"bignumber.js":3341,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GAS_PRICES_LOADING_STATES=void 0,n.cancelSwapsSmartTransaction=function(e){return async(t,n)=>{try{await t((0,l.cancelSmartTransaction)(e))}catch(e){const{swaps:{isFeatureFlagLoaded:r}}=n();if(e.message.startsWith("Fetch error:")&&r){const n=(0,p.parseSmartTransactionsError)(e.message);t(Ne(null==n?void 0:n.error))}}}},n.fetchAndSetSwapsGasPriceInfo=n.default=n.clearSwapsState=void 0,n.fetchMetaSwapsGasPriceEstimates=we,n.fetchSwapsLivenessAndFeatureFlags=n.fetchQuotesAndSetQuoteState=void 0,n.fetchSwapsSmartTransactionFees=De,n.setTransactionSettingsOpened=n.setTopAssets=n.setSwapsFromToken=n.setSwapToToken=n.setSwapQuotesFetchStartTime=n.setReviewSwapClickedTimestamp=n.setMaxSlippage=n.setLatestAddedTokenTo=n.setIsFeatureFlagLoaded=n.setFromTokenInputValue=n.setFromTokenError=n.setFetchingQuotes=n.setBalanceError=n.setAggregatorMetadata=n.prepareToLeaveSwaps=n.prepareForRetryGetQuotes=n.navigateBackToPrepareSwap=n.getUsedSwapsGasPrice=n.getUsedQuote=n.getTransactionSettingsOpened=n.getTradeTxId=n.getTopQuote=n.getTopAssets=n.getToToken=n.getSwapsWelcomeMessageSeenStatus=n.getSwapsUserFeeLevel=n.getSwapsTokens=n.getSwapsSTXLoading=n.getSwapsQuoteRefreshTime=n.getSwapsQuotePrefetchingRefreshTime=n.getSwapsNetworkConfig=n.getSwapsFeatureIsLive=n.getSwapsFallbackGasPrice=n.getSwapsErrorKey=n.getSwapsCustomizationModalPrice=n.getSwapsCustomizationModalLimit=n.getSwapGasPriceEstimateData=n.getSmartTransactionsErrorMessageDismissed=n.getSmartTransactionsError=n.getSmartTransactionFees=n.getSmartTransactionEstimatedGas=n.getShowQuoteLoadingScreen=n.getSelectedQuote=n.getReviewSwapClickedTimestamp=n.getQuotesLastFetched=n.getQuotesFetchStartTime=n.getQuotes=n.getPendingSmartTransactions=n.getMaxSlippage=n.getLatestAddedTokenTo=n.getIsFeatureFlagLoaded=n.getFromTokenInputValue=n.getFromTokenError=n.getFromToken=n.getFetchingQuotes=n.getFetchParams=n.getDestinationTokenInfo=n.getCustomSwapsGasPrice=n.getCustomSwapsGas=n.getCustomMaxPriorityFeePerGas=n.getCustomMaxFeePerGas=n.getCurrentSmartTransactionsError=n.getCurrentSmartTransactionsEnabled=n.getCurrentSmartTransactions=n.getBalanceError=n.getBackgroundSwapRouteState=n.getApproveTxParams=n.getApproveTxId=n.getAggregatorMetadata=void 0,n.shouldShowCustomPriceTooLowWarning=function(e){const{average:t}=x(e),n=U(e);if(!n||t===undefined)return!1;return new O.Numeric(n,16,I.EtherDenomination.WEI).toDenomination(I.EtherDenomination.GWEI).greaterThan(t,10)},n.swapsSlice=n.swapsQuoteSelected=n.swapGasPriceEstimateIsLoading=n.swapGasEstimateLoadingHasFailed=n.swapCustomGasModalPriceEdited=n.swapCustomGasModalLimitEdited=n.swapCustomGasModalClosed=n.signAndSendTransactions=n.signAndSendSwapsSmartTransaction=void 0;var r=e("@reduxjs/toolkit"),a=R(e("bignumber.js")),s=R(e("loglevel")),o=e("@sentry/browser"),i=e("@metamask/transaction-controller"),c=e("@metamask/utils"),u=e("../../../shared/constants/network"),l=e("../../store/actions"),d=e("../../helpers/constants/routes"),p=e("../../pages/swaps/swaps.util"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/modules/selectors/networks"),g=e("../../selectors"),f=e("../../../shared/modules/selectors"),h=e("../../../shared/constants/metametrics"),E=e("../../../shared/constants/swaps"),S=e("../../../shared/constants/transaction"),_=e("../metamask/metamask"),y=e("../../../shared/constants/app"),A=e("../../../shared/lib/transactions-controller-utils"),I=e("../../../shared/constants/common"),O=e("../../../shared/modules/Numeric"),N=e("../../../shared/lib/swaps-utils");function R(e){return e&&e.__esModule?e:{default:e}}const v=(0,c.createProjectLogger)("swaps"),C=n.GAS_PRICES_LOADING_STATES={INITIAL:"INITIAL",LOADING:"LOADING",FAILED:"FAILED",COMPLETED:"COMPLETED"},w={aggregatorMetadata:null,approveTxId:null,tradeTxId:null,balanceError:!1,fetchingQuotes:!1,fromToken:null,fromTokenInputValue:"",fromTokenError:null,isFeatureFlagLoaded:!1,maxSlippage:E.Slippage.default,quotesFetchStartTime:null,reviewSwapClickedTimestamp:null,topAssets:{},toToken:null,customGas:{price:null,limit:null,loading:C.INITIAL,priceEstimates:{},fallBackPrice:null},currentSmartTransactionsError:"",swapsSTXLoading:!1,transactionSettingsOpened:!1,latestAddedTokenTo:""},D=n.swapsSlice=(0,r.createSlice)({name:"swaps",initialState:w,reducers:{clearSwapsState:()=>w,navigatedBackToBuildQuote:e=>{e.approveTxId=null,e.tradeTxId=null,e.balanceError=!1,e.fetchingQuotes=!1,e.customGas.limit=null,e.customGas.price=null},retriedGetQuotes:e=>{e.approveTxId=null,e.balanceError=!1,e.fetchingQuotes=!1},setAggregatorMetadata:(e,t)=>{e.aggregatorMetadata=t.payload},setBalanceError:(e,t)=>{e.balanceError=t.payload},setFetchingQuotes:(e,t)=>{e.fetchingQuotes=t.payload},setLatestAddedTokenTo:(e,t)=>{e.latestAddedTokenTo=t.payload},setFromToken:(e,t)=>{e.fromToken=t.payload},setFromTokenInputValue:(e,t)=>{e.fromTokenInputValue=t.payload},setFromTokenError:(e,t)=>{e.fromTokenError=t.payload},setIsFeatureFlagLoaded:(e,t)=>{e.isFeatureFlagLoaded=t.payload},setMaxSlippage:(e,t)=>{e.maxSlippage=t.payload},setQuotesFetchStartTime:(e,t)=>{e.quotesFetchStartTime=t.payload},setReviewSwapClickedTimestamp:(e,t)=>{e.reviewSwapClickedTimestamp=t.payload},setTopAssets:(e,t)=>{e.topAssets=t.payload},setToToken:(e,t)=>{e.toToken=t.payload},swapCustomGasModalClosed:e=>{e.customGas.price=null,e.customGas.limit=null},swapCustomGasModalPriceEdited:(e,t)=>{e.customGas.price=t.payload},swapCustomGasModalLimitEdited:(e,t)=>{e.customGas.limit=t.payload},swapGasPriceEstimatesFetchStarted:e=>{e.customGas.loading=C.LOADING},swapGasPriceEstimatesFetchFailed:e=>{e.customGas.loading=C.FAILED},swapGasPriceEstimatesFetchCompleted:(e,t)=>{e.customGas.priceEstimates=t.payload.priceEstimates,e.customGas.loading=C.COMPLETED},retrievedFallbackSwapsGasPrice:(e,t)=>{e.customGas.fallBackPrice=t.payload},setCurrentSmartTransactionsError:(e,t)=>{const n=Object.values(p.StxErrorTypes).includes(t.payload)||t.payload===undefined?t.payload:p.StxErrorTypes.unavailable;e.currentSmartTransactionsError=n},setSwapsSTXSubmitLoading:(e,t)=>{e.swapsSTXLoading=t.payload||!1},setTransactionSettingsOpened:(e,t)=>{e.transactionSettingsOpened=Boolean(t.payload)}}}),{actions:k,reducer:P}=D;n.default=P;n.getAggregatorMetadata=e=>e.swaps.aggregatorMetadata;const b=e=>e.swaps.balanceError;n.getBalanceError=b;const M=e=>e.swaps.fromToken;n.getFromToken=M;n.getFromTokenError=e=>e.swaps.fromTokenError;n.getFromTokenInputValue=e=>e.swaps.fromTokenInputValue;n.getIsFeatureFlagLoaded=e=>e.swaps.isFeatureFlagLoaded;n.getSwapsSTXLoading=e=>e.swaps.swapsSTXLoading;n.getMaxSlippage=e=>e.swaps.maxSlippage;n.getTopAssets=e=>e.swaps.topAssets;const F=e=>e.swaps.toToken;n.getToToken=F;n.getFetchingQuotes=e=>e.swaps.fetchingQuotes;const L=e=>e.swaps.latestAddedTokenTo;n.getLatestAddedTokenTo=L;n.getQuotesFetchStartTime=e=>e.swaps.quotesFetchStartTime;n.getReviewSwapClickedTimestamp=e=>e.swaps.reviewSwapClickedTimestamp;const U=e=>e.swaps.customGas.price;n.getSwapsCustomizationModalPrice=U;n.getSwapsCustomizationModalLimit=e=>e.swaps.customGas.limit;n.swapGasPriceEstimateIsLoading=e=>e.swaps.customGas.loading===C.LOADING;n.swapGasEstimateLoadingHasFailed=e=>e.swaps.customGas.loading===C.INITIAL;const x=e=>e.swaps.customGas.priceEstimates;n.getSwapGasPriceEstimateData=x;const G=e=>e.swaps.customGas.fallBackPrice;n.getSwapsFallbackGasPrice=G;const B=e=>e.swaps.currentSmartTransactionsError;n.getCurrentSmartTransactionsError=B;n.getTransactionSettingsOpened=e=>e.swaps.transactionSettingsOpened;const H=e=>e.metamask.swapsState;n.getSwapsFeatureIsLive=e=>e.metamask.swapsState.swapsFeatureIsLive;n.getSmartTransactionsError=e=>e.appState.smartTransactionsError;n.getSmartTransactionsErrorMessageDismissed=e=>e.appState.smartTransactionsErrorMessageDismissed;const W=e=>{const t=(0,f.getSmartTransactionsEnabled)(e),n=B(e);return t&&!n};n.getCurrentSmartTransactionsEnabled=W;n.getSwapsQuoteRefreshTime=e=>e.metamask.swapsState.swapsQuoteRefreshTime;n.getSwapsQuotePrefetchingRefreshTime=e=>e.metamask.swapsState.swapsQuotePrefetchingRefreshTime;n.getBackgroundSwapRouteState=e=>e.metamask.swapsState.routeState;const K=e=>e.metamask.swapsState.customMaxGas;n.getCustomSwapsGas=K;const j=e=>e.metamask.swapsState.customGasPrice;n.getCustomSwapsGasPrice=j;n.getCustomMaxFeePerGas=e=>e.metamask.swapsState.customMaxFeePerGas;n.getCustomMaxPriorityFeePerGas=e=>e.metamask.swapsState.customMaxPriorityFeePerGas;n.getSwapsUserFeeLevel=e=>e.metamask.swapsState.swapsUserFeeLevel;const $=e=>e.metamask.swapsState.fetchParams;n.getFetchParams=$;const q=e=>e.metamask.swapsState.quotes;n.getQuotes=q;n.getQuotesLastFetched=e=>e.metamask.swapsState.quotesLastFetched;const V=e=>{const{selectedAggId:t,quotes:n}=H(e);return n[t]};n.getSelectedQuote=V;n.getSwapsErrorKey=e=>{var t;return null===(t=H(e))||void 0===t?void 0:t.errorKey};n.getShowQuoteLoadingScreen=e=>e.swaps.showQuoteLoadingScreen;const Y=e=>e.metamask.swapsState.tokens;n.getSwapsTokens=Y;n.getSwapsWelcomeMessageSeenStatus=e=>e.metamask.swapsWelcomeMessageHasBeenShown;const Q=e=>{const{topAggId:t,quotes:n}=H(e);return n[t]};n.getTopQuote=Q;n.getApproveTxId=e=>e.metamask.swapsState.approveTxId;n.getTradeTxId=e=>e.metamask.swapsState.tradeTxId;const z=e=>V(e)||Q(e);n.getUsedQuote=z;n.getDestinationTokenInfo=e=>{var t;return null===(t=$(e))||void 0===t||null===(t=t.metaData)||void 0===t?void 0:t.destinationTokenInfo};const X=e=>j(e)||G(e);n.getUsedSwapsGasPrice=X;const Z=e=>{var t;const{approvalNeeded:n}=V(e)||Q(e)||{};if(!n)return null;const r=(null===(t=H(e))||void 0===t?void 0:t.customApproveTxData)||n.data,a=X(e);return{...n,gasPrice:a,data:r}};n.getApproveTxParams=Z;const J=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t?void 0:t[(0,T.getCurrentChainId)(e)]};n.getCurrentSmartTransactions=J;n.getPendingSmartTransactions=e=>{const t=J(e);return t&&0!==t.length?t.filter((e=>e.status===S.SmartTransactionStatus.pending)):[]};const ee=e=>{const t=z(e);var n;return null!=t&&t.isGasIncludedTrade?{approvalTxFees:t.approvalTxFees,tradeTxFees:t.tradeTxFees}:null===(n=e.metamask.smartTransactionsState)||void 0===n?void 0:n.fees};n.getSmartTransactionFees=ee;n.getSmartTransactionEstimatedGas=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.estimatedGas};const te=e=>{const{swapsQuoteRefreshTime:t,swapsQuotePrefetchingRefreshTime:n,swapsStxGetTransactionsRefreshTime:r,swapsStxBatchStatusRefreshTime:a,swapsStxStatusDeadline:s,swapsStxMaxFeeMultiplier:o}=e.metamask.swapsState;return{quoteRefreshTime:t,quotePrefetchingRefreshTime:n,stxGetTransactionsRefreshTime:r,stxBatchStatusRefreshTime:a,stxStatusDeadline:s,stxMaxFeeMultiplier:o}};n.getSwapsNetworkConfig=te;const{clearSwapsState:ne,navigatedBackToBuildQuote:re,retriedGetQuotes:ae,swapGasPriceEstimatesFetchCompleted:se,swapGasPriceEstimatesFetchStarted:oe,swapGasPriceEstimatesFetchFailed:ie,setAggregatorMetadata:ce,setBalanceError:ue,setFetchingQuotes:le,setLatestAddedTokenTo:de,setFromToken:pe,setFromTokenError:me,setFromTokenInputValue:Te,setIsFeatureFlagLoaded:ge,setMaxSlippage:fe,setQuotesFetchStartTime:he,setReviewSwapClickedTimestamp:Ee,setTopAssets:Se,setToToken:_e,swapCustomGasModalPriceEdited:ye,swapCustomGasModalLimitEdited:Ae,retrievedFallbackSwapsGasPrice:Ie,swapCustomGasModalClosed:Oe,setCurrentSmartTransactionsError:Ne,setSwapsSTXSubmitLoading:Re,setTransactionSettingsOpened:ve}=k;n.setTransactionSettingsOpened=ve,n.swapCustomGasModalClosed=Oe,n.swapCustomGasModalLimitEdited=Ae,n.swapCustomGasModalPriceEdited=ye,n.setSwapToToken=_e,n.setTopAssets=Se,n.setReviewSwapClickedTimestamp=Ee,n.setSwapQuotesFetchStartTime=he,n.setMaxSlippage=fe,n.setIsFeatureFlagLoaded=ge,n.setFromTokenInputValue=Te,n.setFromTokenError=me,n.setSwapsFromToken=pe,n.setLatestAddedTokenTo=de,n.setFetchingQuotes=le,n.setBalanceError=ue,n.setAggregatorMetadata=ce,n.clearSwapsState=ne;n.navigateBackToPrepareSwap=e=>async t=>{await t((0,l.setBackgroundSwapRouteState)("")),t(re()),e.push(d.PREPARE_SWAP_ROUTE)};n.prepareForRetryGetQuotes=()=>async e=>{await e((0,l.resetSwapsPostFetchState)()),e(ae())};n.prepareToLeaveSwaps=()=>async e=>{e(ne()),await e((0,l.resetBackgroundSwapsState)())};n.swapsQuoteSelected=e=>t=>{t(Ae(null)),t((0,l.setSelectedQuoteAggId)(e)),t((0,l.setSwapsTxGasLimit)(""))};const Ce=()=>async e=>{const t=await e(we());null!=t&&t.fast&&e((0,l.setSwapsTxGasPrice)((0,m.decGWEIToHexWEI)(t.fast)))};n.fetchAndSetSwapsGasPriceInfo=Ce;n.fetchSwapsLivenessAndFeatureFlags=()=>async(e,t)=>{let n={swapsFeatureIsLive:!1};const r=t(),a=(0,T.getCurrentChainId)(r);try{const t=await(0,p.fetchSwapsFeatureFlags)();if(await e((0,l.setSwapsFeatureFlags)(t)),E.ALLOWED_SMART_TRANSACTIONS_CHAIN_IDS.includes(a)){var o;await e(Ne(undefined)),await e((0,l.fetchSmartTransactionsLiveness)());((e,t)=>{if(!((null==t?void 0:t.length)<=0))for(const n of t)if(S.IN_PROGRESS_TRANSACTION_STATUSES.includes(n.status)){e(Ne(p.StxErrorTypes.regularTxPending));break}})(e,await(0,l.getTransactions)({searchCriteria:{chainId:a,from:null===(o=(0,g.getSelectedInternalAccount)(r))||void 0===o?void 0:o.address}}))}n=(0,p.getSwapsLivenessForNetwork)(a,t)}catch(e){s.default.error("Failed to fetch Swaps feature flags and Swaps liveness, defaulting to false.",e)}return await e((0,l.setSwapsLiveness)(n)),e(ge(!0)),n};n.fetchQuotesAndSetQuoteState=(e,t,n,r,o)=>async(i,c)=>{var u,m,T;const S=c(),y=(0,g.getSelectedNetwork)(S);let I={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();I=(0,p.getSwapsLivenessForNetwork)(y.configuration.chainId,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await i((0,l.setSwapsLiveness)(I)),!I.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const O=$(S),N=(0,g.getSelectedAccount)(S),R=b(S),v=(0,g.getSwapsDefaultToken)(S),C=(null==O||null===(u=O.metaData)||void 0===u||null===(u=u.sourceTokenInfo)||void 0===u?void 0:u.symbol)===v.symbol?v:null==O||null===(m=O.metaData)||void 0===m?void 0:m.sourceTokenInfo,w=M(S)||C||{},D=F(S)||(null==O||null===(T=O.metaData)||void 0===T?void 0:T.destinationTokenInfo)||{},{address:k,symbol:P,decimals:U,iconUrl:x,balance:G}=w,{address:B,symbol:H,decimals:K,iconUrl:j}=D;o||(await i((0,l.setBackgroundSwapRouteState)("loading")),e.push(d.LOADING_QUOTES_ROUTE)),i(le(!0));const q=(0,g.getTokenExchangeRates)(S);if(!B||H===v.symbol||q[B]!==undefined||(V=B,Q=(0,_.getTokens)(S),Array.isArray(Q)&&Q.find((e=>e.address.toLowerCase()===V.toLowerCase())))){L(S)!==B&&await i(de(""))}else await i((0,l.addToken)({address:B,symbol:H,decimals:K,image:j,networkClientId:y.clientId},!0)),await i(de(B));var V,Q;k&&P!==v.symbol&&!q[k]&&G&&new a.default(G,16).gt(0)&&i((0,l.addToken)({address:k,symbol:P,decimals:U,image:x,networkClientId:y.clientId},!0));const z=Y(S),X=(null==z?void 0:z.find((({address:e})=>e===k)))||w,Z=(null==z?void 0:z.find((({address:e})=>e===B)))||D;i(pe(w));const J=(0,g.isHardwareWallet)(S),ee=(0,g.getHardwareWalletType)(S),te=(0,g.checkNetworkAndAccountSupports1559)(S),ne=(0,f.getSmartTransactionsEnabled)(S),re=W(S);r({event:h.MetaMetricsEventName.QuotesRequested,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:P,token_from_amount:String(t),token_to:H,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,f.getSmartTransactionsOptInStatusForMetrics)(S),anonymizedData:!0}});try{var ae;const e=Date.now();i(he(e));const a=i((0,l.fetchAndSetQuotes)({slippage:n,sourceToken:k,destinationToken:B,value:t,fromAddress:N.address,balanceError:R,sourceDecimals:U,enableGasIncludedQuotes:re&&(0,f.getSmartTransactionsPreferenceEnabled)(S)},{sourceTokenInfo:X,destinationTokenInfo:Z,accountBalance:N.balance,networkClientId:y.clientId})),s=te?null:i(Ce()),[[o,c]]=await Promise.all([a,s]);if(0===(null===(ae=Object.values(o))||void 0===ae?void 0:ae.length))r({event:"No Quotes Available",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:P,token_from_amount:String(t),token_to:H,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,f.getSmartTransactionsOptInStatusForMetrics)(S)}}),i((0,l.setSwapsErrorKey)(E.QUOTES_NOT_AVAILABLE_ERROR));else{var se;const a=o[c],s=(0,A.calcTokenAmount)(a.destinationAmount,a.decimals||18).toString(10);r({event:h.MetaMetricsEventName.QuotesReceived,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:P,token_from_amount:String(t),token_to:H,token_to_amount:s,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,response_time:Date.now()-e,best_quote_source:a.aggregator,available_quotes:null===(se=Object.values(o))||void 0===se?void 0:se.length,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,f.getSmartTransactionsOptInStatusForMetrics)(S),gas_included:a.isGasIncludedTrade,anonymizedData:!0}}),i((0,l.setInitialGasEstimate)(c))}}catch(e){if(e.message===E.SWAPS_FETCH_ORDER_CONFLICT)return void s.default.debug("Swap fetch order conflict detected; ignoring older request");s.default.error("Error fetching quotes: ",e),i((0,l.setSwapsErrorKey)(E.ERROR_FETCHING_QUOTES))}i(le(!1))};n.signAndSendSwapsSmartTransaction=({unsignedTransaction:e,trackEvent:t,history:n,additionalTrackingParams:r})=>async(a,c)=>{var u,T,S,_,I,O,N,R;a(Re(!0));const v=c(),C=$(v),w=(0,g.isHardwareWallet)(v),D=(0,g.getHardwareWalletType)(v),{metaData:k,value:P,slippage:b}=C,{sourceTokenInfo:M={},destinationTokenInfo:F={}}=k,L=z(v),U=te(v),x=(0,g.getSelectedNetwork)(v);a((0,l.setSmartTransactionsRefreshInterval)(null==U?void 0:U.stxBatchStatusRefreshTime));const G=L.trade,B=(0,A.calcTokenAmount)(L.destinationAmount,F.decimals||18).toPrecision(8),H=(0,f.getSmartTransactionsEnabled)(v),K=W(v),j={token_from:M.symbol,token_from_amount:String(P),token_to:F.symbol,token_to_amount:B,slippage:b,custom_slippage:2!==b,best_quote_source:null===(u=Q(v))||void 0===u?void 0:u.aggregator,available_quotes:null===(T=q(v))||void 0===T?void 0:T.length,other_quote_selected:L.aggregator!==(null===(S=Q(v))||void 0===S?void 0:S.aggregator),other_quote_selected_source:L.aggregator===(null===(_=Q(v))||void 0===_?void 0:_.aggregator)?"":L.aggregator,average_savings:null===(I=L.savings)||void 0===I?void 0:I.total,performance_savings:null===(O=L.savings)||void 0===O?void 0:O.performance,fee_savings:null===(N=L.savings)||void 0===N?void 0:N.fee,median_metamask_fee:null===(R=L.savings)||void 0===R?void 0:R.medianMetaMaskFee,is_hardware_wallet:w,hardware_wallet_type:D,stx_enabled:H,current_stx_enabled:K,stx_user_opt_in:(0,f.getSmartTransactionsOptInStatusForMetrics)(v),gas_included:L.isGasIncludedTrade,...r};if(t({event:"STX Swap Started",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:j}),!(0,p.isContractAddressValid)(G.to,x.configuration.chainId))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:j.token_from,token_to:j.token_to,contract_address:G.to}}),await a((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void n.push(d.SWAPS_ERROR_ROUTE);const V=Z(v);let Y,X;try{var J;let t;if(V&&(X={...V,value:"0x0"}),t=L.isGasIncludedTrade?ee(v):await a(De({unsignedTransaction:e,approveTxParams:X,fallbackOnNotEnoughFunds:!0})),!t)return s.default.error('"fetchSwapsSmartTransactionFees" failed'),a(Re(!1)),void a(Ne(p.StxErrorTypes.unavailable));var ne;if(V)X.gas=`0x${(0,m.decimalToHex)((null===(ne=t.approvalTxFees)||void 0===ne?void 0:ne.gasLimit)||0)}`,X.chainId=x.configuration.chainId,Y=await a((0,l.signAndSendSmartTransaction)({unsignedTransaction:X,smartTransactionFees:t.approvalTxFees}));e.gas=`0x${(0,m.decimalToHex)((null===(J=t.tradeTxFees)||void 0===J?void 0:J.gasLimit)||0)}`,e.chainId=x.configuration.chainId;const r=await a((0,l.signAndSendSmartTransaction)({unsignedTransaction:e,smartTransactionFees:t.tradeTxFees})),o=F.address,c=F.decimals,u=F.symbol,T=M.symbol;await a((0,l.updateSmartTransaction)(r,{origin:y.ORIGIN_METAMASK,destinationTokenAddress:o,destinationTokenDecimals:c,destinationTokenSymbol:u,sourceTokenSymbol:T,swapMetaData:j,swapTokenValue:P,type:i.TransactionType.swap})),Y&&await a((0,l.updateSmartTransaction)(Y,{origin:y.ORIGIN_METAMASK,type:i.TransactionType.swapApproval,sourceTokenSymbol:T})),n.push(d.SMART_TRANSACTION_STATUS_ROUTE),a(Re(!1))}catch(e){console.log("signAndSendSwapsSmartTransaction error",e),a(Re(!1));const{swaps:{isFeatureFlagLoaded:t}}=c();if(e.message.startsWith("Fetch error:")&&t){const t=(0,p.parseSmartTransactionsError)(e.message);a(Ne(null==t?void 0:t.error))}}};function we(){return async(e,t)=>{const n=t(),r=(0,T.getCurrentChainId)(n);let a;e(oe());try{a=await(0,p.fetchSwapsGasPrices)(r)}catch(t){var o;if(s.default.warn("Fetching swaps gas prices failed:",t),null===(o=t.message)||void 0===o||!o.match(/NetworkError|Fetch failed with status:/u))throw t;e(ie());try{const t=await global.ethQuery.gasPrice(),n=(0,m.hexWEIToDecGWEI)(t.toString(10));return e(Ie(n)),null}catch(e){return console.error("Failed to retrieve fallback gas price: ",e),null}}return e(se({priceEstimates:a})),a}}function De({unsignedTransaction:e,approveTxParams:t,fallbackOnNotEnoughFunds:n=!1}){return async(r,a)=>{const{swaps:{isFeatureFlagLoaded:s}}=a();try{return await r((0,l.fetchSmartTransactionFees)(e,t))}catch(e){if(e.message.startsWith("Fetch error:")&&s){const t=(0,p.parseSmartTransactionsError)(e.message);(n||(null==t?void 0:t.error)!==p.StxErrorTypes.notEnoughFunds)&&r(Ne(null==t?void 0:t.error))}}return null}}n.signAndSendTransactions=(e,t,n)=>async(r,c)=>{var S,y,I,O,R,C,w,D,k,P,b;const M=c(),F=(0,T.getCurrentChainId)(M),L=(0,g.isHardwareWallet)(M),U=(0,g.checkNetworkAndAccountSupports1559)(M);let G={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();G=(0,p.getSwapsLivenessForNetwork)(F,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await r((0,l.setSwapsLiveness)(G)),!G.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const B=K(M),H=$(M),{metaData:j,value:V,slippage:Y}=H,{sourceTokenInfo:J={},destinationTokenInfo:ee={}}=j;await r((0,l.setBackgroundSwapRouteState)("awaiting")),await r((0,l.stopPollingForQuotes)()),L||e.push(d.AWAITING_SWAP_ROUTE);const{fast:te}=x(M),ne=z(M),re=ne.trade,ae=Z(M);let se;if(U){const e=(0,_.getGasFeeEstimates)(M),{estimatedBaseFee:t="0"}=e;se=await(0,p.getSwap1559GasFeeEstimates)(ne.trade,ae,t,F),v("Received 1559 gas fee estimates",se)}const oe=null===(S=se)||void 0===S?void 0:S.tradeGasFeeEstimates,ie=null===(y=se)||void 0===y?void 0:y.approveGasFeeEstimates,ce=new a.default((null==ne?void 0:ne.gasEstimate)||0,16).round(0).toString(16),ue=(0,N.calculateMaxGasLimit)(null==ne?void 0:ne.gasEstimate,null==ne?void 0:ne.gasMultiplier,null==ne?void 0:ne.maxGas,B),le=X(M);re.gas=ue,U?(re.maxFeePerGas=null==oe?void 0:oe.maxFeePerGas,re.maxPriorityFeePerGas=null==oe?void 0:oe.maxPriorityFeePerGas,delete re.gasPrice):re.gasPrice=le;const de=(0,g.getUSDConversionRate)(M),pe=(0,A.calcTokenAmount)(ne.destinationAmount,ee.decimals||18).toPrecision(8),me=(null==ne?void 0:ne.gasEstimateWithRefund)||`0x${(0,m.decimalToHex)((null==ne?void 0:ne.averageGas)||0)}`,Te=(0,A.calcGasTotal)(me,U?null==oe?void 0:oe.baseAndPriorityFeePerGas:le),ge=null===(I=ne.approvalNeeded)||void 0===I?void 0:I.gas,fe=ge?(0,A.calcGasTotal)(ge,U?null==ie?void 0:ie.baseAndPriorityFeePerGas:le):"0x0",he=(0,m.getValueFromWeiHex)({value:(0,m.addHexes)(Te,fe),toCurrency:"usd",conversionRate:de,numberOfDecimals:6}),Ee=(0,f.getSmartTransactionsEnabled)(M),Se=W(M),_e={token_from:J.symbol,token_from_amount:String(V),token_to:ee.symbol,token_to_amount:pe,slippage:Y,custom_slippage:2!==Y,best_quote_source:null===(O=Q(M))||void 0===O?void 0:O.aggregator,available_quotes:null===(R=q(M))||void 0===R?void 0:R.length,other_quote_selected:ne.aggregator!==(null===(C=Q(M))||void 0===C?void 0:C.aggregator),other_quote_selected_source:ne.aggregator===(null===(w=Q(M))||void 0===w?void 0:w.aggregator)?"":ne.aggregator,gas_fees:he,estimated_gas:new a.default(ce,16).toString(10),suggested_gas_price:te,used_gas_price:(0,m.hexWEIToDecGWEI)(le),average_savings:null===(D=ne.savings)||void 0===D?void 0:D.total,performance_savings:null===(k=ne.savings)||void 0===k?void 0:k.performance,fee_savings:null===(P=ne.savings)||void 0===P?void 0:P.fee,median_metamask_fee:null===(b=ne.savings)||void 0===b?void 0:b.medianMetaMaskFee,is_hardware_wallet:L,hardware_wallet_type:(0,g.getHardwareWalletType)(M),stx_enabled:Ee,current_stx_enabled:Se,stx_user_opt_in:(0,f.getSmartTransactionsOptInStatusForMetrics)(M),...n};if(U&&(_e.max_fee_per_gas=null==oe?void 0:oe.maxFeePerGas,_e.max_priority_fee_per_gas=null==oe?void 0:oe.maxPriorityFeePerGas,_e.base_and_priority_fee_per_gas=null==oe?void 0:oe.baseAndPriorityFeePerGas),t({event:h.MetaMetricsEventName.SwapStarted,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:_e}),!(0,p.isContractAddressValid)(re.to,F))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:_e.token_from,token_to:_e.token_to,contract_address:re.to}}),await r((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE);let ye;if(L&&e.push(d.AWAITING_SIGNATURES_ROUTE),ae){U&&(ae.maxFeePerGas=null==ie?void 0:ie.maxFeePerGas,ae.maxPriorityFeePerGas=null==ie?void 0:ie.maxPriorityFeePerGas,delete ae.gasPrice),v("Creating approve transaction",ae);try{if(ye=await(0,l.addTransactionAndWaitForPublish)({...ae,amount:"0x0"},{requireApproval:!1,type:i.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:i.TransactionType.swapApproval,sourceTokenSymbol:J.symbol}}}),[u.CHAIN_IDS.LINEA_MAINNET,u.CHAIN_IDS.LINEA_GOERLI,u.CHAIN_IDS.LINEA_SEPOLIA].includes(F)){v("Delaying submitting trade tx to make Linea confirmation more likely");const e=new Promise((e=>setTimeout(e,5e3)));await e}}catch(t){return v("Approve transaction failed",t),await r((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE)}}v("Creating trade transaction",re);try{var Ae,Ie;await(0,l.addTransactionAndWaitForPublish)(re,{requireApproval:!1,type:i.TransactionType.swap,swaps:{hasApproveTx:Boolean(ae),meta:{estimatedBaseFee:null===(Ae=se)||void 0===Ae?void 0:Ae.estimatedBaseFee,sourceTokenSymbol:J.symbol,destinationTokenSymbol:ee.symbol,type:i.TransactionType.swap,destinationTokenDecimals:ee.decimals,destinationTokenAddress:ee.address,swapMetaData:_e,swapTokenValue:V,approvalTxId:null===(Ie=ye)||void 0===Ie?void 0:Ie.id}}})}catch(t){const n=t.message.includes("EthAppPleaseEnableContractData")?E.CONTRACT_DATA_DISABLED_ERROR:E.SWAP_FAILED_ERROR;return v("Trade transaction failed",t),await r((0,l.setSwapsErrorKey)(n)),void e.push(d.SWAPS_ERROR_ROUTE)}L&&e.push(d.AWAITING_SWAP_ROUTE),await(0,l.forceUpdateMetamaskState)(r)}}}},{package:"$root$",file:"ui/ducks/swaps/swaps.js"}],[5978,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORT_REQUEST_LINK=n.SECONDARY=n.PRIMARY=n.PASSWORD_MIN_LENGTH=n.OUTDATED_BROWSER_VERSIONS=n.METAMETRICS_SETTINGS_LINK=n.FIXED_PRERENDER_BROWSER_VERSIONS=n.CONTRACT_ADDRESS_LINK=n.BROKEN_PRERENDER_BROWSER_VERSIONS=void 0;n.PRIMARY="PRIMARY",n.SECONDARY="SECONDARY",n.METAMETRICS_SETTINGS_LINK="https://support.metamask.io/privacy-and-security/how-to-manage-your-metametrics-settings",n.SUPPORT_REQUEST_LINK="https://support.metamask.io",n.CONTRACT_ADDRESS_LINK="https://support.metamask.io/managing-my-tokens/moving-your-tokens/why-am-i-being-warned-about-sending-tokens-to-a-contract/",n.PASSWORD_MIN_LENGTH=8,n.OUTDATED_BROWSER_VERSIONS={chrome:"<109",edge:"<109",firefox:"<102",opera:"<95"},n.BROKEN_PRERENDER_BROWSER_VERSIONS={chrome:">=113",edge:">=113"},n.FIXED_PRERENDER_BROWSER_VERSIONS={windows:{chrome:">=120",edge:">=120"},macos:{chrome:">=120",edge:">=120"},chrome:">=121",edge:">=121"}}}},{package:"$root$",file:"ui/helpers/constants/common.ts"}],[598,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>s.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}}n.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[5980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypographyVariant=n.TextVariant=n.TextTransform=n.TextColor=n.TextAlign=n.TEXT_TRANSFORM=n.TEXT_ALIGN=n.Size=n.Severity=n.SEVERITIES=n.OverflowWrap=n.OVERFLOW_WRAP=n.JustifyContent=n.IconColor=n.FontWeight=n.FontStyle=n.FlexWrap=n.FlexDirection=n.FRACTIONS=n.FONT_WEIGHT=n.FONT_STYLE=n.FLEX_WRAP=n.FLEX_DIRECTION=n.Display=n.DISPLAY=n.Color=n.BorderStyle=n.BorderRadius=n.BorderColor=n.BlockSize=n.BackgroundColor=n.BREAKPOINTS=n.BLOCK_SIZES=n.AlignItems=void 0;n.Color=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.borderDefault="border-default",e.borderMuted="border-muted",e.overlayDefault="overlay-default",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.errorInverse="error-inverse",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.warningInverse="warning-inverse",e.successDefault="success-default",e.successMuted="success-muted",e.successInverse="success-inverse",e.infoDefault="info-default",e.infoMuted="info-muted",e.infoInverse="info-inverse",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.transparent="transparent",e.localhost="localhost",e.inherit="inherit",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e}({}),n.BackgroundColor=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundHover="background-hover",e.backgroundPressed="background-pressed",e.overlayDefault="overlay-default",e.overlayAlternative="overlay-alternative",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e}({}),n.BorderColor=function(e){return e.borderDefault="border-default",e.borderMuted="border-muted",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e.backgroundDefault="background-default",e}({}),n.TextColor=function(e){return e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.IconColor=function(e){return e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.TypographyVariant=function(e){return e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.H7="h7",e.H8="h8",e.H9="h9",e.paragraph="p",e.span="span",e}({}),n.TextVariant=function(e){return e.displayMd="display-md",e.headingLg="heading-lg",e.headingMd="heading-md",e.headingSm="heading-sm",e.bodyLgMedium="body-lg-medium",e.bodyMd="body-md",e.bodyMdMedium="body-md-medium",e.bodyMdBold="body-md-bold",e.bodySm="body-sm",e.bodySmMedium="body-sm-medium",e.bodySmBold="body-sm-bold",e.bodyXs="body-xs",e.bodyXsMedium="body-xs-medium",e.inherit="inherit",e}({}),n.Size=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.inherit="inherit",e.auto="auto",e}({}),n.BorderStyle=function(e){return e.dashed="dashed",e.solid="solid",e.dotted="dotted",e.double="double",e.none="none",e}({}),n.BorderRadius=function(e){return e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.none="none",e.pill="pill",e.full="full",e}({}),n.AlignItems=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.baseline="baseline",e.stretch="stretch",e}({}),n.JustifyContent=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.spaceAround="space-around",e.spaceBetween="space-between",e.spaceEvenly="space-evenly",e}({}),n.FlexDirection=function(e){return e.Row="row",e.RowReverse="row-reverse",e.Column="column",e.ColumnReverse="column-reverse",e}({});n.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};n.FlexWrap=function(e){return e.Wrap="wrap",e.WrapReverse="wrap-reverse",e.NoWrap="nowrap",e}({});n.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};n.Display=function(e){return e.Block="block",e.Flex="flex",e.Grid="grid",e.InlineBlock="inline-block",e.Inline="inline",e.InlineFlex="inline-flex",e.InlineGrid="inline-grid",e.ListItem="list-item",e.None="none",e}({});n.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE:"inline",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item",NONE:"none"};const r=n.FRACTIONS={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};n.BlockSize=function(e){return e.Zero="0",e.Half="1/2",e.OneThird="1/3",e.TwoThirds="2/3",e.OneFourth="1/4",e.TwoFourths="2/4",e.ThreeFourths="3/4",e.OneFifth="1/5",e.TwoFifths="2/5",e.ThreeFifths="3/5",e.FourFifths="4/5",e.OneSixth="1/6",e.TwoSixths="2/6",e.ThreeSixths="3/6",e.FourSixths="4/6",e.FiveSixths="5/6",e.OneTwelfth="1/12",e.TwoTwelfths="2/12",e.ThreeTwelfths="3/12",e.FourTwelfths="4/12",e.FiveTwelfths="5/12",e.SixTwelfths="6/12",e.SevenTwelfths="7/12",e.EightTwelfths="8/12",e.NineTwelfths="9/12",e.TenTwelfths="10/12",e.ElevenTwelfths="11/12",e.Screen="screen",e.Max="max",e.Min="min",e.Full="full",e}({});n.BLOCK_SIZES={...r,SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"};n.TextAlign=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Justify="justify",e.End="end",e.Start="start",e}({});n.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end",START:"start"};n.TextTransform=function(e){return e.Uppercase="uppercase",e.Lowercase="lowercase",e.Capitalize="capitalize",e}({});n.TEXT_TRANSFORM={UPPERCASE:"uppercase",LOWERCASE:"lowercase",CAPITALIZE:"capitalize"};n.FontWeight=function(e){return e.Bold="bold",e.Medium="medium",e.Normal="normal",e}({});n.FONT_WEIGHT={BOLD:"bold",MEDIUM:"medium",NORMAL:"normal"};n.OverflowWrap=function(e){return e.BreakWord="break-word",e.Anywhere="anywhere",e.Normal="normal",e}({});n.OVERFLOW_WRAP={BREAK_WORD:"break-word",ANYWHERE:"anywhere",NORMAL:"normal"};n.FontStyle=function(e){return e.Italic="italic",e.Normal="normal",e}({});n.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};n.Severity=function(e){return e.Danger="danger",e.Warning="warning",e.Info="info",e.Success="success",e}({});n.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"},n.BREAKPOINTS=["base","sm","md","lg"]}}},{package:"$root$",file:"ui/helpers/constants/design-system.ts"}],[5981,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY=n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.IS_SIGNING_OR_SUBMITTING=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds",n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow",n.TRANSACTION_ERROR_KEY="transactionError",n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning",n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed",n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive",n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas",n.INVALID_ASSET_TYPE="invalidAssetType",n.IS_SIGNING_OR_SUBMITTING="isSigningOrSubmitting",n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY="userOpContractDeployError"}}},{package:"$root$",file:"ui/helpers/constants/error-keys.js"}],[5984,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NOTIFICATIONS_EXPIRATION_DELAY=void 0;n.NOTIFICATIONS_EXPIRATION_DELAY=1e4}}},{package:"$root$",file:"ui/helpers/constants/notifications.ts"}],[5986,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UNLOCK_ROUTE=n.SWAPS_ROUTE=n.SWAPS_NOTIFICATION_ROUTE=n.SWAPS_MAINTENANCE_ROUTE=n.SWAPS_ERROR_ROUTE=n.SNAPS_VIEW_ROUTE=n.SNAPS_ROUTE=n.SMART_TRANSACTION_STATUS_ROUTE=n.SIGNATURE_REQUEST_PATH=n.SETTINGS_ROUTE=n.SEND_ROUTE=n.SECURITY_ROUTE=n.REVIEW_PERMISSIONS=n.REVEAL_SEED_ROUTE=n.RESTORE_VAULT_ROUTE=n.PREPARE_SWAP_ROUTE=n.PERMISSIONS=n.PATH_NAME_MAP=n.ONBOARDING_WELCOME_ROUTE=n.ONBOARDING_UNLOCK_ROUTE=n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=n.ONBOARDING_ROUTE=n.ONBOARDING_REVIEW_SRP_ROUTE=n.ONBOARDING_PRIVACY_SETTINGS_ROUTE=n.ONBOARDING_PIN_EXTENSION_ROUTE=n.ONBOARDING_METAMETRICS=n.ONBOARDING_IMPORT_WITH_SRP_ROUTE=n.ONBOARDING_HELP_US_IMPROVE_ROUTE=n.ONBOARDING_CREATE_PASSWORD_ROUTE=n.ONBOARDING_CONFIRM_SRP_ROUTE=n.ONBOARDING_COMPLETION_ROUTE=n.NOTIFICATIONS_SETTINGS_ROUTE=n.NOTIFICATIONS_ROUTE=n.NEW_ACCOUNT_ROUTE=n.NETWORKS_ROUTE=n.NETWORKS_FORM_ROUTE=n.MMI_ONBOARDING_COMPLETION_ROUTE=n.LOCK_ROUTE=n.LOADING_QUOTES_ROUTE=n.IMPORT_TOKEN_ROUTE=n.IMPORT_TOKENS_ROUTE=n.GENERAL_ROUTE=n.EXPERIMENTAL_ROUTE=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=n.DEVELOPER_OPTIONS_ROUTE=n.DEFAULT_ROUTE=n.DECRYPT_MESSAGE_REQUEST_PATH=n.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE=n.CROSS_CHAIN_SWAP_ROUTE=n.CONTACT_VIEW_ROUTE=n.CONTACT_LIST_ROUTE=n.CONTACT_EDIT_ROUTE=n.CONTACT_ADD_ROUTE=n.CONNECT_SNAP_UPDATE_ROUTE=n.CONNECT_SNAP_RESULT_ROUTE=n.CONNECT_SNAP_INSTALL_ROUTE=n.CONNECT_SNAPS_CONNECT_ROUTE=n.CONNECT_ROUTE=n.CONNECT_HARDWARE_ROUTE=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=n.CONNECTIONS=n.CONNECTED_ROUTE=n.CONNECTED_ACCOUNTS_ROUTE=n.CONFIRM_TRANSFER_FROM_PATH=n.CONFIRM_TRANSACTION_ROUTE=n.CONFIRM_TOKEN_METHOD_PATH=n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH=n.CONFIRM_SEND_TOKEN_PATH=n.CONFIRM_SEND_ETHER_PATH=n.CONFIRM_SAFE_TRANSFER_FROM_PATH=n.CONFIRM_INCREASE_ALLOWANCE_PATH=n.CONFIRM_IMPORT_TOKEN_ROUTE=n.CONFIRM_DEPLOY_CONTRACT_PATH=n.CONFIRM_APPROVE_PATH=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE=n.CONFIRMATION_V_NEXT_ROUTE=n.AWAITING_SWAP_ROUTE=n.AWAITING_SIGNATURES_ROUTE=n.ASSET_ROUTE=n.ADVANCED_ROUTE=n.ADD_POPULAR_CUSTOM_NETWORK=n.ADD_NETWORK_ROUTE=n.ABOUT_US_ROUTE=void 0;const r=n.PATH_NAME_MAP={};r[n.DEFAULT_ROUTE="/"]="Home";r[n.UNLOCK_ROUTE="/unlock"]="Unlock Page";r[n.LOCK_ROUTE="/lock"]="Lock Page";const a=n.ASSET_ROUTE="/asset";r[`${a}/:asset/:id`]="Asset Page",r[`${a}/image/:asset/:id`]="Nft Image Page";r[n.SETTINGS_ROUTE="/settings"]="Settings Page";r[n.GENERAL_ROUTE="/settings/general"]="General Settings Page";r[n.ADVANCED_ROUTE="/settings/advanced"]="Advanced Settings Page";n.DEVELOPER_OPTIONS_ROUTE="/settings/developer-options";r[n.EXPERIMENTAL_ROUTE="/settings/experimental"]="Experimental Settings Page";r[n.SECURITY_ROUTE="/settings/security"]="Security Settings Page";r[n.ABOUT_US_ROUTE="/settings/about-us"]="About Us Page";r[n.NETWORKS_ROUTE="/settings/networks"]="Network Settings Page";r[n.NETWORKS_FORM_ROUTE="/settings/networks/form"]="Network Settings Page Form";r[n.ADD_NETWORK_ROUTE="/settings/networks/add-network"]="Add Network From Settings Page Form";r[n.ADD_POPULAR_CUSTOM_NETWORK="/settings/networks/add-popular-custom-network"]="Add Network From A List Of Popular Custom Networks";r[n.CONTACT_LIST_ROUTE="/settings/contact-list"]="Contact List Settings Page";r[`${n.CONTACT_EDIT_ROUTE="/settings/contact-list/edit-contact"}/:address`]="Edit Contact Settings Page";r[n.CONTACT_ADD_ROUTE="/settings/contact-list/add-contact"]="Add Contact Settings Page";r[`${n.CONTACT_VIEW_ROUTE="/settings/contact-list/view-contact"}/:address`]="View Contact Settings Page";r[n.REVEAL_SEED_ROUTE="/seed"]="Reveal Secret Recovery Phrase Page";r[n.RESTORE_VAULT_ROUTE="/restore-vault"]="Restore Vault Page";r[n.IMPORT_TOKEN_ROUTE="/import-token"]="Import Token Page";r[n.IMPORT_TOKENS_ROUTE="/import-tokens"]="Import Tokens Page";r[n.CONFIRM_IMPORT_TOKEN_ROUTE="/confirm-import-token"]="Confirm Import Token Page";r[n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE="/confirm-add-suggested-token"]="Confirm Add Suggested Token Page";r[n.NEW_ACCOUNT_ROUTE="/new-account"]="New Account Page";r[n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE="/confirm-add-suggested-nft"]="Confirm Add Suggested NFT Page";r[n.CONNECT_HARDWARE_ROUTE="/new-account/connect"]="Connect Hardware Wallet Page";r[n.SEND_ROUTE="/send"]="Send Page";r[n.CONNECTIONS="/connections"]="Connections";r[n.PERMISSIONS="/permissions"]="Permissions";n.REVIEW_PERMISSIONS="/review-permissions";const s=n.CONNECT_ROUTE="/connect";r[`${s}/:id`]="Connect To Site Confirmation Page";r[`${s}/:id${n.CONNECT_CONFIRM_PERMISSIONS_ROUTE="/confirm-permissions"}`]="Grant Connected Site Permissions Confirmation Page";r[`${s}/:id${n.CONNECT_SNAPS_CONNECT_ROUTE="/snaps-connect"}`]="Snaps Connect Page";r[`${s}/:id${n.CONNECT_SNAP_INSTALL_ROUTE="/snap-install"}`]="Snap Install Page";r[`${s}/:id${n.CONNECT_SNAP_UPDATE_ROUTE="/snap-update"}`]="Snap Update Page";r[`${s}/:id${n.CONNECT_SNAP_RESULT_ROUTE="/snap-install-result"}`]="Snap Install Result Page";r[n.SNAPS_ROUTE="/snaps"]="Snaps List Page";r[`${n.SNAPS_VIEW_ROUTE="/snaps/view"}/:snapId`]="Snap View Page";const o=n.NOTIFICATIONS_ROUTE="/notifications";r[o]="Notifications Page",r[`${o}/:uuid`]="Notification Detail Page";r[n.NOTIFICATIONS_SETTINGS_ROUTE="/notifications/settings"]="Notifications Settings Page";r[n.CONNECTED_ROUTE="/connected"]="Sites Connected To This Account Page";r[n.CONNECTED_ACCOUNTS_ROUTE="/connected/accounts"]="Accounts Connected To This Site Page";const i=n.CONFIRM_TRANSACTION_ROUTE="/confirm-transaction";r[i]="Confirmation Root Page",r[`${i}/:id`]="Confirmation Root Page";const c=n.CONFIRMATION_V_NEXT_ROUTE="/confirmation";r[c]="New Confirmation Page",r[`${c}/:id`]="New Confirmation Page";r[`${i}/:id${n.CONFIRM_SEND_ETHER_PATH="/send-ether"}`]="Confirm Send Ether Transaction Page";r[`${i}/:id${n.CONFIRM_SEND_TOKEN_PATH="/send-token"}`]="Confirm Send Token Transaction Page";r[`${i}/:id${n.CONFIRM_DEPLOY_CONTRACT_PATH="/deploy-contract"}`]="Confirm Deploy Contract Transaction Page";r[`${i}/:id${n.CONFIRM_APPROVE_PATH="/approve"}`]="Confirm Approve Transaction Page";r[`${i}/:id${n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH="/set-approval-for-all"}`]="Confirm Set Approval For All Transaction Page";r[`${i}/:id${n.CONFIRM_TRANSFER_FROM_PATH="/transfer-from"}`]="Confirm Transfer From Transaction Page";r[`${i}/:id${n.CONFIRM_SAFE_TRANSFER_FROM_PATH="/safe-transfer-from"}`]="Confirm Safe Transfer From Transaction Page";r[`${i}/:id${n.CONFIRM_TOKEN_METHOD_PATH="/token-method"}`]="Confirm Token Method Transaction Page";r[`${i}/:id${n.CONFIRM_INCREASE_ALLOWANCE_PATH="/increase-allowance"}`]="Confirm Increase Allowance Transaction Page";r[`${i}/:id${n.SIGNATURE_REQUEST_PATH="/signature-request"}`]="Signature Request Page";r[`${i}/:id${n.DECRYPT_MESSAGE_REQUEST_PATH="/decrypt-message-request"}`]="Decrypt Message Request Page";r[`${i}/:id${n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH="/encryption-public-key-request"}`]="Encryption Public Key Request Page";n.CROSS_CHAIN_SWAP_ROUTE="/cross-chain",n.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE="/cross-chain/tx-details",n.SWAPS_ROUTE="/swaps";r[n.PREPARE_SWAP_ROUTE="/swaps/prepare-swap-page"]="Prepare Swap Page";r[n.SWAPS_NOTIFICATION_ROUTE="/swaps/notification-page"]="Swaps Notification Page";r[n.LOADING_QUOTES_ROUTE="/swaps/loading-quotes"]="Swaps Loading Quotes Page";n.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures",n.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status";r[n.AWAITING_SWAP_ROUTE="/swaps/awaiting-swap"]="Swaps Awaiting Swaps Page";r[n.SWAPS_ERROR_ROUTE="/swaps/swaps-error"]="Swaps Error Page";n.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance",n.ONBOARDING_ROUTE="/onboarding",n.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase",n.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase",n.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password",n.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion",n.MMI_ONBOARDING_COMPLETION_ROUTE="/onboarding/account-completion",n.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock",n.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve",n.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase",n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet",n.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings",n.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension",n.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome",n.ONBOARDING_METAMETRICS="/onboarding/metametrics"}}},{package:"$root$",file:"ui/helpers/constants/routes.ts"}],[599,{".":617,"./RegistryItem":609,"./RegistryType":610,"./lib":620,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const r=e("."),a=e("./lib"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[i.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new a.DataItem(e)}}}n.CryptoAccount=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),s=n[i.masterFingerprint];s&&a.writeUInt32BE(s,0);const o=n[i.outputDescriptors].map((e=>r.CryptoOutput.fromDataItem(e)));return new c(a,o)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[5992,{"@metamask/transaction-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var r=e("@metamask/transaction-controller");const a=n.PENDING_STATUS_HASH={[r.TransactionStatus.unapproved]:!0,[r.TransactionStatus.approved]:!0,[r.TransactionStatus.submitted]:!0};n.PRIORITY_STATUS_HASH={...a,[r.TransactionStatus.confirmed]:!0},n.TOKEN_CATEGORY_HASH={[r.TransactionType.tokenMethodApprove]:!0,[r.TransactionType.tokenMethodSetApprovalForAll]:!0,[r.TransactionType.tokenMethodTransfer]:!0,[r.TransactionType.tokenMethodTransferFrom]:!0,[r.TransactionType.tokenMethodIncreaseAllowance]:!0}}}},{package:"$root$",file:"ui/helpers/constants/transactions.js"}],[5993,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={ADD_CUSTOM_TOKENS:"https://support.metamask.io/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/",ADD_MISSING_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",BASIC_SAFETY:"https://support.metamask.io/privacy-and-security/basic-safety-and-security-tips-for-metamask/",CUSTOMIZE_NONCE:"https://support.metamask.io/transactions-and-gas/transactions/how-to-customize-a-transaction-nonce/",GAS_FEES:"https://support.metamask.io/transactions-and-gas/gas-fees/",SWAPS_GAS_FEES:"https://support.metamask.io/token-swaps/user-guide-swaps/#gas-fees",HARDWARE_CONNECTION:"https://support.metamask.io/privacy-and-security/hardware-wallet-hub/",IMPORT_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-import-an-account/",IMPORTED_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/what-are-imported-accounts-/",INFURA_BLOCKAGE:"https://support.metamask.io/troubleshooting/why-infura-cannot-serve-certain-areas/",LEDGER_FIREFOX_U2F_GUIDE:"https://support.ledger.com/hc/en-us/articles/10371387758493-MetaMask-Firefox-Ledger-Integration-Issue?support=true",LEGACY_WEB3:"https://support.metamask.io/third-party-platforms-and-dapps/metamask-legacy-web3/",NFT_TOKENS:"https://support.metamask.io/nfts/nft-tokens-in-your-metamask-wallet/",PASSWORD_AND_SRP_ARTICLE:"https://support.metamask.io/getting-started/user-guide-secret-recovery-phrase-password-and-private-keys/",SECRET_RECOVERY_PHRASE:"https://support.metamask.io/privacy-and-security/what-is-a-secret-recovery-phrase-and-how-to-keep-your-crypto-wallet-secure/",NON_CUSTODIAL_WALLET:"https://support.metamask.io/getting-started/metamask-is-a-self-custodial-wallet/",SPEEDUP_CANCEL:"https://support.metamask.io/transactions-and-gas/transactions/how-to-speed-up-or-cancel-a-pending-transaction/",SUPPORT_URL:"https://support.metamask.io",TOKEN_ALLOWANCE_WITH_SPENDING_CAP:"https://support.metamask.io/privacy-and-security/how-to-customize-token-approvals-with-a-spending-cap/",TOKEN_SAFETY_PRACTICES:"https://support.metamask.io/managing-my-tokens/token-safety-practices/",UNKNOWN_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/the-risks-of-connecting-to-an-unknown-network/",USER_GUIDE_CUSTOM_NETWORKS:"https://support.metamask.io/networks-and-sidechains/managing-networks/user-guide-custom-networks-and-sidechains/",USER_GUIDE_DAPPS:"https://support.metamask.io/third-party-platforms-and-dapps/user-guide-dapps/",USER_GUIDE_GAS:"https://support.metamask.io/transactions-and-gas/gas-fees/user-guide-gas/",VERIFY_CUSTOM_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/verifying-custom-network-information/",NETWORK_DEPRECATED:"https://support.metamask.io/networks-and-sidechains/eth-on-testnets/"}}}},{package:"$root$",file:"ui/helpers/constants/zendesk-url.js"}],[600,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o,i,c;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=n.Network||(n.Network={}));class u extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new r.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[o.type],r=t[o.network];return new u(n,r)},u.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[6005,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBuildSpecificAsset=function(e){const t="main";if(!r[t]||!Object.keys(r[t]).includes(e))return console.error(`Cannot find asset "${e}" for build "${t}", returning main build asset.`),r.main[e];return r[t][e]},n.isBeta=function(){return!1},n.isMMI=function(){return!1};const r={main:{foxMeshJson:undefined}}}}},{package:"$root$",file:"ui/helpers/utils/build-types.js"}],[6007,{"../../../shared/constants/common":4979,"../../../shared/modules/Numeric":5023,"bignumber.js":3341,"currency-formatter":3530,"currency-formatter/currencies":3529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(6)),new o.Numeric(e,10)).toString()},n.addFiat=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(2)),new o.Numeric(e,10)).toString()},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e){const{txParams:t,dappSuggestedGasFees:n}=e??{},{gasPrice:r,maxFeePerGas:a,maxPriorityFeePerGas:s}=t||{},{gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c}=n||{},u=!o&&!i&&!c;if(!r&&!a&&!s||u)return!1;const l=r&&r===o,d=[a,s].every((e=>e===o)),p=a&&a===i&&s===c;return Boolean(l||d||p)},n.convertTokenToFiat=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:r,contractExchangeRate:a}){const s=r*a;let c=new o.Numeric(e,10);t!==n&&s&&(c=c.applyConversionRate(s));return c.round(2).toString()},n.formatCurrency=function(e,t,n){const s=t.toUpperCase();return a.default.find((e=>e.code===s))?r.default.format(Number(e),{code:s,precision:n}):e},n.getHexGasTotal=function({gasLimit:e="0x0",gasPrice:t="0x0"}){return new o.Numeric(e,16).times(new o.Numeric(t,16)).toPrefixedHexString()},n.getTransactionFee=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:r,numberOfDecimals:a}){let s=new o.Numeric(e,16,i.EtherDenomination.WEI).toDenomination(i.EtherDenomination.ETH).toBase(10);t!==n&&r&&(s=s.applyConversionRate(r));return s.round(a).toString()},n.roundExponential=function(e){const t=new s.BigNumber(e);return t.e>20?t.toPrecision(4):e};var r=c(e("currency-formatter")),a=c(e("currency-formatter/currencies")),s=e("bignumber.js"),o=e("../../../shared/modules/Numeric"),i=e("../../../shared/constants/common");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/helpers/utils/confirm-tx.util.ts"}],[6009,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$",file:"ui/helpers/utils/formatters.js"}],[601,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class i extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new r.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=i,i.fromDataItem=e=>{const t=e.getData(),n=t[o.curve],r=t[o.private],a=t[o.data];if(!a)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new i({data:a,curve:n,privateKey:r})},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[6012,{"../../../shared/constants/network":4993,"../../../shared/modules/i18n":5037,"@sentry/browser":2747,react:4505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMessage=void 0,n.getNetworkLabelKey=function(e){if(e===i.NETWORK_TYPES.LINEA_SEPOLIA)return"lineaSepolia";if(e===i.NETWORK_TYPES.LINEA_MAINNET)return"lineaMainnet";return e};var r,a=(r=e("react"))&&r.__esModule?r:{default:r},s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("@sentry/browser")),o=e("../../../shared/modules/i18n"),i=e("../../../shared/constants/network");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n.getMessage=(e,t,n,r)=>{const i=(null==r?void 0:r.some((e=>null!==e&&("function"==typeof e||"object"==typeof e))))?e=>a.default.createElement("span",null," ",e," "):undefined;return(0,o.getMessage)(e,t,n,r,(e=>{s.captureException(e)}),i)}}}},{package:"$root$",file:"ui/helpers/utils/i18n-helper.tsx"}],[6013,{"../../../shared/modules/hexstring-utils":5036},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IconFactory=void 0,n.default=function(e){o||(o=new s(e));return o};var r=e("../../../shared/modules/hexstring-utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e,t=i){a(this,"jazzicon",void 0),a(this,"generateSeed",void 0),a(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=this.generateSeed(e);return this.jazzicon(t,n)}}let o;function i(e){const t=e.slice(2,10);return parseInt(t,16)}n.IconFactory=s}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[6015,{"../../../shared/constants/metametrics":4989,"../../../shared/constants/security-provider":4999,"../../../shared/lib/transactions-controller-utils":5021,"@metamask/transaction-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAccountType=function(e){if("default"===e)return"metamask";return e},n.generateSignatureUniqueId=function(e){return`signature-${e}`},n.getBlockaidMetricsProps=void 0,n.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},n.getSwapAndSendMetricsProps=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../shared/constants/security-provider"),s=e("../../../shared/constants/metametrics"),o=e("../../../shared/lib/transactions-controller-utils");n.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:n,reason:r,result_type:o,description:i,source:c}=e,u=(e=>{let t;return e===a.BlockaidResultType.Malicious?t=[s.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===a.BlockaidResultType.Warning?t=[s.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===a.BlockaidResultType.Errored&&(t=[s.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(o);return u&&(t.ui_customizations=u),o!==a.BlockaidResultType.Benign&&(t.security_alert_reason=r??a.BlockaidReason.notApplicable),i&&(t.security_alert_description=i),t.security_alert_response=o??a.BlockaidResultType.NotApplicable,t.security_alert_source=c,n&&Object.keys(n).forEach((e=>{t[`ppom_${e}_count`]=n[e]})),t};n.getSwapAndSendMetricsProps=e=>{if(e.type!==r.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:n,sourceTokenDecimals:a,destinationTokenAmount:s,destinationTokenDecimals:i,sourceTokenSymbol:c,destinationTokenAddress:u,destinationTokenSymbol:l,sourceTokenAddress:d}=e;return{chain_id:t,token_amount_source:n&&a?(0,o.calcTokenAmount)(n,a).toString():undefined,token_amount_dest_estimate:s&&i?(0,o.calcTokenAmount)(s,i).toString():undefined,token_symbol_source:c,token_symbol_destination:l,token_address_source:d,token_address_destination:u}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[602,{"./CryptoCoinInfo":600,"./CryptoKeypath":603,"./RegistryItem":609,"./RegistryType":610,"./lib":620,bs58check:3396,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoHDKey=void 0;const r=e("bs58check"),a=e("./CryptoCoinInfo"),s=e("./CryptoKeypath"),o=e("./lib"),i=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class l extends i.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,n,a;let s,o,i=0,c=t.alloc(4).fill(0);if(this.isMaster())s=t.from("0488ADE4","hex"),o=0,i=0;else{o=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(n=this.getOrigin())||void 0===n?void 0:n.getDepth());const r=null===(a=this.getOrigin())||void 0===a?void 0:a.getComponents(),u=r[r.length-1];u&&(i=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),s=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(o,0);const l=t.alloc(4);l.writeUInt32BE(i,0);const d=this.getChainCode(),p=this.getKey();return(0,r.encode)(t.concat([s,u,c,l,d,p]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,n,r,a,s,o;let i="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(i+=`${null===(r=null===(n=this.getOrigin())||void 0===n?void 0:n.getSourceFingerprint())||void 0===r?void 0:r.toString("hex")}/${null===(a=this.getOrigin())||void 0===a?void 0:a.getPath()}`),i+=this.getBip32Key(),this.getChildren()&&(null===(s=this.getChildren())||void 0===s?void 0:s.getPath())&&(i+=`/${null===(o=this.getChildren())||void 0===o?void 0:o.getPath()}`),i},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new o.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}n.CryptoHDKey=l,l.fromDataItem=e=>{const n=e.getData(),r=!!n[u.is_master],o=n[u.is_private],i=n[u.key_data],c=n[u.chain_code],d=n[u.use_info]?a.CryptoCoinInfo.fromDataItem(n[u.use_info]):undefined,p=n[u.origin]?s.CryptoKeypath.fromDataItem(n[u.origin]):undefined,m=n[u.children]?s.CryptoKeypath.fromDataItem(n[u.children]):undefined,T=n[u.parent_fingerprint];let g=undefined;T&&(g=t.alloc(4),g.writeUInt32BE(T,0));const f=n[u.name],h=n[u.note];return new l({isMaster:r,isPrivateKey:o,key:i,chainCode:c,useInfo:d,origin:p,children:m,parentFingerprint:g,name:f,note:h})},l.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return l.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[6024,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSnapId=function(e){return("string"==typeof e||e instanceof String)&&(e.startsWith("local:")||e.startsWith("npm:"))}}}},{package:"$root$",file:"ui/helpers/utils/snaps.js"}],[6026,{"../../../shared/constants/transaction":5007,"../../../shared/lib/metamask-controller-utils":5014,"../../../shared/lib/transactions-controller-utils":5021,"../../../shared/modules/Numeric":5023,"../../../shared/modules/string-utils":5053,"../../../shared/modules/transaction.utils":5055,"../../store/actions":6744,"./confirm-tx.util":6007,"./util":6029,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,r){var d,p,m;const T=(0,i.parseStandardTokenTransactionData)(n);if(!T)throw new Error("Unable to detect valid token data");let g=(null===(d=A(T))||void 0===d?void 0:d.toString())??(0,u.getTokenValueParam)(T);const f=y(T);let h;if(null!=r&&r.length&&g){const t=r.find((({address:t,tokenId:n})=>(0,o.isEqualCaseInsensitive)(e,t)&&n===g));if(t&&(t.name||t.symbol))return{toAddress:f,...t}}try{h=await(0,s.getTokenStandardAndDetails)(e,t,g)}catch(e){return a.default.warn(e),{toAddress:f,tokenId:g}}const E=(0,u.getTokenValueParam)(T),S=null===(p=h)||void 0===p?void 0:p.decimals,_=T&&E&&S&&(0,l.calcTokenAmount)(E,S).toString(10),I=S&&Number(null==S?void 0:S.toString(10));(null===(m=h)||void 0===m?void 0:m.standard)===c.TokenStandard.ERC20&&(g=undefined);return{tokenAmount:_,toAddress:f,decimals:I,tokenId:g,...h}},n.getSymbolAndDecimalsAndName=_,n.getTokenAddressParam=y,n.getTokenApprovedParam=function(e={}){var t;return null==e||null===(t=e.args)||void 0===t?void 0:t._approved},n.getTokenFiatAmount=function(e,t,n,r,a,s=!0,o=!1){if(t<=0||!e||r===undefined)return undefined;const i=new d.Numeric(e,10).times(new d.Numeric(t,10)).toString();let c,u=new d.Numeric(r,10);a!==n.toUpperCase()&&i&&(u=u.applyConversionRate(i));u=u.round(2).toString(),c=o?(0,m.formatCurrency)(u,n):s?`${(0,m.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return c},n.getTokenIdParam=A,n.getTokenMetadata=f,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await _(t,n)),e[t])};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("../../store/actions"),o=e("../../../shared/modules/string-utils"),i=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),u=e("../../../shared/lib/metamask-controller-utils"),l=e("../../../shared/lib/transactions-controller-utils"),d=e("../../../shared/modules/Numeric"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("./util")),m=e("./confirm-tx.util");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}const g="";function f(e,t){return e&&t[e.toLowerCase()]}async function h(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{return(await t.symbol())[0]}catch(t){return a.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=f(e,t);r&&(n=r.symbol)}return n}async function E(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const[e]=await t.name();return e}catch(t){return a.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=f(e,t);r&&(n=r.name)}return n}async function S(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const e=(await t.decimals())[0];return null==e?void 0:e.toString()}catch(t){return a.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=f(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function _(e,t){let n,r,s;try{const a=(await Promise.allSettled([h(e,t),S(e,t),E(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[n,r,s]=a}catch(t){a.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||g,decimals:r,name:s}}function y(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()}function A(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[6027,{"../../../app/scripts/lib/util":134,"../../../shared/constants/transaction":5007,"../../../shared/modules/contract-utils":5029,"@metamask/controller-utils":1375,"@metamask/transaction-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,s.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:r}=e;if("0x0"===t)return a.TransactionStatus.failed;if(r===a.TransactionStatus.confirmed&&n===a.TransactionType.cancel)return o.TransactionGroupStatus.cancelled;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case a.TransactionType.tokenMethodTransfer:return e("transfer");case a.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case a.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case a.TransactionType.tokenMethodApprove:return e("approve");case a.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case a.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case a.TransactionType.simpleSend:return e("sendingNativeAsset",[n]);case a.TransactionType.contractInteraction:return e("contractInteraction");case a.TransactionType.deployContract:return e("contractDeployment");case a.TransactionType.swap:return e("swap");case a.TransactionType.swapAndSend:return e("swapAndSend");case a.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===a.TransactionEnvelopeType.legacy},n.isNFTAssetStandard=void 0,n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,i.readAddressAsContract)(global.eth,e);return t},n.isTokenMethodAction=function(e){return[a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodApprove,a.TransactionType.tokenMethodSetApprovalForAll,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.tokenMethodSafeTransferFrom,a.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var r=e("@metamask/controller-utils"),a=e("@metamask/transaction-controller"),s=e("../../../app/scripts/lib/util"),o=e("../../../shared/constants/transaction"),i=e("../../../shared/modules/contract-utils");n.isNFTAssetStandard=e=>e===r.ERC1155||e===r.ERC721}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[6028,{"./util":6029,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,o,i){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:n,encryptionPublicKeyMsgs:r,typedMessages:o,chainId:i});const c=i?(0,s.valuesFor)(e).filter((e=>e.chainId===i)):(0,s.valuesFor)(e),u=(0,s.valuesFor)(t),l=(0,s.valuesFor)(n),d=(0,s.valuesFor)(r),p=(0,s.valuesFor)(o),m=c.concat(u).concat(l).concat(d).concat(p).sort(((e,t)=>e.time-t.time));return a.default.debug(`tx helper found ${c.length} unapproved txs`),a.default.debug(`tx helper found ${u.length} unsigned personal messages`),a.default.debug(`tx helper found ${l.length} decrypt requests`),a.default.debug(`tx helper found ${d.length} encryptionPublicKey requests`),a.default.debug(`tx helper found ${p.length} unsigned typed messages`),m};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[6029,{"../../../app/scripts/lib/multichain/address":86,"../../../shared/constants/labels":4987,"../../../shared/constants/network":4993,"../../../shared/modules/Numeric":5023,"../../../shared/modules/conversion.utils":5030,"../../../shared/modules/error":5032,"../../../shared/modules/hexstring-utils":5036,"../../../shared/modules/string-utils":5053,"../constants/common":5978,"../constants/routes":5986,"@metamask/assets-controllers":1338,"@metamask/snaps-rpc-methods":2303,"@metamask/snaps-utils":2471,"@metamask/utils":2620,"bignumber.js":3341,"bn.js":3344,bowser:3355,buffer:3392,"human-standard-token-abi":3917,lodash:4111,luxon:4119,"punycode/punycode":4315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.IS_FLASK=void 0,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,I.normalizeSafeAddress)(e);r||(a=(0,f.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.checkTokenIdExists=void 0,n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.fetchTokenExchangeRates=void 0,n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?v(e):e.split("."),s=a[0];let o=a[1],i="None";if(t===undefined)if("0"===s){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),i=`0.${o} ${r}`}}else i=`${s}.${o.slice(0,3)} ${r}`;else o+=Array(t).join("0"),i=`${s}.${o.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithSuffix=function(e){const t=i.DateTime.fromMillis(1e3*e),{day:n}=t,r=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return t.toFormat(`MMM d'${r}', yyyy`)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=i.DateTime.fromMillis(e),a=i.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.formatUTCDateFromUnixTimestamp=void 0,n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=async function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return await(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,g.logErrorWithMessage)(e),""}return e},n.getCalculatedTokenAmount1dAgo=n.getAvatarFallbackLetter=void 0,n.getContractAtAddress=function(e){return global.eth.contract(a.default).at(e)},n.getFilteredSnapPermissions=n.getDedupedSnaps=void 0,n.getIsBrowserDeprecated=function(e=l.default.getParser(window.navigator.userAgent)){return e.satisfies(S.OUTDATED_BROWSER_VERSIONS)??!1},n.getNetworkNameFromProviderType=void 0,n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getSnapRoute=n.getSnapName=void 0,n.getURL=D,n.getURLHost=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.hostname)||""},n.isAbleToExportAccount=n.hexToText=void 0,n.isDefaultMetaMaskChain=function(e){if(!e||e===T.CHAIN_IDS.MAINNET||e===T.CHAIN_IDS.LINEA_MAINNET||e===T.CHAIN_IDS.GOERLI||e===T.CHAIN_IDS.SEPOLIA||e===T.CHAIN_IDS.LINEA_GOERLI||e===T.CHAIN_IDS.LINEA_SEPOLIA||e===T.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=R,n.parseBalance=v,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new E.Numeric(new E.Numeric(e,10).toFixed(t),10).toNumber()},n.sanitizeString=n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){return C(e,{truncatedCharLimit:h.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:h.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:h.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},n.shortenString=C,n.sortSelectedInternalAccounts=function(e){return e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)))},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=w,n.stripHttpsSchemeWithoutPort=function(e){if(D(e).port)return e;return w(e)},n.toHumanReadableTime=n.stripOneLayerofNesting=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=N(e("punycode/punycode")),a=N(e("human-standard-token-abi")),s=N(e("bignumber.js")),o=N(e("bn.js")),i=e("luxon"),c=e("@metamask/assets-controllers"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("lodash")),l=N(e("bowser")),d=e("@metamask/snaps-rpc-methods"),p=e("@metamask/snaps-utils"),m=e("@metamask/utils"),T=e("../../../shared/constants/network"),g=e("../../../shared/modules/error"),f=e("../../../shared/modules/hexstring-utils"),h=e("../../../shared/constants/labels"),E=e("../../../shared/modules/Numeric"),S=e("../constants/common"),_=e("../../../shared/modules/string-utils"),y=e("../../../shared/modules/conversion.utils"),A=e("../constants/routes"),I=e("../../../app/scripts/lib/multichain/address");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function N(e){return e&&e.__esModule?e:{default:e}}function R(e){if(!e)return new o.default(0,16);const t=(0,f.stripHexPrefix)(e);return new o.default(t,16)}function v(e){let t;const n=R(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function C(e="",{truncatedCharLimit:t,truncatedStartChars:n,truncatedEndChars:r,skipCharacterInEnd:a}={truncatedCharLimit:h.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:h.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:h.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,n)}...${a?"":e.slice(-r)}`}function w(e){return e.replace(/^https:\/\//u,"")}function D(e){try{return new URL(e)}catch(e){return""}}n.formatUTCDateFromUnixTimestamp=e=>e?i.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const k=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...o.flat()]})(),P=e=>e.replace(/\[(\d*)\]/u,"");n.stripOneLayerofNesting=P;const b=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=t&&null!==t.match(/\[[[0-9]*\]*/u);var a;if(r)return{value:e.map((e=>b(e,P(t),n))),type:t};if(a=t,k.includes(a))return{value:e,type:t};const s=r?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,o=n[s];if(!o)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const r=Object.values(o).find((e=>e.name===t));r&&(i[t]=b(e[t],r.type,n))})),{value:i,type:t}};n.sanitizeMessage=b;n.getSnapName=e=>t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.name)??(0,p.stripSnapPrefix)(t)};n.getSnapRoute=e=>`${A.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;n.getDedupedSnaps=(e,t)=>{var n,r;const a=null==e||null===(n=e.permissions)||void 0===n?void 0:n[d.WALLET_SNAP_PERMISSION_KEY],s=null==a?void 0:a.caveats[0].value,o=null==t||null===(r=t[d.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value;if(!(0,m.isObject)(o)&&s)return Object.keys(s);const i=s?Object.keys(s):[],c=o?Object.keys(o):[],u=i.filter((e=>!c.includes(e)));return u.length>0?u:i};n.IS_FLASK=!1;n.sanitizeString=e=>{if(!e)return e;if(!u.isString(e))return e;return e.replace(/\u202E/giu,"\\u202E")};n.getNetworkNameFromProviderType=e=>e===T.NETWORK_TYPES.RPC?"":e;n.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");n.checkTokenIdExists=(e,t,n)=>{const r=(0,m.isStrictHexString)(t);let a=t;r&&(a=(0,y.hexToDecimal)(t));const s=(0,f.toChecksumHexAddress)(e);if(n[s]){const e=n[s];return u.some(e.nfts,(e=>e.address===s&&((0,_.isEqualCaseInsensitive)(e.tokenId,t)||(0,_.isEqualCaseInsensitive)(e.tokenId,a.toString()))))}return!1};n.fetchTokenExchangeRates=async(e,t,n)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:n})}catch(e){return{}}};n.hexToText=e=>{if(!e)return e;try{const n=(0,f.stripHexPrefix)(e),r=t.from(n,"hex");return 32===r.length?e:r.toString("utf8")}catch(t){return e}};n.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};n.getFilteredSnapPermissions=(e,t=Infinity,n=3)=>{const r=e.filter((e=>e.weight<=t));if(n&&r.length<n){const a=e.filter((e=>e.weight>t));return r.concat(a.slice(0,n-r.length))}return r};n.getCalculatedTokenAmount1dAgo=(e,t)=>t!==undefined&&e?e/(1+t/100):e??0}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[603,{"./PathComponent":608,"./RegistryItem":609,"./RegistryType":610,"./lib":620,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoKeypath=void 0;const r=e("./lib"),a=e("./PathComponent"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(i||(i={}));class c extends s.RegistryItem{constructor(e=[],t,n){super(),this.components=e,this.sourceFingerprint=t,this.depth=n,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[i.components]=t,this.sourceFingerprint&&(e[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[i.depth]=this.depth),new r.DataItem(e)}}}n.CryptoKeypath=c,c.fromDataItem=e=>{const n=e.getData(),r=[],s=n[i.components];if(s)for(let e=0;e<s.length;e+=2){const t=s[e+1],n=s[e];"number"==typeof n?r.push(new a.PathComponent({index:n,hardened:t})):r.push(new a.PathComponent({hardened:t}))}const o=n[i.source_fingerprint];let u;o&&(u=t.alloc(4),u.writeUInt32BE(o,0));const l=n[i.depth];return new c(r,u,l)},c.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[604,{"./CryptoECKey":601,"./CryptoHDKey":602,"./MultiKey":607,"./RegistryItem":609,"./RegistryType":610,"./ScriptExpression":611,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoOutput=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib"),o=e("./MultiKey"),i=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class l extends i.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof a.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof r.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof o.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof a.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const n=t.getTag();e.getTag()===undefined?e.setTag(n):e=new s.DataItem(e,n)})),e}}}n.CryptoOutput=l,l.fromDataItem=e=>{const t=[];let n=e;for(;;){let e=n.getTag();const r=u.ScriptExpression.fromTag(e);if(!r)break;if(t.push(r),!(n.getData()instanceof s.DataItem))break;n=n.getData(),e=n.getTag()}const i=t.length;if(i>0&&(t[i-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[i-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=o.MultiKey.fromDataItem(n);return new l(t,e)}if(n.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=a.CryptoHDKey.fromDataItem(n);return new l(t,e)}{const e=r.CryptoECKey.fromDataItem(n);return new l(t,e)}},l.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[605,{"./RegistryItem":609,"./RegistryType":610,"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoPSBT=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}}n.CryptoPSBT=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[6058,{"../../shared/constants/common":4979,"../../shared/constants/network":4993,"../../shared/modules/Numeric":5023,"../../shared/modules/conversion.utils":5030,"../helpers/utils/confirm-tx.util":6007,"../helpers/utils/token-util":6026,"../selectors/multichain":6734,"./useMultichainSelector":6074,"bignumber.js":3341,react:4505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,{account:t,displayValue:n,prefix:r,numberOfDecimals:s,denomination:T,currency:h,isAggregatedFiatOverviewBalance:E,...S}){const _=(0,m.useMultichainSelector)(i.getMultichainIsEvm,t),y=(0,m.useMultichainSelector)(i.getMultichainCurrentCurrency,t),A=(0,m.useMultichainSelector)(i.getMultichainNativeCurrency,t),I=(0,m.useMultichainSelector)(i.getMultichainConversionRate,t),O=h===y,N=h===A,R=(0,a.useMemo)((()=>n||(_?E?(0,o.formatCurrency)(e,h):function({isNativeCurrency:e,isUserPreferredCurrency:t,currency:n,nativeCurrency:r,inputValue:a,conversionRate:s,denomination:i,numberOfDecimals:u}){if(e||!t&&!r){const e=new l.Numeric(a,16,d.EtherDenomination.WEI).toDenomination(i||d.EtherDenomination.ETH).round(u||f).toBase(10).toString();return"0"===e&&a&&0!==Number(a)?g:e}if(t&&s)return(0,o.formatCurrency)((0,c.getValueFromWeiHex)({value:a,fromCurrency:r,toCurrency:n,conversionRate:s,numberOfDecimals:u||2,toDenomination:i}),n);return null}({isNativeCurrency:N,isUserPreferredCurrency:O,currency:h,nativeCurrency:A,inputValue:e,conversionRate:I,denomination:T,numberOfDecimals:s}):function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:r,currentCurrency:a,nativeCurrency:s,inputValue:i,conversionRate:c}){if(t||!n&&!s)return new l.Numeric(i,10).toString();if(n&&c){const t=(0,p.getTokenFiatAmount)(1,Number(c),a,i,e,!1,!1)??"0";return(0,o.formatCurrency)(t,r)}return null}({tokenSymbol:A,isNativeCurrency:N,isUserPreferredCurrency:O,currency:h,currentCurrency:y,nativeCurrency:A,inputValue:e,conversionRate:I}))),[n,_,N,O,h,A,e,I,T,s,y,E]);let v;if(!S.hideLabel){const e=Object.values(u.TEST_NETWORK_TICKER_MAP).includes(h)?h:null==h?void 0:h.toUpperCase();v=S.suffix||e}return[`${r||""}${R}${v?` ${v}`:""}`,{prefix:r,value:R,suffix:v}]};var r,a=e("react"),s=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},o=e("../helpers/utils/confirm-tx.util"),i=e("../selectors/multichain"),c=e("../../shared/modules/conversion.utils"),u=e("../../shared/constants/network"),l=e("../../shared/modules/Numeric"),d=e("../../shared/constants/common"),p=e("../helpers/utils/token-util"),m=e("./useMultichainSelector");const T=n.MIN_AMOUNT=1e-6,g=`<${T}`,f=n.DEFAULT_PRECISION=new s.default(T).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[606,{"..":617,"../RegistryType":610,"../errors":612,"@ngraveio/bc-ur":2638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.URRegistryDecoder=void 0;const r=e("@ngraveio/bc-ur"),a=e(".."),s=e("../RegistryType"),o=e("../errors");class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case s.RegistryTypes.BYTES.getType():return a.Bytes.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_HDKEY.getType():return a.CryptoHDKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_KEYPATH.getType():return a.CryptoKeypath.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_COIN_INFO.getType():return a.CryptoCoinInfo.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ECKEY.getType():return a.CryptoECKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_OUTPUT.getType():return a.CryptoOutput.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_PSBT.getType():return a.CryptoPSBT.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ACCOUNT.getType():return a.CryptoAccount.fromCBOR(e.cbor);default:throw new o.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}n.URRegistryDecoder=i}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[6068,{"../contexts/i18n":5941,react:4505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useI18nContext=function(){return(0,r.useContext)(a.I18nContext)};var r=e("react"),a=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[607,{"./CryptoECKey":601,"./CryptoHDKey":602,"./RegistryItem":609,"./RegistryType":610,"./lib/DataItem":618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultiKey=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib/DataItem"),o=e("./RegistryItem"),i=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends o.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}n.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),n=t[c.threshold],s=t[c.keys],o=[];return s.forEach((e=>{e.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?o.push(a.CryptoHDKey.fromDataItem(e)):e.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&o.push(r.CryptoECKey.fromDataItem(e))})),new u(n,o)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[6074,{"../selectors":6731,"react-redux":4463},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){return(0,r.useSelector)((n=>e(n,t||(0,a.getSelectedInternalAccount)(n))))};var r=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[608,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&r.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}n.PathComponent=r,r.HARDENED_BIT=2147483648}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[609,{"./lib":620,"@ngraveio/bc-ur":2638},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const r=e("@ngraveio/bc-ur"),a=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,a.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const a=this.toUR();return new r.UREncoder(a,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=r,n.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",undefined),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[611,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=r,r.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[6117,{"../../../app/scripts/controllers/bridge/constants":19,"../../../app/scripts/controllers/bridge/types":20,"../../../shared/constants/bridge":4978,"../../../shared/constants/network":4993,"../../../shared/constants/swaps":5003,"../../../shared/constants/time":5005,"../../../shared/lib/fetch-with-cache":5012,"../../../shared/modules/conversion.utils":5030,"../../../shared/modules/swaps.utils":5054,"./types":6144,"./utils/validators":6146,"@ethersproject/contracts":494,"@metamask/metamask-eth-abis":1844,"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchBridgeFeatureFlags=async function(){const e=`${c.BRIDGE_API_BASE_URL}/getAllFeatureFlags`,t=await(0,l.default)({url:e,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:S},functionName:"fetchBridgeFeatureFlags"});if((0,h.validateResponse)(h.FEATURE_FLAG_VALIDATORS,t,e))return{[i.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:t[f.BridgeFlag.EXTENSION_CONFIG],[i.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:t[f.BridgeFlag.EXTENSION_SUPPORT],[i.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:t[f.BridgeFlag.NETWORK_SRC_ALLOWLIST].map((e=>(0,s.add0x)((0,d.decimalToHex)(e)))),[i.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:t[f.BridgeFlag.NETWORK_DEST_ALLOWLIST].map((e=>(0,s.add0x)((0,d.decimalToHex)(e))))};return{[i.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:{refreshRate:T.REFRESH_INTERVAL_MS,maxRefreshCount:5},[i.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1,[i.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:[],[i.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:[]}},n.fetchBridgeQuotes=async function(e,t){const n=new URLSearchParams({walletAddress:e.walletAddress,srcChainId:e.srcChainId.toString(),destChainId:e.destChainId.toString(),srcTokenAddress:e.srcTokenAddress,destTokenAddress:e.destTokenAddress,srcTokenAmount:e.srcTokenAmount,slippage:e.slippage.toString(),insufficientBal:e.insufficientBal?"true":"false",resetApproval:e.resetApproval?"true":"false"}),r=`${c.BRIDGE_API_BASE_URL}/getQuote?${n}`,a=await(0,l.default)({url:r,fetchOptions:{method:"GET",headers:E,signal:t},cacheOptions:{cacheRefreshTime:0},functionName:"fetchBridgeQuotes"});return a.filter((e=>{const{quote:t,approval:n,trade:a}=e;return(0,h.validateResponse)(h.QUOTE_RESPONSE_VALIDATORS,e,r)&&(0,h.validateResponse)(h.QUOTE_VALIDATORS,t,r)&&(0,h.validateResponse)(h.TOKEN_VALIDATORS,t.srcAsset,r)&&(0,h.validateResponse)(h.TOKEN_VALIDATORS,t.destAsset,r)&&(0,h.validateResponse)(h.TX_DATA_VALIDATORS,a,r)&&(0,h.validateResponse)(h.FEE_DATA_VALIDATORS,t.feeData[f.FeeType.METABRIDGE],r)&&(!n||(0,h.validateResponse)(h.TX_DATA_VALIDATORS,n,r))}))},n.fetchBridgeTokens=async function(e){const t=`${c.BRIDGE_API_BASE_URL}/getTokens?chainId=${(0,d.hexToDecimal)(e)}`,n=await(0,l.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:S},functionName:"fetchBridgeTokens"}),r=p.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],a={};r&&(a[r.address]=r);return n.forEach((n=>{!(0,h.validateResponse)(h.TOKEN_VALIDATORS,n,t)||(0,m.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,m.isSwapsDefaultTokenAddress)(n.address,e)||(a[n.address]=n)})),a},n.isEthUsdt=n.getEthUsdtResetData=void 0;var r,a=e("@ethersproject/contracts"),s=e("@metamask/utils"),o=e("@metamask/metamask-eth-abis"),i=e("../../../app/scripts/controllers/bridge/types"),c=e("../../../shared/constants/bridge"),u=e("../../../shared/constants/time"),l=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},d=e("../../../shared/modules/conversion.utils"),p=e("../../../shared/constants/swaps"),m=e("../../../shared/modules/swaps.utils"),T=e("../../../app/scripts/controllers/bridge/constants"),g=e("../../../shared/constants/network"),f=e("./types"),h=e("./utils/validators");const E={"X-Client-Id":c.BRIDGE_CLIENT_ID},S=10*u.MINUTE;n.getEthUsdtResetData=()=>new a.Contract(c.ETH_USDT_ADDRESS,o.abiERC20).interface.encodeFunctionData("approve",[c.METABRIDGE_ETHEREUM_ADDRESS,"0"]);n.isEthUsdt=(e,t)=>e===g.CHAIN_IDS.MAINNET&&t.toLowerCase()===c.ETH_USDT_ADDRESS.toLowerCase()}}},{package:"$root$",file:"ui/pages/bridge/bridge.util.ts"}],[612,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}n.UnknownURTypeError=r}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[613,{"../CryptoHDKey":602,"../RegistryItem":609,"../RegistryType":610,"../lib":620,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoMultiAccounts=void 0;const r=e("../RegistryType"),a=e("../CryptoHDKey"),s=e("../RegistryItem"),o=e("../lib");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t,n,a,s){super(),this.masterFingerprint=e,this.keys=t,this.device=n,this.deviceId=a,this.version=s,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[i.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[i.device]=this.device),this.deviceId&&(e[i.deviceId]=this.deviceId),this.version&&(e[i.version]=this.version),new o.DataItem(e)}}}n.CryptoMultiAccounts=c,c.fromDataItem=e=>{const n=e.getData(),r=t.alloc(4),s=n[i.masterFingerprint];s&&r.writeUInt32BE(s,0);const o=n[i.keys].map((e=>a.CryptoHDKey.fromDataItem(e))),u=n[i.device],l=n[i.deviceId],d=n[i.version];return new c(r,o,u,l,d)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[614,{"../CryptoKeypath":603,"../RegistryItem":609,"../RegistryType":610,"../lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivationSchema=n.DerivationAlgorithm=n.Curve=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("../CryptoKeypath");var i,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(i||(i={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=n.Curve||(n.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=n.DerivationAlgorithm||(n.DerivationAlgorithm={}));class l extends a.RegistryItem{constructor(e,t=c.secp256k1,n=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=n,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[i.keyPath]=t,e[i.curve]=this.curve,e[i.algo]=this.algo,new s.DataItem(e)}}}n.KeyDerivationSchema=l,l.fromDataItem=e=>{const t=e.getData(),n=o.CryptoKeypath.fromDataItem(t[i.keyPath]),r=t[i.curve],a=t[i.algo];return new l(n,r,a)},l.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[6144,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SortOrder=n.FeeType=n.ChainId=n.BridgeFlag=void 0;n.SortOrder=function(e){return e[e.COST_ASC=0]="COST_ASC",e[e.ETA_ASC=1]="ETA_ASC",e}({}),n.BridgeFlag=function(e){return e.EXTENSION_CONFIG="extension-config",e.EXTENSION_SUPPORT="extension-support",e.NETWORK_SRC_ALLOWLIST="src-network-allowlist",e.NETWORK_DEST_ALLOWLIST="dest-network-allowlist",e}({});n.ChainId=function(e){return e[e.ETH=1]="ETH",e[e.OPTIMISM=10]="OPTIMISM",e[e.BSC=56]="BSC",e[e.POLYGON=137]="POLYGON",e[e.ZKSYNC=324]="ZKSYNC",e[e.BASE=8453]="BASE",e[e.ARBITRUM=42161]="ARBITRUM",e[e.AVALANCHE=43114]="AVALANCHE",e[e.LINEA=59144]="LINEA",e}({}),n.FeeType=function(e){return e.METABRIDGE="metabridge",e.REFUEL="refuel",e}({})}}},{package:"$root$",file:"ui/pages/bridge/types.ts"}],[6145,{"../../../../shared/constants/common":4979,"../../../../shared/lib/transactions-controller-utils":5021,"../../../../shared/modules/Numeric":5023,"../../../../shared/modules/conversion.utils":5030,"../../../helpers/utils/confirm-tx.util":6007,"../../../hooks/useCurrencyDisplay":6058,"bignumber.js":3341,"ethereumjs-util":3608},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidQuoteRequest=n.isNativeAddress=n.formatTokenAmount=n.formatFiatAmount=n.formatEtaInMinutes=n.calcTotalGasFee=n.calcToAmount=n.calcSwapRate=n.calcSentAmount=n.calcRelayerFee=n.calcCost=n.calcAdjustedReturn=void 0;var r=e("ethereumjs-util"),a=e("bignumber.js"),s=e("../../../../shared/lib/transactions-controller-utils"),o=e("../../../../shared/modules/conversion.utils"),i=e("../../../helpers/utils/confirm-tx.util"),c=e("../../../../shared/modules/Numeric"),u=e("../../../../shared/constants/common"),l=e("../../../hooks/useCurrencyDisplay");const d=e=>e===(0,r.zeroAddress)();n.isNativeAddress=d;n.isValidQuoteRequest=(e,t=!0)=>{const n=["srcTokenAddress","destTokenAddress"];t&&n.push("srcTokenAmount");return n.every((t=>t in e&&"string"==typeof e[t]&&e[t]!==undefined&&""!==e[t]&&null!==e[t]))&&["srcChainId","destChainId","slippage"].every((t=>t in e&&"number"==typeof e[t]&&e[t]!==undefined&&!isNaN(Number(e[t]))&&null!==e[t]))};n.calcToAmount=({destTokenAmount:e,destAsset:t},n)=>{const r=(0,s.calcTokenAmount)(e,t.decimals);return{amount:r,fiat:n?r.mul(n.toString()):null}};n.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:n},r)=>{const o=(0,s.calcTokenAmount)(new a.BigNumber(e).plus(n.metabridge.amount),t.decimals);return{amount:o,fiat:r?o.mul(r.toString()):null}};n.calcRelayerFee=(e,t)=>{const{quote:{srcAsset:n,srcTokenAmount:r,feeData:i},trade:c}=e,u=(0,s.calcTokenAmount)(new a.BigNumber((0,o.hexToDecimal)(c.value)).minus(d(n.address)?new a.BigNumber(r).plus(i.metabridge.amount):0),18);return{amount:u,fiat:t?u.mul(t.toString()):null}};n.calcTotalGasFee=(e,t,n,r)=>{var s,i;const{approval:l,trade:d,l1GasFeesInHexWei:p}=e,m=(0,o.sumDecimals)((null===(s=d.gasLimit)||void 0===s?void 0:s.toString())??"0",(null==l||null===(i=l.gasLimit)||void 0===i?void 0:i.toString())??"0"),T=(0,o.sumDecimals)(t,n),g=c.Numeric.from(p??"0",16,u.EtherDenomination.WEI).toDenomination(u.EtherDenomination.GWEI),f=m.times(T).add(g),h=new a.BigNumber(f.shiftedBy(9).toString()),E=r?h.times(r.toString()):null;return{amount:h,fiat:E}};n.calcAdjustedReturn=(e,t)=>({fiat:e&&t?e.minus(t):null});n.calcSwapRate=(e,t)=>t.div(e);n.calcCost=(e,t)=>({fiat:e&&t?t.minus(e):null});n.formatEtaInMinutes=e=>(e/60).toFixed();n.formatTokenAmount=(e,t,n=2)=>`${e.toFixed(n)} ${t}`;n.formatFiatAmount=(e,t,n=l.DEFAULT_PRECISION)=>{if(!e)return undefined;if(0===n){if(e.lt(.01))return`<${(0,i.formatCurrency)("0",t,n)}`;if(e.lt(1))return(0,i.formatCurrency)(e.toString(),t,2)}return(0,i.formatCurrency)(e.toString(),t,n)}}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[6146,{"../../../../shared/lib/swaps-utils":5017,"../types":6144,"@metamask/controller-utils":1375,"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateResponse=n.isValidNumber=n.TX_DATA_VALIDATORS=n.TOKEN_VALIDATORS=n.QUOTE_VALIDATORS=n.QUOTE_RESPONSE_VALIDATORS=n.FEE_DATA_VALIDATORS=n.FEATURE_FLAG_VALIDATORS=void 0;var r=e("@metamask/utils"),a=e("@metamask/controller-utils"),s=e("../../../../shared/lib/swaps-utils"),o=e("../types");n.validateResponse=(e,t,n)=>(0,s.validateData)(e,t,n);const i=e=>"number"==typeof e;n.isValidNumber=i;const c=e=>"object"==typeof e&&null!==e,u=e=>"string"==typeof e&&e.length>0,l=e=>u(e)&&(0,a.isValidHexAddress)(e,{allowNonPrefixed:!1});n.FEATURE_FLAG_VALIDATORS=[{property:o.BridgeFlag.EXTENSION_CONFIG,type:"object",validator:e=>c(e)&&"refreshRate"in e&&i(e.refreshRate)&&"maxRefreshCount"in e&&i(e.maxRefreshCount)},{property:o.BridgeFlag.EXTENSION_SUPPORT,type:"boolean"},{property:o.BridgeFlag.NETWORK_SRC_ALLOWLIST,type:"object",validator:e=>c(e)&&Object.values(e).every(i)},{property:o.BridgeFlag.NETWORK_DEST_ALLOWLIST,type:"object",validator:e=>c(e)&&Object.values(e).every(i)}],n.TOKEN_VALIDATORS=[{property:"decimals",type:"number"},{property:"address",type:"string",validator:l},{property:"symbol",type:"string",validator:e=>u(e)&&e.length<=12}],n.QUOTE_RESPONSE_VALIDATORS=[{property:"quote",type:"object",validator:c},{property:"estimatedProcessingTimeInSeconds",type:"number"},{property:"approval",type:"object|undefined",validator:e=>e===undefined||c(e)},{property:"trade",type:"object",validator:c}],n.QUOTE_VALIDATORS=[{property:"requestId",type:"string"},{property:"srcTokenAmount",type:"string"},{property:"destTokenAmount",type:"string"},{property:"bridgeId",type:"string"},{property:"bridges",type:"object",validator:c},{property:"srcChainId",type:"number"},{property:"destChainId",type:"number"},{property:"srcAsset",type:"object",validator:c},{property:"destAsset",type:"object",validator:c},{property:"feeData",type:"object",validator:c}],n.FEE_DATA_VALIDATORS=[{property:"amount",type:"string",validator:s.truthyDigitString},{property:"asset",type:"object",validator:c}],n.TX_DATA_VALIDATORS=[{property:"chainId",type:"number"},{property:"value",type:"string",validator:r.isStrictHexString},{property:"gasLimit",type:"number"},{property:"to",type:"string",validator:l},{property:"from",type:"string",validator:l},{property:"data",type:"string",validator:r.isStrictHexString}]}}},{package:"$root$",file:"ui/pages/bridge/utils/validators.ts"}],[615,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./DerivationSchema":614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivation=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./DerivationSchema");var i;!function(e){e[e.schemas=1]="schemas"}(i||(i={}));class c extends a.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[i.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}n.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[i.schemas].map((e=>o.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[616,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./KeyDerivation":615},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QRHardwareCall=n.QRHardwareCallType=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./KeyDerivation");var i,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(i||(i={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=n.QRHardwareCallType||(n.QRHardwareCallType={}));class u extends a.RegistryItem{constructor(e,t,n){super(),this.type=e,this.params=t,this.origin=n,this.getRegistryType=()=>r.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[i.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[i.params]=t,this.origin&&(e[i.origin]=this.origin),new s.DataItem(e)}}}n.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),n=t[i.type]||c.KeyDerivation;let r;if(n===c.KeyDerivation)r=o.KeyDerivation.fromDataItem(t[i.params]);const a=t[i.origin];return new u(n,r,a)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[617,{"./Bytes":598,"./CryptoAccount":599,"./CryptoCoinInfo":600,"./CryptoECKey":601,"./CryptoHDKey":602,"./CryptoKeypath":603,"./CryptoOutput":604,"./CryptoPSBT":605,"./Decoder":606,"./MultiKey":607,"./PathComponent":608,"./RegistryItem":609,"./RegistryType":610,"./ScriptExpression":611,"./errors":612,"./extended/CryptoMultiAccounts":613,"./extended/DerivationSchema":614,"./extended/KeyDerivation":615,"./extended/QRHardwareCall":616,"./lib":620,"./patchCBOR":621,"./types":622,"./utils":623,"buffer/":3399,tslib:4858},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return a.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const i=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return i.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return i.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const l=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return l.CryptoOutput}});const d=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const p=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return p.CryptoAccount}});const m=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return m.URRegistryDecoder}});const T=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return T.MultiKey}});const g=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return g.ScriptExpressions}});const f=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return f.PathComponent}});const h=e("./RegistryItem"),E=e("./RegistryType"),S=e("./lib");var _=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return _.DataItem}});const y=e("./utils"),A=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return A.CryptoMultiAccounts}});const I={URRegistryDecoder:m.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:p.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:A.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:i.CryptoCoinInfo,CryptoCoinInfoType:i.Type,CryptoCoinInfoNetwork:i.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:l.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:T.MultiKey,ScriptExpressions:g.ScriptExpressions,PathComponent:f.PathComponent},O={addReader:S.addReader,addSemanticDecode:S.addSemanticDecode,addSemanticEncode:S.addSemanticEncode,addWriter:S.addWriter,patchTags:y.patchTags},N={RegistryTypes:E.RegistryTypes,RegistryItem:h.RegistryItem,RegistryType:E.RegistryType,decodeToDataItem:S.decodeToDataItem,encodeDataItem:S.encodeDataItem,cbor:O};n.extend=N,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,r.__exportStar)(e("./extended/QRHardwareCall"),n),(0,r.__exportStar)(e("./extended/KeyDerivation"),n),(0,r.__exportStar)(e("./extended/DerivationSchema"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=I}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[618,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[619,{"./DataItem":618,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var s=n.charCodeAt(a).toString(16);s.length<2&&(s="0"+s),r+=s}return new e(r)};var r=[],a={},s=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void s("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var l=new Error;function d(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)r[s]=d(e)}else for(var o;(o=d(e))!==l;)r.push(o);if(5===t.type){var i={};for(s=0;s<r.length;s+=2)i[r[s]]=r[s+1];return i}return r;case 6:var u=c(t,e),p=a[u];r=d(e);return p?p(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return l;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function p(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),p(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)p(e[n],t)}else{var s=Object.keys(e);u(5,s.length,t);for(n=0;n<s.length;n++){const r=parseInt(s[n]);isNaN(r)?(p(s[n],t),p(e[s[n]],t)):(p(r,t),p(e[s[n]],t))}}}}var m=[],T=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?T.push((function(n){if(e===n)return t(n)})):T.push(e)},addReader:function(e,t){"string"==typeof e?m.push((function(n,r){if(e===r)return t(n,r)})):m.push(e)},encode:function(e,t){for(var n=0;n<T.length;n++){var r=(0,T[n])(t);if(r)return p(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<T.length;n++){var r=(0,T[n])(t);if(r)return e.getTag()!==undefined?(p(e,r),r.result()):(p(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<m.length;n++){var r=(0,m[n])(e,t);if(r)return d(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<m.length;r++){var a=(0,m[r])(e,n);if(a){const e=d(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function f(e){this.buffer=e,this.pos=0}function h(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function E(e){this.hex=e,this.pos=0}function S(e){this.$hex="",this.finalFormat=e||"hex"}return f.prototype=Object.create(o.prototype),f.prototype.peekByte=function(){return this.buffer[this.pos]},f.prototype.readByte=function(){return this.buffer[this.pos++]},f.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},f.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},f.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},f.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},f.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},h.prototype=Object.create(i.prototype),h.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},h.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},h.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},h.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},h.prototype.canWriteBinary=function(e){return e instanceof n},h.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},h.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},h.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(g.addReader((function(e,t){return n.isBuffer(e)?new f(e):"hex"===t||"base64"===t?new f(n.from(e,t)):void 0})),g.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new h(e):void 0:new h}))),E.prototype=Object.create(o.prototype),E.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},E.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},E.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},S.prototype=Object.create(i.prototype),S.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},S.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},S.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},S.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},S.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},g.addReader((function(t,n){return t instanceof e||t.$hex?new E(t.$hex):"hex"===n?new E(t):void 0})),g.addWriter((function(e){if("hex"===e)return new S})),g}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[620,{"./DataItem":618,"./cbor-sync":619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[621,{"./RegistryType":610,"./ScriptExpression":611,"./utils":623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),s=e("./ScriptExpression"),o=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(o.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[622,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[623,{"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[6410,{"../../../components/component-library":5536,"../../../helpers/constants/design-system":5980,"./util":6433,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultTemplate=void 0;var r=e("@metamask/controller-utils"),a=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),o=e("./util");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,l=new WeakSet;function d(e,t){const{error:n,header:i,icon:l,message:d,title:p}=e,m=(g=this,(T=u).get(c(T,g))===r.ApprovalType.ResultSuccess);var T,g;return[...(0,o.processHeader)(i)??[],{key:"container",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,height:s.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,height:s.BlockSize.Full,style:{alignSelf:s.AlignItems.stretch}},children:[null===l?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:l??(m?a.IconName.Confirmation:a.IconName.Warning),size:a.IconSize.Xl,iconProps:{size:a.IconSize.Xl},color:m?s.IconColor.successDefault:s.IconColor.errorDefault,backgroundColor:m?s.BackgroundColor.successMuted:s.BackgroundColor.errorMuted},children:"Icon"},null===p?undefined:{key:"title",element:"Typography",props:{variant:s.TypographyVariant.H3,fontWeight:s.FontWeight.Bold},children:p??t(m?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:s.AlignItems.center,textAlign:s.TextAlign.Center,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},children:m?(0,o.processString)(d,t("resultPageSuccessDefaultMessage")):(0,o.processError)(n,t("resultPageErrorDefaultMessage"))}]}]}]}n.ResultTemplate=class{constructor(e){var t,n;i(t=this,n=l),n.add(t),function(e,t,n){i(e,t),t.set(e,n)}(this,u,void 0),function(e,t,n){e.set(c(e,t),n)}(u,this,e)}getValues(e,t,n){return{content:c(l,this,d).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}],[6419,{"../../../../../shared/constants/network":4993,"../../../../../shared/modules/rpc.utils":5044,"../../../../helpers/constants/design-system":5980,"../../../../helpers/constants/routes":5986,"../../../../helpers/constants/zendesk-url":5993,"../../utils/confirm":6499,"@metamask/network-controller":1887,"@metamask/rpc-errors":2141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=e("@metamask/rpc-errors"),s=e("@metamask/network-controller"),o=e("../../../../../shared/constants/network"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../helpers/constants/routes"),u=(r=e("../../../../helpers/constants/zendesk-url"))&&r.__esModule?r:{default:r},l=e("../../../../../shared/modules/rpc.utils"),d=e("../../utils/confirm");const p={id:"UNRECOGNIZED_CHAIN",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},m={id:"SAFE_CHAIN_LIST_PROVIDER_ERROR",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorGettingSafeChainList"}}}},T={id:"MISMATCHED_CHAIN_RECOMMENDATION",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:u.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},g={id:"DEPRECATED_CHAIN_ALERT",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"deprecatedNetwork"}}}},f={id:"MISMATCHED_NETWORK_NAME",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},h={id:"MISMATCHED_NETWORK_SYMBOL",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},E={id:"MISMATCHED_NETWORK_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}},S={id:"MISMATCHED_NETWORK_RPC_CHAIN_ID",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcChainId"}}}},_={id:"ERROR_CONNECTING_TO_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorWhileConnectingToRPC"}}}};const y={getAlerts:async function(e,t){const n=[];if("metamask"===e.origin&&Boolean(t.matchedChain))return[];if(t.matchedChain){var r,a,s,i;(null===(r=t.matchedChain.name)||void 0===r?void 0:r.toLowerCase())!==e.requestData.chainName.toLowerCase()&&n.push(f),(null===(a=t.matchedChain.nativeCurrency)||void 0===a||null===(a=a.symbol)||void 0===a?void 0:a.toLowerCase())!==(null===(s=e.requestData.ticker)||void 0===s?void 0:s.toLowerCase())&&n.push(h);const{origin:c}=new URL(e.requestData.rpcUrl);null!==(i=t.matchedChain.rpc)&&void 0!==i&&i.map((e=>new URL(e).origin)).includes(c)||n.push(E),o.DEPRECATED_NETWORKS.includes(e.requestData.chainId)&&n.push(g)}return!t.matchedChain&&t.useSafeChainsListValidation&&(t.providerError?n.push(m):n.push(p)),n.length&&n.push(T),n},getValues:function(e,t,n,r,p){var m;const T="metamask"===e.origin,g=e.requestData.rpcUrl;let f,h;return f=T?t("wantToAddThisNetwork"):p.existingNetworkConfiguration?t("updateNetworkConfirmationTitle",[p.existingNetworkConfiguration.name]):t("addNetworkConfirmationTitle",[e.requestData.chainName]),h=p.existingNetworkConfiguration?t("updateEthereumChainConfirmationDescription"):t("multichainAddEthereumChainConfirmationDescription"),{content:[{element:"Typography",key:"title",children:f,props:{variant:i.TypographyVariant.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:h,props:{variant:i.TypographyVariant.H6,align:"center",boxProps:{margin:T?[0,8,4]:[0,0,4]}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("currencySymbol")]:t("currencySymbolDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("networkName")]:t("networkNameDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},warnings:{[t("networkURL")]:(0,d.isValidASCIIURL)(g)?undefined:t("networkUrlErrorWarning",[(0,d.toPunycodeURL)(g)]),[t("currencySymbol")]:p.currencySymbolWarning},dictionary:{[t("currencySymbol")]:e.requestData.ticker,[t("networkURL")]:null!==(m=g.toLowerCase())&&void 0!==m&&m.includes(`/v3/${o.infuraProjectId}`)?g.replace(`/v3/${o.infuraProjectId}`,"").toLowerCase():g.toLowerCase(),[t("chainId")]:parseInt(e.requestData.chainId,16),[t("networkName")]:e.requestData.chainName,[t("blockExplorerUrl")]:e.requestData.rpcPrefs.blockExplorerUrl},prefaceKeys:[t("currencySymbol"),t("networkURL")]}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"watchOutMessage",variables:[{element:"a",children:t("securityMessageLinkForNetworks"),key:"securityMessageLinkForNetworks",props:{href:u.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:i.TypographyVariant.H6,boxProps:{margin:T?[0,8]:0,display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center}}}],cancelText:t("cancel"),submitText:t("approveButtonText"),loadingText:t("addingCustomNetwork"),onSubmit:async()=>{let t;try{t=await(0,l.jsonRpcRequest)(g,"eth_chainId")}catch(e){return console.error(`Request for method 'eth_chainId on ${g} failed`),[_]}if(e.requestData.chainId!==t)return console.error(`Chain ID returned by RPC URL ${g} does not match ${t}`),[S];if(await n.resolvePendingApproval(e.id,e.requestData),T){const t=e.requestData.rpcPrefs.blockExplorerUrl,a=await n.addNetwork({chainId:e.requestData.chainId,name:e.requestData.chainName,nativeCurrency:e.requestData.ticker,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,defaultRpcEndpointIndex:0,rpcEndpoints:[{url:e.requestData.rpcUrl,type:s.RpcEndpointType.Custom}]});await n.setNewNetworkAdded({networkConfigurationId:a.rpcEndpoints[0].networkClientId,nickname:e.requestData.chainName});document.location.hash.replace("#","/")===c.ONBOARDING_PRIVACY_SETTINGS_ROUTE||r.push(c.DEFAULT_ROUTE)}return[]},onCancel:()=>n.rejectPendingApproval(e.id,a.providerErrors.userRejectedRequest().serialize()),networkDisplay:!T}},getState:function(e){return 1===parseInt(e.requestData.chainId,16)?{useWarningModal:!0}:{}}};n.default=y}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/add-ethereum-chain.js"}],[6420,{"../../../../../shared/constants/metametrics":4989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c,requestData:u}=e,{snapSuggestedAccountName:l}=u,{trackEvent:d}=o,p=e=>{d({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"CreateNamedSnapAccount",key:"create-named-snap-account",props:{onActionComplete:async t=>{t.success?(p(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,t)):(p(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1))},snapSuggestedAccountName:l}}],loadingText:t("addingAccount"),hideSubmitButton:!0,onLoad:()=>p(r.MetaMetricsEventName.AddSnapAccountViewed)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-named-snap-account.js"}],[6421,{"../../../../../shared/constants/metametrics":4989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{trackEvent:u}=o,l=e=>{u({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},d=()=>{l(r.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:i,snapName:c,onCancel:d}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>l(r.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{l(r.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:d}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[6422,{"../ResultTemplate":6410,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultError),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[6423,{"../../../../../shared/constants/app":4977,"../../../../store/actions":6744,"./add-ethereum-chain":6419,"./create-named-snap-account":6420,"./create-snap-account":6421,"./error":6422,"./remove-snap-account":6424,"./smart-transaction-status-page":6425,"./snap-account-redirect":6426,"./snaps/snap-alert/snap-alert":6427,"./snaps/snap-confirmation/snap-confirmation":6428,"./snaps/snap-default/snap-default":6429,"./snaps/snap-prompt/snap-prompt":6430,"./success":6431,"./switch-ethereum-chain":6432,"@metamask/controller-utils":1375,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=n.PRIORITY_APPROVAL_TEMPLATE_TYPES=void 0,n.getTemplateAlerts=async function(e,t){var n;const r=null===(n=y[e.type])||void 0===n?void 0:n.getAlerts,a=r?await r(e,t):[];if(!Array.isArray(a))throw new Error(`Template alerts must be an array, received: ${a}`);if(a.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${a}`);return a},n.getTemplateState=async function(e){var t;const n=(null===(t=y[e.type])||void 0===t?void 0:t.getState)??I,r=await n(e);if("object"!=typeof r||Array.isArray(r))throw new Error(`Template state must be an object, received: ${r}`);if(null===r||r===undefined)return{};return r},n.getTemplateValues=function(e,t,n,a,o,i){var c;const u=null===(c=y[e.type])||void 0===c?void 0:c.getValues;if(!u)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const l=function(e){return{rejectPendingApproval:(...t)=>e((0,s.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,s.resolvePendingApproval)(...t)),addNetwork:(...t)=>e((0,s.addNetwork)(...t)),setNewNetworkAdded:(...t)=>e((0,s.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,s.deleteInterface)(...t))}}(n),d=u(e,t,l,a,o,i),p=(0,r.omit)(d,A),m=(0,r.pick)(d,A);if(p.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(p)}`);return m};var r=e("lodash"),a=e("@metamask/controller-utils"),s=e("../../../../store/actions"),o=e("../../../../../shared/constants/app"),i=_(e("./smart-transaction-status-page")),c=_(e("./create-snap-account")),u=_(e("./remove-snap-account")),l=_(e("./snap-account-redirect")),d=_(e("./create-named-snap-account")),p=_(e("./add-ethereum-chain")),m=_(e("./switch-ethereum-chain")),T=_(e("./success")),g=_(e("./error")),f=_(e("./snaps/snap-alert/snap-alert")),h=_(e("./snaps/snap-confirmation/snap-confirmation")),E=_(e("./snaps/snap-prompt/snap-prompt")),S=_(e("./snaps/snap-default/snap-default"));function _(e){return e&&e.__esModule?e:{default:e}}n.PRIORITY_APPROVAL_TEMPLATE_TYPES=[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage];const y={[a.ApprovalType.AddEthereumChain]:p.default,[a.ApprovalType.SwitchEthereumChain]:m.default,[a.ApprovalType.ResultSuccess]:T.default,[a.ApprovalType.ResultError]:g.default,[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:i.default,[a.ApprovalType.SnapDialogAlert]:f.default,[a.ApprovalType.SnapDialogConfirmation]:h.default,[a.ApprovalType.SnapDialogPrompt]:E.default,[a.ApprovalType.SnapDialogDefault]:S.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:u.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount]:d.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:l.default},A=(n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(y),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function I(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[6424,{"../../../../../shared/constants/metametrics":4989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{publicAddress:u}=e.requestData,{trackEvent:l}=o,d=e=>{l({event:e,category:r.MetaMetricsEventCategory.Accounts,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},p=()=>{d(r.MetaMetricsEventName.RemoveSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:i,snapName:c,publicAddress:u,onCancel:p}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>d(r.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{d(r.MetaMetricsEventName.RemoveSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:p}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[6425,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n,r){const{id:a,requestState:s}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:s,onCloseExtension:()=>{n.resolvePendingApproval(a,!0)},onViewActivity:()=>{n.resolvePendingApproval(a,!0)}}}],hideSubmitButton:!0}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[6426,{"../../../../../shared/constants/metametrics":4989},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../../../shared/constants/metametrics");const a={getValues:function(e,t,n,a,s,o){const{origin:i,snapName:c}=e,{url:u,message:l,isBlockedUrl:d}=e.requestData,{trackEvent:p}=o,m=e=>{p({event:e,category:r.MetaMetricsEventCategory.Transactions,properties:{account_type:r.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},T=r=>u!==undefined&&null!==u&&u.length>0&&!1===d?{submitText:t("goToSite"),onSubmit:()=>{m(r),n.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:u,message:l,snapId:i,snapName:c,isBlockedUrl:d,...T(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{m(r.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),n.resolvePendingApproval(e.id,!1)},...T(r.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[6427,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[6428,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{n.resolvePendingApproval(e.id,!0),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,!1),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[6429,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-default/snap-default.js"}],[6430,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={getValues:function(e,t,n){const{requestData:{id:r}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{n.resolvePendingApproval(e.id,t),n.deleteInterface(r)},onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(r)}}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[6431,{"../ResultTemplate":6410,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils");const a=new(e("../ResultTemplate").ResultTemplate)(r.ApprovalType.ResultSuccess),s={getValues:a.getValues.bind(a)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[6432,{"../../../../helpers/constants/design-system":5980,"@metamask/rpc-errors":2141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/rpc-errors"),a=e("../../../../helpers/constants/design-system");const s={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const o={getAlerts:async function(e,t){const n=[];return t.unapprovedTxsCount>0&&n.push(s),n},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TypographyVariant.H7,color:a.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>n.rejectPendingApproval(e.id,r.providerErrors.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[6433,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(r):{key:e.key,element:e.name,props:e.properties,children:r(e.children)}}Object.defineProperty(n,"__esModule",{value:!0}),n.processError=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:n}}},n.processHeader=function(e){return r(e)},n.processString=function(e,t){const n=r(e)||t;if("string"!=typeof n)return n;return a=n,function(e,t,n){let r=0,a=0;const s=Array.from(e.matchAll(t)),o=[];for(const t of s){const s=e.substring(r,t.index);s.length&&o.push(s);const i=n(t[1],a);o.push(i),r=t.index+t[0].length,a+=1}const i=e.substring(r);return i.length&&o.push(i),o}(a,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var a}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[6434,{"../../../../shared/constants/network":4993},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedSignSignaturePrimaryTypes=n.TYPED_SIGNATURE_VERSIONS=n.SPENDING_CAP_UNLIMITED_MSG=n.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var r=e("../../../../shared/constants/network");n.IGNORE_GAS_LIMIT_CHAIN_IDS=[r.CHAINLIST_CHAIN_IDS_MAP.MANTLE],n.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"},n.SPENDING_CAP_UNLIMITED_MSG="UNLIMITED MESSAGE",n.TypedSignSignaturePrimaryTypes={PERMIT:"Permit",ORDER:"Order"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[6491,{"../../../../shared/modules/selectors/util":5051,"../../../selectors/approvals":6725,"../../../selectors/selectors":6737,"@metamask/controller-utils":1375,reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsRedesignedConfirmationsDeveloperEnabled=function(e){return(0,o.getPreferences)(e).isRedesignedConfirmationsDeveloperEnabled},n.oldestPendingConfirmationSelector=void 0,n.pendingConfirmationsSelector=function(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>c.includes(e)))},n.pendingConfirmationsSortedSelector=u;var r=e("@metamask/controller-utils"),a=e("reselect"),s=e("../../../selectors/approvals"),o=e("../../../selectors/selectors"),i=e("../../../../shared/modules/selectors/util");const c=[r.ApprovalType.PersonalSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.Transaction];function u(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>c.includes(e))).sort(((e,t)=>e.time-t.time))}const l=(0,a.createSelector)(u,(e=>e[0]));n.oldestPendingConfirmationSelector=(0,i.createDeepEqualSelector)(l,(e=>e))}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[6496,{"../../../../shared/constants/common":4979,"../../../../shared/constants/gas":4984,"../../../../shared/modules/Numeric":5023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.SWAPS_QUOTES_ERROR=n.SWAPS_NO_QUOTES=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NO_RESOLUTION_FOR_DOMAIN=n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.FLOAT_TOKENS_ERROR=n.ENS_UNKNOWN_ERROR=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=void 0;var r=e("../../../../shared/constants/gas"),a=e("../../../../shared/modules/Numeric"),s=e("../../../../shared/constants/common");const o=n.MIN_GAS_PRICE_DEC="0",i=n.MIN_GAS_PRICE_HEX=parseInt(o,10).toString(16);n.MIN_GAS_LIMIT_DEC=new a.Numeric("21000",10),n.MAX_GAS_LIMIT_DEC="7920027",n.HIGH_FEE_WARNING_MULTIPLIER=1.5,n.MIN_GAS_PRICE_GWEI=new a.Numeric(i,16,s.EtherDenomination.WEI).toDenomination(s.EtherDenomination.GWEI).round(1).toPrefixedHexString(),n.MIN_GAS_TOTAL=new a.Numeric(r.MIN_GAS_LIMIT_HEX,16).times(new a.Numeric(i,16,s.EtherDenomination.WEI)).toPrefixedHexString(),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",n.NEGATIVE_ETH_ERROR="negativeETH",n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",n.FLOAT_TOKENS_ERROR="floatAmountToken",n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",n.REQUIRED_ERROR="required",n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",n.CONTRACT_ADDRESS_ERROR="contractAddressError",n.CONFUSING_ENS_ERROR="confusingEnsDomain",n.ENS_UNKNOWN_ERROR="ensUnknownError",n.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",n.SWAPS_NO_QUOTES="swapQuotesNotAvailableErrorTitle",n.SWAPS_QUOTES_ERROR="swapFetchingQuotesErrorTitle",n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[6497,{"../../../../app/scripts/lib/util":134,"../../../../shared/constants/transaction":5007,"../../../../shared/modules/Numeric":5023,"./send.constants":6496,"@metamask/abi-utils":1262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=new o.Numeric(e,16),a=new o.Numeric(t,16).times(new o.Numeric(.9,10)).round(0),s=r.times(new o.Numeric(n,10)).round(0);if(r.greaterThanOrEqualTo(a))return e;if(s.lessThan(a))return s.toString();return a.toString()},n.ellipsify=function(e,t=6,n=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC1155TransferData=l,n.generateERC20TransferData=c,n.generateERC721TransferData=u,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case s.TokenStandard.ERC721:return u({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC1155:return l({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC20:default:return c({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a=undefined}){let s=new o.Numeric(e,16).add(new o.Numeric(r,16)),i=new o.Numeric(t,16);null!=a&&(s=s.applyConversionRate(n),i=i.applyConversionRate(n));return i.greaterThanOrEqualTo(s)},n.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const n=new o.Numeric(e,16);return new o.Numeric(t,10).greaterThanOrEqualTo(n)},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=new o.Numeric(e,16).shiftedBy(n);return new o.Numeric(t,16).greaterThanOrEqualTo(r)};var r=e("@metamask/abi-utils"),a=e("../../../../app/scripts/lib/util"),s=e("../../../../shared/constants/transaction"),o=e("../../../../shared/modules/Numeric"),i=e("./send.constants");function c({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?i.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","uint256"],[(0,a.addHexPrefix)(e),(0,a.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?i.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function l({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n,amount:s="1",data:o="0"}){return n?i.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,r.encode)(["address","address","uint256","uint256","bytes"],[(0,a.addHexPrefix)(t),(0,a.addHexPrefix)(e),BigInt(n),(0,a.addHexPrefix)(s),(0,a.addHexPrefix)(o)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[6499,{"../../../../shared/constants/signatures":5e3,"../../../../shared/modules/transaction.utils":5055,"../../../helpers/utils/util":6029,"../constants":6434,"@metamask/transaction-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toPunycodeURL=n.parseSanitizeTypedDataMessage=n.isValidASCIIURL=n.isSignatureTransactionType=n.isSIWESignatureRequest=n.isPermitSignatureRequest=n.isOrderSignatureRequest=n.SIGNATURE_TRANSACTION_TYPES=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../../shared/constants/signatures"),s=e("../../../../shared/modules/transaction.utils"),o=e("../../../helpers/utils/util"),i=e("../constants");const c=n.SIGNATURE_TRANSACTION_TYPES=[r.TransactionType.personalSign,r.TransactionType.signTypedData],u=e=>e&&c.includes(e.type);n.isSignatureTransactionType=u;n.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:n,types:r}=(0,s.parseTypedDataMessage)(e);return{sanitizedMessage:(0,o.sanitizeMessage)(t,n,r),primaryType:n}};n.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};n.isOrderSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,s.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return a.PRIMARY_TYPES_ORDER.includes(r)};n.isPermitSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:r}=(0,s.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return a.PRIMARY_TYPES_PERMIT.includes(r)};n.isValidASCIIURL=e=>{try{return null==e?void 0:e.includes(new URL(e).host)}catch(e){return console.error(e),!1}};n.toPunycodeURL=e=>{try{return new URL(e).href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}}}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[6714,{"../../../shared/constants/common":4979,"../../../shared/constants/network":4993,"../../../shared/constants/swaps":5003,"../../../shared/lib/fetch-with-cache":5012,"../../../shared/lib/swaps-utils":5017,"../../../shared/lib/transactions-controller-utils":5021,"../../../shared/modules/conversion.utils":5030,"../../../shared/modules/hexstring-utils":5036,"../../../shared/modules/swaps.utils":5054,"../../helpers/utils/confirm-tx.util":6007,"../../store/actions":6744,"bignumber.js":3341},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.TOKEN_VALIDATORS=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchAggregatorMetadata"}),r={};for(const e in n)(0,p.validateData)(y,n[e],t)&&(r[e]=n[e]);return r},n.fetchBlockedTokens=async function(e){const t=(0,p.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchBlockedTokens"})},n.fetchSwapsFeatureFlags=async function(){const e=s.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(I,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:s}=n;return{safeLow:r,average:a,fast:s}},n.fetchToken=async function(e,t){const n=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,r=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==r||null===(t=r[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f},functionName:"fetchTokens"});return[s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,p.validateData)(S,n,t,false)&&!((0,o.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,o.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=await O(e);return t.reduce(((e,t,n)=>({...e,[t.address]:{index:String(n)}})),{})},n.fetchTopAssetsList=O,n.formatSwapsValueForDisplay=v,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=R,n.getSwapsLivenessForNetwork=n.getSwap1559GasFeeEstimates=void 0,n.getTransaction1559GasFeeEstimates=D,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=void 0,n.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:n,conversionRate:r,currentCurrency:s,approveGas:i,tokenConversionRates:c,chainId:u,smartTransactionEstimatedGas:l,nativeCurrencySymbol:p,multiLayerL1ApprovalFeeTotal:T}){return Object.values(e).map((e=>{const{destinationAmount:g=0,sourceAmount:f=0,sourceTokenInfo:h,destinationTokenInfo:E,slippage:S,aggType:_,aggregator:y,gasEstimateWithRefund:A,averageGas:I,fee:O,trade:C,multiLayerL1TradeFeeTotal:w}=e;let D=null;null!==w&&null!==T?D=(0,m.sumHexes)(w||"0x0",T||"0x0"):null!==w&&(D=w);const k=(0,d.calcTokenAmount)(f,h.decimals).toString(10),P=(0,d.calcTokenAmount)(g,E.decimals).toPrecision(8);let b=null,M=null,F=null,L=null;({feeInFiat:b,feeInEth:M,rawNetworkFees:F,rawEthFee:L}=R({tradeGas:A||(0,m.decimalToHex)(I||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:n,currentCurrency:s,conversionRate:r,tradeValue:C.value,sourceSymbol:h.symbol,sourceAmount:f,chainId:u,multiLayerL1FeeTotal:D})),l&&({feeInFiat:b,feeInEth:M}=N({chainId:u,currentCurrency:s,conversionRate:r,nativeCurrencySymbol:p,feeInWeiDec:l.feeEstimate}));const U=new a.BigNumber(100-S).div(100),x=new a.BigNumber(P).times(U).toFixed(6),G=c[E.address],B=(0,o.isSwapsDefaultTokenSymbol)(E.symbol,u)?(0,d.calcTokenAmount)(g,E.decimals).minus(L,10):new a.BigNumber(G||0,10).times((0,d.calcTokenAmount)(g,E.decimals),10).minus(L,10);let H,W=S;return"AGG"===_?H="swapAggregator":"RFQ"===_?(H="swapRequestForQuotation",W=0):H="DEX"===_?"swapDecentralizedExchange":"CONTRACT"===_?"swapDirectContract":"swapUnknown",{aggId:y,amountReceiving:`${P} ${E.symbol}`,destinationTokenDecimals:E.decimals,destinationTokenSymbol:E.symbol,destinationTokenValue:v(P),destinationIconUrl:E.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:H,feeInEth:M,detailedNetworkFees:`${M} (${b})`,networkFees:b,quoteSource:_,rawNetworkFees:F,slippage:W,sourceTokenDecimals:h.decimals,sourceTokenSymbol:h.symbol,sourceTokenValue:k,sourceTokenIconUrl:h.iconUrl,ethValueOfTrade:B,minimumAmountReceived:x,metaMaskFee:O}}))},n.showRemainingTimeInMinAndSec=void 0;var r,a=e("bignumber.js"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/constants/common"),g=e("../../store/actions");const f=3e5,h="usd",E={"X-Client-Id":s.SWAPS_CLIENT_ID},S=n.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],_=S.slice(0,2),y=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],A=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),I=[{property:"SafeGasPrice",type:"string",validator:A},{property:"ProposeGasPrice",type:"string",validator:A},{property:"FastGasPrice",type:"string",validator:A}];async function O(e){const t=(0,p.getBaseApi)("topAssets",e);return(await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:f}})||[]).filter((e=>(0,p.validateData)(_,e,t)))}const N=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:o})=>{var i;const u=(0,m.decimalToHex)(o),l=(0,m.getValueFromWeiHex)({value:u,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let p;p=t===h?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:h,conversionRate:r,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${l} ${a||(null===(i=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:l}};function R({tradeGas:e,approveGas:t,gasPriceTrade:n,gasPriceApprove:r,currentCurrency:i,conversionRate:u,USDConversionRate:l,tradeValue:p,sourceSymbol:g,sourceAmount:f,chainId:E,nativeCurrencySymbol:S,multiLayerL1FeeTotal:_}){const y=(0,d.calcGasTotal)(e,n),A=t?(0,d.calcGasTotal)(t,r):"0x0",I=(0,m.sumHexes)(y,A,_||"0x0"),O=new a.BigNumber(p,16).minus((0,o.isSwapsDefaultTokenSymbol)(g,E)?f:0,10).toString(16),N=new a.BigNumber(I,16).plus(O,16).toString(16),R=(0,m.getValueFromWeiHex)({value:N,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),v=(0,m.getValueFromWeiHex)({value:N,toCurrency:i,conversionRate:u,numberOfDecimals:2}),C=(0,c.formatCurrency)(v,i);let w;w=i===h?v:(0,m.getValueFromWeiHex)({value:N,toCurrency:h,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:v,feeInUsd:w,rawEthFee:R,feeInFiat:C,feeInEth:`${R} ${S||s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[E].symbol}`,nonGasFee:O}}function v(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new a.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=N;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!s.ALLOWED_CONTRACT_ADDRESSES[t])&&s.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const C=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return s.ETHEREUM;case i.CHAIN_IDS.BSC:return s.BSC;case i.CHAIN_IDS.POLYGON:return s.POLYGON;case i.CHAIN_IDS.GOERLI:return s.GOERLI;case i.CHAIN_IDS.AVALANCHE:return s.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return s.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return s.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return s.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return s.LINEA;case i.CHAIN_IDS.BASE:return s.BASE;default:return""}};n.getNetworkNameByChainId=C;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=C(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let w=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case w.unavailable:case w.regularTxPending:return t("smartSwapsErrorUnavailable");case w.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function D(e,t,n){const r=await(0,g.estimateGasFee)({transactionParams:e,chainId:n}),a=null==r?void 0:r.estimates,{maxFeePerGas:s}=(null==a?void 0:a.high)??{},{maxPriorityFeePerGas:o}=(null==a?void 0:a.high)??{};return{baseAndPriorityFeePerGas:o?(0,m.addHexes)(t,o):undefined,maxFeePerGas:s,maxPriorityFeePerGas:o}}n.getSwap1559GasFeeEstimates=async(e,t,n,r)=>{const a=(0,m.decGWEIToHexWEI)(n);return{tradeGasFeeEstimates:await D(e,a,r),approveGasFeeEstimates:t?await D(t,a,r):undefined,estimatedBaseFee:a}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[6723,{"../../shared/lib/multichain":5015,"@metamask/keyring-api":1743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getInternalAccounts=o,n.getSelectedInternalAccount=i,n.hasCreatedBtcMainnetAccount=function(e){return c(e,a.isBtcMainnetAddress)},n.hasCreatedBtcTestnetAccount=function(e){return c(e,a.isBtcTestnetAddress)},n.isSelectedInternalAccountBtc=function(e){return s(i(e))},n.isSelectedInternalAccountEth=function(e){const t=i(e),{Eoa:n,Erc4337:a}=r.EthAccountType;return Boolean(t&&(t.type===n||t.type===a))};var r=e("@metamask/keyring-api"),a=e("../../shared/lib/multichain");function s(e){const{P2wpkh:t}=r.BtcAccountType;return Boolean(e&&e.type===t)}function o(e){return Object.values(e.metamask.internalAccounts.accounts)}function i(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function c(e,t){return o(e).some((e=>s(e)&&t(e.address)))}}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[6725,{"../../shared/modules/selectors/util":5051,reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalRequestsByType=void 0,n.getPendingApprovals=s,n.hasPendingApprovals=function(e,t,n){const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return r.some(n);return r.length>0},n.pendingApprovalsSortedSelector=function(e){return s(e).sort(((e,t)=>e.time-t.time))},n.selectPendingApproval=void 0;var r=e("reselect"),a=e("../../shared/modules/selectors/util");function s(e){return Object.values(e.metamask.pendingApprovals??[])}n.getApprovalRequestsByType=(e,t,n)=>{const r=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?r.filter(n):r};const o=(0,r.createSelector)(s,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));n.selectPendingApproval=(0,a.createDeepEqualSelector)(o,(e=>e))}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[6726,{"../../shared/constants/gas":4984,"../../shared/lib/transactions-controller-utils":5021,"../../shared/modules/conversion.utils":5030,"../../shared/modules/gas.utils":5035,"../../shared/modules/selectors/networks":5049,"../../shared/modules/string-utils":5053,"../ducks/metamask/metamask":5968,"../helpers/utils/confirm-tx.util":6007,"../helpers/utils/tx-helper":6028,"./custom-gas":6727,"./selectors":6737,"./transactions":6742,"@metamask/transaction-controller":2523,reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0,n.selectIsMaxValueEnabled=b,n.selectMaxValue=void 0,n.selectTransactionAvailableBalance=P,n.selectTransactionFeeById=k,n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.selectTransactionValue=void 0;var r,a=e("reselect"),s=e("@metamask/transaction-controller"),o=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),l=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/string-utils"),p=e("../../shared/lib/transactions-controller-utils"),m=e("../../shared/modules/conversion.utils"),T=e("../../shared/modules/selectors/networks"),g=e("./custom-gas"),f=e("./selectors"),h=e("./transactions");const E=e=>(0,h.getUnapprovedTransactions)(e),S=e=>e.metamask.unapprovedPersonalMsgs,_=e=>e.metamask.unapprovedDecryptMsgs,y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,A=e=>e.metamask.unapprovedTypedMessages;n.unconfirmedTransactionsListSelector=(0,a.createSelector)(E,S,_,y,A,T.getCurrentChainId,((e={},t={},n={},r={},a={},s)=>(0,o.default)(e,t,n,r,a,s)||[])),n.unconfirmedTransactionsHashSelector=(0,a.createSelector)(E,S,_,y,A,T.getCurrentChainId,((e={},t={},n={},r={},a={},s)=>({...Object.keys(e).reduce(((t,n)=>{const r={...t};return e[n].chainId===s&&(r[n]=e[n]),r}),{}),...t,...n,...r,...a}))),n.unconfirmedMessagesHashSelector=(0,a.createSelector)(S,_,y,A,((e={},t={},n={},r={})=>({...e,...t,...n,...r})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const I=e=>e.metamask.currentCurrency;n.currentCurrencySelector=I;const O=e=>{var t;return null===(t=e.metamask.currencyRates[(0,T.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=O;const N=e=>e.confirmTransaction.txData;n.txDataSelector=N;const R=(0,a.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),v=(0,a.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),C=(0,a.createSelector)(N,(e=>e&&e.txParams||{})),w=n.tokenAddressSelector=(0,a.createSelector)(C,(e=>e&&e.to)),D=(n.sendTokenTokenAmountAndToAddressSelector=(0,a.createSelector)(v,R,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,p.calcTokenAmount)(a,t).toFixed()),r=(0,i.roundExponential)(a)}return{toAddress:n,tokenAmount:r}})),n.contractExchangeRateSelector=(0,a.createSelector)((e=>(0,f.getTokenExchangeRates)(e)),w,((e,t)=>e[Object.keys(e).find((e=>(0,d.isEqualCaseInsensitive)(e,t)))])),function(e,t){var n,r,a,o;const d=I(e),p=O(e),T=(0,c.getNativeCurrency)(e),h=(0,c.getGasFeeEstimates)(e)||{},E=(0,c.getGasEstimateType)(e),S=(0,f.checkNetworkAndAccountSupports1559)(e),_={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0"};if(S){var y;const{gasPrice:e="0"}=h,n=h[t.userFeeLevel]||{};if((null===(y=t.txParams)||void 0===y?void 0:y.type)===s.TransactionEnvelopeType.legacy){var A;_.gasPrice=(null===(A=t.txParams)||void 0===A?void 0:A.gasPrice)??(0,m.decGWEIToHexWEI)(e)}else{var N,R,v,C;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;_.maxFeePerGas=null===(N=t.txParams)||void 0===N||!N.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?(0,m.decGWEIToHexWEI)(a||e):null===(R=t.txParams)||void 0===R?void 0:R.maxFeePerGas,_.maxPriorityFeePerGas=null===(v=t.txParams)||void 0===v||!v.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?r&&(0,m.decGWEIToHexWEI)(r)||_.maxFeePerGas:null===(C=t.txParams)||void 0===C?void 0:C.maxPriorityFeePerGas,_.baseFeePerGas=(0,m.decGWEIToHexWEI)(h.estimatedBaseFee)}}else switch(E){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:_.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:_.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??(0,m.decGWEIToHexWEI)(h.gasPrice);break;case u.GasEstimateTypes.legacy:_.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,g.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:w="0x0"}={}}=t,D=(0,m.getValueFromWeiHex)({value:w,fromCurrency:T,toCurrency:d,conversionRate:p,numberOfDecimals:2}),k=(0,m.getValueFromWeiHex)({value:w,fromCurrency:T,toCurrency:T,conversionRate:p,numberOfDecimals:6}),P=(0,l.getMinimumGasTotalInHexWei)(_),b=(0,l.getMaximumGasTotalInHexWei)(_),M=(0,i.getTransactionFee)({value:P,fromCurrency:T,toCurrency:d,numberOfDecimals:2,conversionRate:p}),F=(0,i.getTransactionFee)({value:b,fromCurrency:T,toCurrency:d,numberOfDecimals:2,conversionRate:p}),L=(0,i.getTransactionFee)({value:P,fromCurrency:T,toCurrency:T,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:w,fiatTransactionAmount:D,ethTransactionAmount:k,hexMinimumTransactionFee:P,fiatMinimumTransactionFee:M,hexMaximumTransactionFee:b,fiatMaximumTransactionFee:F,ethTransactionFee:L,fiatTransactionTotal:(0,i.addFiat)(M,D),ethTransactionTotal:(0,i.addEth)(L,k),hexTransactionTotal:(0,m.sumHexes)(w,P),gasEstimationObject:_}});function k(e,t){const n=(0,h.selectTransactionMetadata)(e,t);return D(e,n??{})}function P(e,t){var n;return null===(n=(0,f.getMetaMaskAccounts)(e)[(0,h.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function b(e,t){var n;return(null===(n=e.confirmTransaction.maxValueMode)||void 0===n?void 0:n[t])??!1}n.transactionFeeSelector=D;const M=n.selectMaxValue=(0,a.createSelector)(k,P,((e,t)=>t&&e.hexMaximumTransactionFee?(0,m.subtractHexes)(t,e.hexMaximumTransactionFee):undefined));n.selectTransactionValue=(0,a.createSelector)(b,M,h.selectTransactionMetadata,((e,t,n)=>{var r;return e?t:null==n||null===(r=n.txParams)||void 0===r?void 0:r.value}))}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[6727,{"../../app/scripts/lib/util":134,"../../shared/constants/common":4979,"../../shared/constants/gas":4984,"../../shared/lib/transactions-controller-utils":5021,"../../shared/modules/Numeric":5023,"../../shared/modules/conversion.utils":5030,"../ducks/metamask/metamask":5968,"../ducks/send":5973,"../helpers/utils/confirm-tx.util":6007,"../helpers/utils/formatters":6009,"./selectors":6737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=E,n.getAverageEstimate=f,n.getAveragePriceEstimateInHexWEI=function(e){return _(f(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===y(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=T,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=h,n.getFastPriceEstimateInHexWEI=function(e){return _(h(e)||"0x0")},n.getGasPriceInHexWei=_,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},n.getIsGasEstimatesFetched=y,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const o=E(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,a.decEthToConvertedCurrency)(o,n,r);return(0,s.formatCurrency)(i,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const a=E(new d.Numeric(e,10).toBase(16).toString(),t,n);return(0,o.formatETHFee)(a,r)},n.getSafeLowEstimate=g,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,i.getGasPrice)(e):T(e),r=h(e);if(!n||!r)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*r),10)},n.isCustomPriceSafe=function(e){const t=g(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=f(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=S;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),l=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e("./selectors");function T(e){return e.gas.customData.price}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function f(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function E(e,t,n=9){return new d.Numeric((0,l.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(n).toBase(10).toString()}function S(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function _(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,r.addHexPrefix)(S(t))}function y(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[6728,{"../../shared/constants/onboarding":4996,"../helpers/constants/routes":5986},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===r.FirstTimeFlowType.create)return a.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===r.FirstTimeFlowType.import)return a.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===r.FirstTimeFlowType.restore)return a.ONBOARDING_SECURE_YOUR_WALLET_ROUTE;return a.DEFAULT_ROUTE},n.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===r.FirstTimeFlowType.create)return a.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===r.FirstTimeFlowType.import)return a.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===r.FirstTimeFlowType.restore)return a.ONBOARDING_METAMETRICS;return a.DEFAULT_ROUTE},n.getOnboardingInitiator=void 0;var r=e("../../shared/constants/onboarding"),a=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[6731,{"../pages/confirmations/selectors/confirm":6491,"./accounts":6723,"./approvals":6725,"./confirm-transaction":6726,"./custom-gas":6727,"./first-time-flow":6728,"./metametrics":6733,"./permissions":6736,"./selectors":6737,"./transactions":6742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("../pages/confirmations/selectors/confirm");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./confirm-transaction");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=e("./custom-gas");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./permissions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=e("./transactions");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=e("./approvals");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))}));var p=e("./accounts");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[6733,{reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=n.getParticipateInMetaMetrics=n.getLatestMetricsEventTimestamp=n.getDataCollectionForMarketing=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;n.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;n.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);n.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const s=n.selectFragmentBySuccessEvent=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),o=n.selectFragmentById=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectMatchingFragment=(0,r.createSelector)(((e,t)=>s(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[6734,{"../../shared/constants/multichain/assets":4991,"../../shared/constants/multichain/networks":4992,"../../shared/constants/network":4993,"../../shared/modules/Numeric":5023,"../../shared/modules/selectors/networks":5049,"../ducks/metamask/metamask":5968,"./accounts":6723,"./selectors":6737,"@metamask/keyring-api":1743,"@metamask/utils":2620,"prop-types":4257,reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkPropType=n.InternalAccountPropType=void 0,n.getImageForChainId=function(e){const t=e;return p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[t]},n.getMultichainBalances=O,n.getMultichainCoinRates=void 0,n.getMultichainConversionRate=function(e,t){var n;const{ticker:r}=S(e,t);return E(e,t)?(0,l.getConversionRate)(e):null===(n=N(e))||void 0===n||null===(n=n[r.toLowerCase()])||void 0===n?void 0:n.conversionRate},n.getMultichainCurrencyImage=y,n.getMultichainCurrentChainId=function(e){const{chainId:t}=S(e);return t},n.getMultichainCurrentCurrency=function(e,t){const n=(0,g.getCurrentCurrency)(e);if(E(e,t))return n;return n&&"usd"===n.toLowerCase()?"usd":S(e,t).ticker},n.getMultichainCurrentNetwork=_,n.getMultichainDefaultToken=A,n.getMultichainIsBitcoin=function(e,t){const n=E(e,t),{symbol:r}=A(e,t);return!n&&"BTC"===r},n.getMultichainIsEvm=E,n.getMultichainIsMainnet=function(e,t){const n=t??(0,T.getSelectedInternalAccount)(e),r=S(e,n);if(E(e,t))return(0,g.getIsMainnet)(e);const a=u.MULTICHAIN_ACCOUNT_TYPE_TO_MAINNET[n.type];return r.chainId===a??!1},n.getMultichainIsTestnet=I,n.getMultichainNativeCurrency=function(e,t){return E(e,t)?(0,l.getNativeCurrency)(e):S(e,t).ticker},n.getMultichainNativeCurrencyImage=function(e,t){return y(e,t)},n.getMultichainNetwork=h,n.getMultichainNetworkProviders=f,n.getMultichainProviderConfig=S,n.getMultichainSelectedAccountCachedBalance=R,n.getMultichainSelectedAccountCachedBalanceIsZero=void 0,n.getMultichainShouldShowFiat=function(e,t){const n=t??(0,T.getSelectedInternalAccount)(e),r=I(e,n),a=!r;return E(e,n)?(0,g.getShouldShowFiat)(e):a||r&&(0,g.getShowFiatInTestnets)(e)},n.isChainIdMainnet=function(e){return e===p.CHAIN_IDS.MAINNET};var r,a=(r=e("prop-types"))&&r.__esModule?r:{default:r},s=e("@metamask/keyring-api"),o=e("@metamask/utils"),i=e("reselect"),c=e("../../shared/modules/Numeric"),u=e("../../shared/constants/multichain/networks"),l=e("../ducks/metamask/metamask"),d=e("../../shared/constants/multichain/assets"),p=e("../../shared/constants/network"),m=e("../../shared/modules/selectors/networks"),T=e("./accounts"),g=e("./selectors");n.MultichainNetworkPropType=a.default.shape({nickname:a.default.string.isRequired,isEvmNetwork:a.default.bool.isRequired,chainId:a.default.string,network:a.default.oneOfType([a.default.shape({rpcUrl:a.default.string,type:a.default.string.isRequired,chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string}),nickname:a.default.string,id:a.default.string}),a.default.shape({chainId:a.default.string.isRequired,ticker:a.default.string.isRequired,rpcPrefs:a.default.shape({blockExplorerUrl:a.default.string,imageUrl:a.default.string})})]).isRequired}),n.InternalAccountPropType=a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,type:a.default.string.isRequired});function f(e){return Object.values(u.MULTICHAIN_PROVIDER_CONFIGS)}function h(e,t){if(E(e,t)){var n;const t=(0,m.getCurrentChainId)(e),r=(0,m.getProviderConfig)(e),a=t;r.rpcPrefs={...r.rpcPrefs,imageUrl:p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[a]};return{nickname:(null===(n=(0,m.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??r.rpcUrl,isEvmNetwork:!0,chainId:`${o.KnownCaipNamespace.Eip155}:${Number(t)}`,network:r}}const r=t??(0,T.getSelectedInternalAccount)(e),a=f().find((e=>e.isAddressCompatible(r.address)));if(!a)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:a.nickname,isEvmNetwork:!1,chainId:null==a?void 0:a.chainId,network:a}}function E(e,t){const n=(0,l.getCompletedOnboarding)(e),r=t??(0,g.getMaybeSelectedInternalAccount)(e);return!n||!r||(0,s.isEvmAccountType)(r.type)}function S(e,t){return h(e,t).network}function _(e,t){return S(e,t)}function y(e,t){var n;if(E(e,t))return(0,g.getNativeCurrencyImage)(e);return null===(n=S(e,t).rpcPrefs)||void 0===n?void 0:n.imageUrl}function A(e,t){var n;return{symbol:E(e,t)?(null===(n=(0,m.getProviderConfig)(e))||void 0===n?void 0:n.ticker)??"ETH":S(e,t).ticker}}function I(e,t){const n=S(e,t??(0,T.getSelectedInternalAccount)(e));return E(e,t)?p.TEST_NETWORK_IDS.includes(n.chainId):n.chainId===u.MultichainNetworks.BITCOIN_TESTNET}function O(e){return e.metamask.balances}const N=e=>e.metamask.rates;function R(e){return E(e)?(0,g.getSelectedAccountCachedBalance)(e):function(e){var t,n;const r=O(e),a=(0,T.getSelectedInternalAccount)(e),s=_(e),o=null===(t=d.MULTICHAIN_NETWORK_TO_ASSET_TYPES[s.chainId])||void 0===t?void 0:t[0];return null==r||null===(n=r[a.id])||void 0===n||null===(n=n[o])||void 0===n?void 0:n.amount}(e)}n.getMultichainCoinRates=N;n.getMultichainSelectedAccountCachedBalanceIsZero=(0,i.createSelector)([E,R],((e,t)=>{const n=e?16:10;return new c.Numeric(t,n).isZero()}))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}],[6736,{"../../app/scripts/controllers/permissions":30,"../../shared/constants/permissions":4997,"../../shared/modules/selectors/util":5051,"./accounts":6723,"./approvals":6725,"./selectors":6737,"@metamask/controller-utils":1375,"@metamask/keyring-api":1743,"@metamask/snaps-rpc-methods":2303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,d.getSelectedInternalAccount)(e),n=g(e),{metamask:{internalAccounts:{accounts:r}}}=e,a=Object.keys(r).length;if(n.length&&n.length!==a&&-1===n.findIndex((e=>e===t.address)))return(0,l.getInternalAccount)(e,t.id);return undefined},n.getAddressConnectedSubjectMap=function(e){const t=E(e),n=h(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:s}=t[e]||{};n[e].forEach((t=>{const n=s||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForAllAddresses=void 0,n.getConnectedSubjectsForSelectedAddress=function(e){const t=(0,d.getSelectedInternalAccount)(e),n=p(e),r=E(e),a=[];return Object.entries(n).forEach((([e,n])=>{if(!S(n).includes(t.address))return;const{extensionId:s,name:o,iconUrl:i}=r[e]||{};a.push({extensionId:s,origin:e,name:o,iconUrl:i})})),a},n.getFirstPermissionRequest=function(e){const t=R(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=N(e))||void 0===t?void 0:t[0])??null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t;const{activeTab:n,metamask:{permissionHistory:r}}=e,a=null===(t=r[n.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,o=(0,l.getMetaMaskAccountsOrdered)(e),i=g(e);return o.filter((e=>i.includes(e.address))).filter((e=>(0,s.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getOrderedConnectedAccountsForConnectedDapp=function(e,t){var n;const{metamask:{permissionHistory:r}}=e,a=null===(n=r[t.origin])||void 0===n||null===(n=n.eth_accounts)||void 0===n?void 0:n.accounts,o=(0,l.getMetaMaskAccountsOrdered)(e),i=f(e,t);return o.filter((e=>i.includes(e.address))).filter((e=>(0,s.isEvmAccountType)(e.type))).map((e=>({...e,metadata:{...e.metadata,lastActive:null==a?void 0:a[e.address]}}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=p,n.getPermissionSubjectsDeepEqual=void 0,n.getPermissions=function(e,t){var n;return null===(n=p(e)[t])||void 0===n?void 0:n.permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r,s=(null===(t=a[n.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(s).map((e=>({key:e,value:s[e]})))},n.getPermissionsRequests=R,n.getPermittedAccounts=m,n.getPermittedAccountsByOrigin=h,n.getPermittedAccountsForCurrentTab=g,n.getPermittedAccountsForSelectedTab=f,n.getPermittedChains=T,n.getPermittedChainsByOrigin=function(e){const t=p(e);return Object.keys(t).reduce(((e,n)=>{const r=I(y(t[n]));return r.length>0&&(e[n]=r),e}),{})},n.getPermittedChainsForCurrentTab=function(e){return m(e,(0,l.getOriginOfCurrentTab)(e))},n.getPermittedChainsForSelectedTab=function(e,t){return T(e,t)},n.getRequestState=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.requestState},n.getRequestType=function(e,t){var n;return null===(n=e.metamask.pendingApprovals[t])||void 0===n?void 0:n.type},n.getSnapInstallOrUpdateRequests=N,n.getSubjectMetadata=E,n.getSubjectMetadataDeepEqual=void 0,n.getSubjectsWithPermission=function(e,t){const n=p(e),r=[];return Object.entries(n).forEach((([n,{permissions:a}])=>{if(a[t]){const{extensionId:t,name:a,iconUrl:s}=(0,l.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:a,iconUrl:s})}})),r},n.getSubjectsWithSnapPermission=function(e,t){const n=p(e);return Object.entries(n).filter((([e,{permissions:n}])=>{var r;return null===(r=n[a.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value[t]})).map((([t,n])=>{const{extensionId:r,name:a,iconUrl:s}=(0,l.getTargetSubjectMetadata)(e,t)||{};return{extensionId:r,origin:t,name:a,iconUrl:s}}))},n.isAccountConnectedToCurrentTab=void 0;var r=e("@metamask/controller-utils"),a=e("@metamask/snaps-rpc-methods"),s=e("@metamask/keyring-api"),o=e("../../shared/constants/permissions"),i=e("../../app/scripts/controllers/permissions"),c=e("../../shared/modules/selectors/util"),u=e("./approvals"),l=e("./selectors"),d=e("./accounts");n.getPermissionSubjectsDeepEqual=(0,c.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),n.getSubjectMetadataDeepEqual=(0,c.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function p(e){return e.metamask.subjects||{}}function m(e,t){return A(_(O(e,t)))}function T(e,t){return I(y(O(e,t)))}function g(e){return m(e,(0,l.getOriginOfCurrentTab)(e))}function f(e,t){return m(e,t)}function h(e){const t=p(e);return Object.keys(t).reduce(((e,n)=>{const r=S(t[n]);return r.length>0&&(e[n]=r),e}),{})}function E(e){return e.metamask.subjectMetadata}n.getConnectedSubjectsForAllAddresses=(0,c.createDeepEqualSelector)(p,E,((e,t)=>{const n={};return Object.entries(e).forEach((([e,r])=>{S(r).forEach((r=>{n[r]||(n[r]=[]);const a=t[e];n[r].push({origin:e,...a})}))})),n}));n.isAccountConnectedToCurrentTab=(0,c.createDeepEqualSelector)(g,((e,t)=>t),((e,t)=>e.some((e=>e===t))));function S(e){return A(_(e))}function _(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function y(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t[i.PermissionNames.permittedChains])||{}}function A(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function I(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictNetworkSwitching))}(e);return t&&Array.isArray(t.value)?t.value:[]}function O(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}function N(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function R(e){var t;return null===(t=(0,u.getApprovalRequestsByType)(e,r.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[6737,{"../../app/scripts/controllers/bridge/types":20,"../../app/scripts/lib/util":134,"../../shared/constants/app":4977,"../../shared/constants/bridge":4978,"../../shared/constants/hardware-wallets":4985,"../../shared/constants/keyring":4986,"../../shared/constants/labels":4987,"../../shared/constants/multichain/assets":4991,"../../shared/constants/network":4993,"../../shared/constants/swaps":5003,"../../shared/constants/terms":5004,"../../shared/constants/time":5005,"../../shared/constants/tokens":5006,"../../shared/constants/transaction":5007,"../../shared/modules/conversion.utils":5030,"../../shared/modules/hexstring-utils":5036,"../../shared/modules/selectors":5048,"../../shared/modules/selectors/networks":5049,"../../shared/modules/selectors/util":5051,"../../shared/modules/string-utils":5053,"../../shared/modules/transaction.utils":5055,"../../shared/notifications":5057,"../ducks/app/app":5953,"../ducks/metamask/metamask":5968,"../helpers/constants/design-system":5980,"../helpers/utils/util":6029,"../pages/confirmations/confirmation/templates":6423,"./accounts":6723,"./multichain":6734,"./permissions":6736,"./transactions":6742,"@metamask/controller-utils":1375,"@metamask/keyring-api":1743,"@metamask/name-controller":1855,"@metamask/network-controller":1887,"@metamask/permission-controller":1963,"@metamask/snaps-utils":2471,"@metamask/transaction-controller":2523,lodash:4111,reselect:4530,semver:4793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=V(e);return Boolean("snap"!==t)},n.accountsWithSendEtherInfoSelector=de,n.checkIfMethodIsEnabled=function(e,t){const n=(0,K.getSelectedInternalAccount)(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,w.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,w.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,w.isAddressLedger)(e,t),r=(0,w.getLedgerTransportType)(e)===h.LedgerTransportTypes.webhid,a=(0,D.getLedgerWebHidConnectedStatus)(e)!==h.WebHIDConnectedStatuses.connected,s=(0,D.getLedgerTransportStatus)(e)!==h.HardwareTransportStates.verified;return n&&r&&(a||s)},n.getAccountName=function(e,t){const n=e.find((e=>(0,k.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountType=V,n.getAccountTypeForKeyring=Y,n.getAccountsWithLabels=function(e){return ae(e).map((e=>{const{address:t,metadata:{name:n},balance:r}=e;return{...e,addressLabel:`${n.length<_.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,_.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,O.shortenAddress)(t)})`,label:n,balance:r}}))},n.getAddressBook=ue,n.getAddressBookEntry=le,n.getAddressBookEntryOrAccountName=function(e,t){const n=le(e,t);if(n&&""!==n.name)return n.name;const r=Object.values((0,K.getInternalAccounts)(e)).find((e=>(0,k.isEqualCaseInsensitive)(e.address,t)));return(null==r?void 0:r.metadata.name)||t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[(0,T.getCurrentChainId)(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=ne(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),r=0===J(e);return n&&r},n.getAllConnectedAccounts=n.getAllChainsToPoll=void 0,n.getAllDetectedTokens=function(e){return e.metamask.allDetectedTokens},n.getAllDetectedTokensForSelectedAddress=function(e){if(!(0,w.getCompletedOnboarding)(e))return{};const{address:t}=(0,K.getSelectedInternalAccount)(e);return Object.entries(e.metamask.allDetectedTokens||{}).reduce(((e,[n,r])=>{const a=r[t];return a&&(e[n]=a.map((e=>({...e,chainId:n})))),e}),{})},n.getAllDomains=ie,n.getAllSnapAvailableUpdates=n.getAllEnabledNetworks=void 0,n.getAllTokens=oe,n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=ct(e),r=Le(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,O.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=n.getChainIdsToPoll=void 0,n.getCrossChainMetaMaskCachedBalances=function(e){const t=e.metamask.accountsByChainId;return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,r)=>(e[r]=t[n][r].balance,e)),{}),e)),{})},n.getCrossChainTokenExchangeRates=void 0,n.getCurrencyRates=function(e){return e.metamask.currencyRates},n.getCurrentAccountWithSendEtherInfo=pe,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=me,n.getCurrentKeyring=$,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDefaultHomeActiveTabName=function(e){return e.metamask.defaultHomeActiveTabName},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=(0,T.getCurrentChainId)(e),{address:r}=(0,K.getSelectedInternalAccount)(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[r]},n.getEditedNetwork=function(e){return e.appState.editedNetwork},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const n=le(e,t)||z(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[l.NameType.ETHEREUM_ADDRESS])||{}},n.getEvmInternalAccounts=void 0,n.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=ye(e);return t},n.getFullTxData=void 0,n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=$(e);return q(e)?t.type:undefined},n.getHiddenAccountsList=tt,n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=n.getHideSnapBranding=void 0,n.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},n.getInternalAccountByAddress=z,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},n.getIsBitcoinSupportEnabled=function(e){return e.metamask.bitcoinSupportEnabled},n.getIsBitcoinTestnetSupportEnabled=function(e){return e.metamask.bitcoinTestnetSupportEnabled},n.getIsBridgeChain=function(e,t){const n=(0,T.getCurrentChainId)(e),r=t??n;return A.ALLOWED_BRIDGE_CHAIN_IDS.includes(r)},n.getIsBridgeEnabled=void 0,n.getIsCustomNetwork=ct,n.getIsDynamicTokenListAvailable=st,n.getIsLineaMainnet=function(e){return(0,T.getCurrentChainId)(e)===f.CHAIN_IDS.LINEA_MAINNET},n.getIsMainnet=Se,n.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},n.getIsNonStandardEthChain=function(e){return!(Se(e)||_e(e))},n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSwapsChain=function(e,t){const n=(0,T.getCurrentChainId)(e),r=t??n;return y.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(r)},n.getIsTestnet=_e,n.getIsTokenDetectionInactiveOnMainnet=ot,n.getIsTokenDetectionSupported=function(e){const t=at(e),n=st(e);return t&&n},n.getIsTokenNetworkFilterEqualCurrentNetwork=Ie,n.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=at(e),n=Se(e);return st(e)&&!t&&!n},n.getKeyringSnapAccounts=function(e){const t=(0,K.getInternalAccounts)(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===E.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){const{knownMethodData:n,use4ByteResolution:r}=e.metamask;if(!r||!(0,x.hasTransactionData)(t))return null;const a=(0,g.addHexPrefix)(t).slice(0,10);if(a.length<10)return null;return(null==n?void 0:n[a])??null},n.getLastViewedUserSurvey=function(e){return e.metamask.lastViewedUserSurvey},n.getLocale=Ye,n.getMarketData=void 0,n.getMaybeSelectedInternalAccount=function(e){var t,n;const r=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return r?null===(n=e.metamask.internalAccounts)||void 0===n?void 0:n.accounts[r]:undefined},n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=n.getMemoizedAddressBook=void 0,n.getMemoizedUnapprovedTypedMessages=n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedPersonalMessages=n.getMemoizedUnapprovedConfirmations=n.getMemoizedTxId=n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContract=void 0,n.getMetaMaskAccountBalances=te,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=ne,n.getMetaMaskKeyrings=ee,n.getMetaMetricsDataDeletionId=function(e){return e.metamask.metaMetricsDataDeletionId},n.getMetaMetricsDataDeletionStatus=function(e){return e.metamask.metaMetricsDataDeletionStatus},n.getMetaMetricsDataDeletionTimestamp=function(e){return e.metamask.metaMetricsDataDeletionTimestamp},n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getNameLookupSnapsIds=n.getMultipleTargetsSubjectMetadata=n.getMetadataContractName=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyForChain=function(e){return f.CHAIN_ID_TOKEN_IMAGE_MAP[e]??undefined},n.getNativeCurrencyImage=function(e){const t=(0,T.getCurrentChainId)(e);return f.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNetworkConfigurationIdByChainId=n.getNetworkClientIdsToPoll=void 0,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:r}=(0,T.getProviderConfig)(e);return n||r||t},n.getNetworkToAutomaticallySwitchTo=function(e){const t=nt(e),n=Ue(e),r=it(e);if((0,g.getEnvironmentType)()===F.ENVIRONMENT_TYPE_POPUP&&(0,w.getIsUnlocked)(e)&&r&&n&&0===t){const t=ie(e)[n],r=rt(e);if(t&&r.id!==t)return t}return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=nt,n.getNumberOfTokens=J,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOnboardingDate=function(e){return e.metamask.onboardingDate},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOriginOfCurrentTab=Ue,n.getPetnamesEnabled=function(e){const{petnamesEnabled:t=!0}=ye(e);return t},n.getPinnedAccountsList=et,n.getPreferences=ye,n.getPrioritizedUnapprovedTemplatedConfirmations=n.getPreinstalledSnaps=void 0,n.getQueuedRequestCount=fe,n.getRedesignedConfirmationsEnabled=function(e){const{redesignedConfirmationsEnabled:t}=ye(e);return t},n.getRedesignedTransactionsEnabled=function(e){const{redesignedTransactionsEnabled:t}=ye(e);return t},n.getRemoteFeatureFlags=function(e){return e.metamask.remoteFeatureFlags},n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRequestingNetworkInfo=function(e,t){let n=t===undefined?[]:t;"string"==typeof n&&(n=[n]);const r=n.flat();return Object.values((0,T.getNetworkConfigurationsByChainId)(e)).filter((e=>!f.TEST_CHAINS.includes(e.chainId)&&r.includes(e.chainId)))},n.getRpcPrefsForCurrentProvider=Le,n.getSelectedAccount=void 0,n.getSelectedAccountCachedBalance=se,n.getSelectedAccountNativeTokenCachedBalanceByChainId=re,n.getSelectedAccountTokensAcrossChains=function(e){const{allTokens:t}=e.metamask,n=(0,K.getSelectedInternalAccount)(e).address,r={},a=re(e);return new Set([...Object.keys(t||{}),...Object.keys(a||{})]).forEach((s=>{var o;r[s]||(r[s]=[]),null!==(o=t[s])&&void 0!==o&&o[n]&&t[s][n].forEach((e=>{const t={...e,chainId:s,isNative:!1};r[s].push(t)}));const i=a[s];if(i){const t=function(e,t){const{networkConfigurationsByChainId:n}=e.metamask,r=null==n?void 0:n[t];if(r){return{symbol:r.nativeCurrency||I.AssetType.native,decimals:18,name:r.name||"Native Token"}}const{provider:a}=e.metamask;if((null==a?void 0:a.chainId)===t){var s;return{symbol:a.ticker||I.AssetType.native,decimals:(null===(s=a.nativeCurrency)||void 0===s?void 0:s.decimals)||18,name:a.nickname||"Native Token"}}return{symbol:I.AssetType.native,decimals:18,name:"Native Token"}}(e,s);r[s].push({...t,address:"",balance:i,chainId:s,isNative:!0})}})),r},n.getSelectedAddress=function(e){var t;return null===(t=(0,K.getSelectedInternalAccount)(e))||void 0===t?void 0:t.address},n.getSelectedEvmInternalAccount=void 0,n.getSelectedInternalAccountWithBalance=function(e){const t=(0,K.getSelectedInternalAccount)(e),n=te(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetwork=void 0,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=ye(e);return t},n.getShouldShowAggregatedBalancePopover=function(e){const{shouldShowAggregatedBalancePopover:t}=ye(e);return t},n.getShouldShowFiat=function(e){const t=(0,T.getCurrentChainId)(e),n=f.TEST_NETWORK_IDS.includes(t),{showFiatInTestnets:r}=ye(e),a=(0,w.getConversionRate)(e),s=ut(e),o=Boolean(s&&a);if(n)return r&&o;return o},n.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:n,dismissSeedBackUpReminder:r}=e.metamask,a=(0,K.getSelectedInternalAccount)(e)?me(e):0;return!1===n&&(parseInt(a,16)>0||t.length>0)&&!1===r},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowDataDeletionErrorModal=function(e){return e.appState.showDataDeletionErrorModal},n.getShowDeleteMetaMetricsDataModal=function(e){return e.appState.showDeleteMetaMetricsDataModal},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=ye(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=ye(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*v.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowPermittedNetworkToastOpen=function(e){return e.appState.showPermittedNetworkToastOpen},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*v.DAY:2*v.DAY;return r-t>=a},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(C.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=Ae,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSnapMetadata=n.getSnapLatestVersion=n.getSnapInsights=n.getSnap=n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=Ve,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=lt,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=$(e),n=(null==t?void 0:t.type)===E.KeyringType.ledger,r=window.navigator.userAgent.includes("Firefox");return{[M.NOTIFICATION_DROP_LEDGER_FIREFOX]:n&&r}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSuggestedNfts=function(e){var t;return(null===(t=he(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===s.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=he(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===s.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e,t=null){const n=ce(e),r=null==n?void 0:n.balance,a=(0,T.getCurrentChainId)(e),s=t??a;return{...y.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s],balance:(0,P.hexToDecimal)(r),string:(0,P.getValueFromWeiHex)({value:r,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=(0,T.getNetworkConfigurationsByChainId)(e);if(t){const e=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t.networkClientId))));return{nickname:null==e?void 0:e.name,imageUrl:f.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==e?void 0:e.chainId],origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return Q(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=de(e);return(0,O.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=Ne,n.getTestNetworkBackgroundColor=function(e){const t=(0,T.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(f.GOERLI_DISPLAY_NAME):return b.BackgroundColor.goerli;case null==t?void 0:t.includes(f.SEPOLIA_DISPLAY_NAME):return b.BackgroundColor.sepolia;default:return undefined}},n.getTheme=function(e){return e.metamask.theme},n.getTokensMarketData=n.getTokenList=n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:r=0,unapprovedTypedMessagesCount:a=0}=e.metamask;return t+n+r+a},n.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedPersonalMsgCount:t=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+n},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,T.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=void 0,n.getUnapprovedTemplatedConfirmations=Ee,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,H.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e,t){const n=ae(e),r=(0,W.getOrderedConnectedAccountsForConnectedDapp)(e,t);return n.filter((e=>!r.some((t=>t.address===e.address))))},n.getUpdatedAndSortedAccounts=void 0,n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=ut,n.getUseExternalServices=xe,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseNonceField=function(e){const t=(0,S.getIsSmartTransaction)(e);return Boolean(!t&&e.metamask.useNonceField)},n.getUseRequestQueue=it,n.getUseTokenDetection=at,n.getUseTransactionSimulations=function(e){return Boolean(e.metamask.useTransactionSimulations)},n.getWatchedToken=void 0,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isBalanceCached=function(e){var t;const{address:n}=(0,K.getSelectedInternalAccount)(e),r=null===(t=te(e)[n])||void 0===t?void 0:t.balance,a=se(e);return Boolean(!r&&a)},n.isCurrentProviderCustom=function(e){const t=(0,T.getProviderConfig)(e);return t.type===f.NETWORK_TYPES.RPC&&!Object.values(f.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=q,n.useSafeChainsListValidationSelector=n.selectNftsByChainId=n.selectNftContractsByChainId=n.selectNetworkIdentifierByChainId=n.selectNetworkConfigurationByChainId=n.selectInstalledSnaps=n.selectERC20TokensByChain=n.selectERC20Tokens=n.selectDefaultRpcEndpointByChainId=n.selectConversionRateByChainId=n.selectAllTokensFlat=n.rawStateSelector=void 0;var r,a=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/snaps-utils"),i=e("lodash"),c=(r=e("semver"))&&r.__esModule?r:{default:r},u=e("reselect"),l=e("@metamask/name-controller"),d=e("@metamask/transaction-controller"),p=e("@metamask/keyring-api"),m=e("@metamask/network-controller"),T=e("../../shared/modules/selectors/networks"),g=e("../../app/scripts/lib/util"),f=e("../../shared/constants/network"),h=e("../../shared/constants/hardware-wallets"),E=e("../../shared/constants/keyring"),S=e("../../shared/modules/selectors"),_=e("../../shared/constants/labels"),y=e("../../shared/constants/swaps"),A=e("../../shared/constants/bridge"),I=e("../../shared/constants/transaction"),O=e("../helpers/utils/util"),N=e("../pages/confirmations/confirmation/templates"),R=e("../../shared/constants/tokens"),v=e("../../shared/constants/time"),C=e("../../shared/constants/terms"),w=e("../ducks/metamask/metamask"),D=e("../ducks/app/app"),k=e("../../shared/modules/string-utils"),P=e("../../shared/modules/conversion.utils"),b=e("../helpers/constants/design-system"),M=e("../../shared/notifications"),F=e("../../shared/constants/app"),L=e("../../shared/constants/multichain/assets"),U=e("../../app/scripts/controllers/bridge/types"),x=e("../../shared/modules/transaction.utils"),G=e("../../shared/modules/hexstring-utils"),B=e("../../shared/modules/selectors/util"),H=e("./transactions"),W=e("./permissions"),K=e("./accounts"),j=e("./multichain");function $(e){const t=(0,K.getSelectedInternalAccount)(e);return t?t.metadata.keyring:null}function q(e){var t;const n=$(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function V(e){return Y($(e))}function Y(e){if(!e)return"";const{type:t}=e;switch(t){case E.KeyringType.trezor:case E.KeyringType.ledger:case E.KeyringType.lattice:case E.KeyringType.qr:return"hardware";case E.KeyringType.imported:return"imported";case E.KeyringType.snap:return"snap";default:return"default"}}const Q=n.getMetaMaskAccounts=(0,u.createSelector)(K.getInternalAccounts,te,ne,j.getMultichainBalances,j.getMultichainNetwork,((e,t,n,r,a)=>Object.values(e).reduce(((e,s)=>{let o=s;var i;(0,p.isEvmAccountType)(s.type)?null!=t&&t[s.address]&&(o={...o,...t[s.address]}):o={...o,balance:(null==r||null===(i=r[s.id])||void 0===i||null===(i=i[L.MultichainNativeAssets[a.chainId]])||void 0===i?void 0:i.amount)??"0"};return null!==o.balance&&o.balance!==undefined||(o={...o,balance:(n&&n[s.address])??"0x0"}),{...e,[s.address]:o}}),{})));function z(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,k.isEqualCaseInsensitive)(e.address,t)))}const X=n.getEvmInternalAccounts=(0,u.createSelector)(K.getInternalAccounts,(e=>e.filter((e=>(0,p.isEvmAccountType)(e.type))))),Z=(n.getSelectedEvmInternalAccount=(0,u.createSelector)(X,(e=>{const[t]=(0,O.sortSelectedInternalAccounts)(e);return t})),n.getInternalAccountsSortedByKeyring=(0,u.createSelector)(ee,Q,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e])))));function J(e){const{tokens:t}=e.metamask;return t?t.length:0}function ee(e){return e.metamask.keyrings}function te(e){return e.metamask.accounts}function ne(e){var t;const n=(0,T.getCurrentChainId)(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}function re(e){const{accountsByChainId:t}=e.metamask,{address:n}=(0,K.getSelectedInternalAccount)(e),r={};for(const[e,a]of Object.entries(t||{}))a[n]&&(r[e]=a[n].balance);return r}const ae=n.getMetaMaskAccountsOrdered=(0,u.createSelector)(Z,Q,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,u.createSelector)(ae,(e=>e.map((({address:e})=>e.toLowerCase()))));function se(e){const t=ne(e),{address:n}=(0,K.getSelectedInternalAccount)(e);return null==t?void 0:t[n]}function oe(e){return e.metamask.allTokens}n.selectAllTokensFlat=(0,u.createSelector)(oe,(e=>Object.values(e).reduce(((e,t)=>{const n=Object.values(t);return e.concat(...n)}),[])));function ie(e){return e.metamask.domains}n.getConfirmationExchangeRates=e=>e.metamask.confirmationExchangeRates;const ce=n.getSelectedAccount=(0,B.createDeepEqualSelector)(Q,K.getSelectedInternalAccount,((e,t)=>t?{...t,...e[t.address]}:undefined));n.getWatchedToken=e=>(0,u.createSelector)([ce,oe],((t,n)=>{var r;const{chainId:a}=e;return null==n||null===(r=n[a])||void 0===r||null===(r=r[t.address])||void 0===r?void 0:r.find((t=>(0,G.toChecksumHexAddress)(t.address)===(0,G.toChecksumHexAddress)(e.txParams.to)))}));n.getTokenExchangeRates=e=>{var t;const n=(0,T.getCurrentChainId)(e),r=(null===(t=e.metamask.marketData)||void 0===t?void 0:t[n])??{};return Object.entries(r).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{})};n.getCrossChainTokenExchangeRates=e=>{const t=e.metamask.marketData??{};return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,r)=>{var a;return e[r]=null===(a=t[n][r])||void 0===a?void 0:a.price,e}),{}),e)),{})};n.getTokensMarketData=e=>{var t;const n=(0,T.getCurrentChainId)(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[n]};function ue(e){const t=(0,T.getCurrentChainId)(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function le(e,t){return ue(e).find((e=>(0,k.isEqualCaseInsensitive)(e.address,t)))}function de(e){const t=Q(e),n=(0,K.getInternalAccounts)(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function pe(e){const{address:t}=(0,K.getSelectedInternalAccount)(e),n=de(e);return(0,O.getAccountByAddress)(n,t)}function me(e){var t;return null===(t=pe(e))||void 0===t?void 0:t.balance}n.getMarketData=e=>e.metamask.marketData;n.getNetworkConfigurationIdByChainId=(0,B.createDeepEqualSelector)((e=>e.metamask.networkConfigurationsByChainId),(e=>Object.entries(e).reduce(((e,[t,n])=>{const r=n.rpcEndpoints[n.defaultRpcEndpointIndex];return e[t]=r.networkClientId,e}),{})));const Te=n.selectNetworkConfigurationByChainId=(0,u.createSelector)(T.getNetworkConfigurationsByChainId,((e,t)=>t),((e,t)=>e[t])),ge=n.selectDefaultRpcEndpointByChainId=(0,u.createSelector)(Te,(e=>{if(!e)return undefined;const{defaultRpcEndpointIndex:t,rpcEndpoints:n}=e;return n[t]}));n.selectConversionRateByChainId=(0,u.createSelector)(Te,(e=>e),((e,t)=>{var n;if(!e)return undefined;const{nativeCurrency:r}=e;return null===(n=t.metamask.currencyRates[r])||void 0===n?void 0:n.conversionRate})),n.selectNftsByChainId=(0,u.createSelector)(K.getSelectedInternalAccount,(e=>e.metamask.allNfts),((e,t)=>t),((e,t,n)=>{var r;return(null==t||null===(r=t[e.address])||void 0===r?void 0:r[n])??[]})),n.selectNftContractsByChainId=(0,u.createSelector)(K.getSelectedInternalAccount,(e=>e.metamask.allNftContracts),((e,t)=>t),((e,t,n)=>{var r;return(null==t||null===(r=t[e.address])||void 0===r?void 0:r[n])??[]})),n.selectNetworkIdentifierByChainId=(0,u.createSelector)(Te,ge,((e,t)=>{const{name:n}=e??{},{url:r,networkClientId:a}=t??{};return n||r||a}));function fe(e){return e.metamask.queuedRequestCount??0}const he=n.getUnapprovedConfirmations=(0,B.createDeepEqualSelector)((e=>e.metamask.pendingApprovals||{}),(e=>Object.values(e)));function Ee(e){return he(e).filter((e=>N.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}n.getPrioritizedUnapprovedTemplatedConfirmations=(0,u.createSelector)(Ee,(e=>e.filter((({type:e})=>N.PRIORITY_APPROVAL_TEMPLATE_TYPES.includes(e)))));function Se(e){return(0,T.getCurrentChainId)(e)===f.CHAIN_IDS.MAINNET}function _e(e){const t=(0,T.getCurrentChainId)(e);return f.TEST_CHAINS.includes(t)}function ye({metamask:e}){return e.preferences}function Ae(e){const{showTestNetworks:t}=ye(e);return Boolean(t)}function Ie(e){const t=(0,T.getCurrentChainId)(e),{tokenNetworkFilter:n}=ye(e),r=n||{};return 1===Object.keys(r).length&&Object.keys(r)[0]===t}const Oe=(0,i.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function Ne(e,t){const n=(0,W.getSubjectMetadata)(e)[t];if((null==n?void 0:n.subjectType)===a.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?Oe(e):null}}return n}const Re=e=>e;n.rawStateSelector=Re;const ve=(e,t)=>t,Ce=e=>e.metamask.snaps;n.selectInstalledSnaps=Ce;const we=n.getSnapRegistryData=(0,u.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},ve],((e,t)=>e?e[t]:null)),De=n.getSnapLatestVersion=(0,u.createSelector)([we],(e=>e?Object.keys(e.versions).reduce(((e,t)=>c.default.gt(t,e)?t:e),"0.0.0"):null)),ke=n.getAllSnapAvailableUpdates=(0,u.createSelector)([Ce,Re],((e,t)=>{const n=new Map;return Object.keys(e).forEach((r=>{const a=De(t,r);n.set(r,!!a&&c.default.gt(a,e[r].version))})),n})),Pe=(n.getAnySnapUpdateAvailable=(0,u.createSelector)([ke],(e=>[...e.values()].some((e=>!0===e)))),n.getHideSnapBranding=(0,u.createSelector)([Ce,ve],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.hideSnapBranding})),n.getMemoizedTargetSubjectMetadata=(0,B.createDeepEqualSelector)(Ne,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,B.createDeepEqualSelector)(he,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,B.createDeepEqualSelector)(Ee,(e=>e)),(e,t)=>t),be=n.getMemoizedInterfaces=(0,B.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),Me=n.getInterface=(0,u.createSelector)([be,Pe],((e,t)=>e[t])),Fe=(n.getMemoizedInterface=(0,B.createDeepEqualSelector)(Me,(e=>e)),n.getInterfaceContent=(0,u.createSelector)([be,Pe],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,B.createDeepEqualSelector)(Fe,(e=>e)),n.getMultipleTargetsSubjectMetadata=(0,B.createDeepEqualSelector)([Re,(e,t)=>t],((e,t)=>Object.keys(t??{}).reduce(((t,n)=>(t[n]=Ne(e,n),t)),{})));function Le(e){const{rpcPrefs:t}=(0,T.getProviderConfig)(e);return t}function Ue(e){return e.activeTab.origin}function xe(e){return e.metamask.useExternalServices}n.getIsBridgeEnabled=(0,u.createSelector)([function(e){var t;return null===(t=e.metamask.bridgeState)||void 0===t?void 0:t.bridgeFeatureFlags},xe],((e,t)=>(t&&(null==e?void 0:e[U.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]))??!1));n.getMemoizedMetaMaskInternalAccounts=(0,B.createDeepEqualSelector)(K.getInternalAccounts,(e=>e)),n.getMemoizedAddressBook=(0,B.createDeepEqualSelector)(ue,(e=>e)),n.selectERC20TokensByChain=(0,B.createDeepEqualSelector)((e=>e.metamask.tokensChainsCache),(e=>e));const Ge=n.selectERC20Tokens=(0,B.createDeepEqualSelector)((e=>e.metamask.tokenList),(e=>e)),Be=n.getTokenList=(0,u.createSelector)(Ge,ot,((e,t)=>t?R.STATIC_MAINNET_TOKEN_LIST:e)),He=n.getMemoizedMetadataContract=(0,u.createSelector)(((e,t)=>Be(e)),((e,t)=>t),((e,t)=>e[null==t?void 0:t.toLowerCase()])),We=(n.getMetadataContractName=(0,u.createSelector)(He,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=We;const Ke=n.getUnapprovedTransaction=(0,B.createDeepEqualSelector)((e=>(0,H.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t)))),je=n.getTransaction=(0,B.createDeepEqualSelector)((e=>(0,H.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),$e=(n.getFullTxData=(0,B.createDeepEqualSelector)(We,((e,t,n)=>n===d.TransactionStatus.unapproved?Ke(e,t)??{}:je(e,t)),((e,t,n,r,a)=>({customTxParamsData:r,hexTransactionAmount:a})),((e,t,{customTxParamsData:n,hexTransactionAmount:r})=>{let a={...e,...t};return t&&t.simulationFails&&(a.simulationFails={...t.simulationFails}),n&&(a={...a,txParams:{...a.txParams,data:n}}),r&&(a={...a,txParams:{...a.txParams,value:r}}),a})),n.getAllConnectedAccounts=(0,B.createDeepEqualSelector)(W.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)))),qe=n.getConnectedSitesList=(0,B.createDeepEqualSelector)(W.getConnectedSubjectsForAllAddresses,K.getInternalAccounts,$e,((e,t,n)=>{const r={};return n.forEach((n=>{e[n].forEach((e=>{const a=e.origin,s=t.find((e=>(0,k.isEqualCaseInsensitive)(e.address,n)));r[a]?(r[a].addresses.push(n),r[a].addressToNameMap[n]=(null==s?void 0:s.metadata.name)||""):r[a]={...e,addresses:[n],addressToNameMap:{[n]:(null==s?void 0:s.metadata.name)||""}}}))})),r}));n.getConnectedSnapsList=(0,B.createDeepEqualSelector)(lt,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,B.createDeepEqualSelector)(T.getCurrentChainId,(e=>e)),n.getMemoizedTxId=(0,B.createDeepEqualSelector)((e=>e.appState.txId),(e=>e)),n.getMemoizedUnapprovedPersonalMessages=(0,B.createDeepEqualSelector)((e=>e.metamask.unapprovedPersonalMsgs),(e=>e)),n.getMemoizedUnapprovedTypedMessages=(0,B.createDeepEqualSelector)((e=>e.metamask.unapprovedTypedMessages),(e=>e));function Ve(e){return e.metamask.snaps}function Ye(e){return e.metamask.currentLocale}n.getSnap=(0,B.createDeepEqualSelector)(Ve,((e,t)=>t),((e,t)=>e[t]));const Qe=n.getSnapsMetadata=(0,B.createDeepEqualSelector)(Ye,Ve,((e,t)=>Object.values(t).reduce(((t,n)=>{const r=n.id,a=n.localizationFiles?(0,o.getLocalizedSnapManifest)(n.manifest,e,n.localizationFiles):n.manifest;return t[r]={name:a.proposedName,description:a.description,hidden:n.hidden},t}),{}))),ze=n.getSnapMetadata=(0,B.createDeepEqualSelector)(Qe,((e,t)=>t),((e,t)=>e[t]??{name:t?(0,o.stripSnapPrefix)(t):null})),Xe=n.getEnabledSnaps=(0,B.createDeepEqualSelector)(Ve,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),Ze=(n.getPreinstalledSnaps=(0,B.createDeepEqualSelector)(Ve,(e=>Object.values(e).reduce(((e,t)=>(t.preinstalled&&(e[t.id]=t),e)),{}))),n.getInsightSnaps=(0,B.createDeepEqualSelector)(Xe,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]}))))),Je=n.getSignatureInsightSnaps=(0,B.createDeepEqualSelector)(Xe,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,B.createDeepEqualSelector)(Je,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,B.createDeepEqualSelector)(Ze,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,B.createDeepEqualSelector)(Xe,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getNotifySnaps=(0,B.createDeepEqualSelector)(Xe,W.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));n.getSnapInsights=(0,B.createDeepEqualSelector)((function(e){return e.metamask.insights}),((e,t)=>t),((e,t)=>null==e?void 0:e[t]));function et(e){return e.metamask.pinnedAccountList}function tt(e){return e.metamask.hiddenAccountList}function nt(e){const t=(0,H.getAllUnapprovedTransactions)(e),n=fe(e),r={...t,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(r).length+n}const rt=n.getCurrentNetwork=(0,B.createDeepEqualSelector)(T.getNetworkConfigurationsByChainId,T.getCurrentChainId,((e,t)=>{var n;const r=e[t],a=r.rpcEndpoints[r.defaultRpcEndpointIndex],s=null===(n=r.blockExplorerUrls)||void 0===n?void 0:n[r.defaultBlockExplorerUrlIndex];return{chainId:r.chainId,id:a.networkClientId,nickname:r.name,rpcUrl:a.url,ticker:r.nativeCurrency,blockExplorerUrl:s,rpcPrefs:{blockExplorerUrl:s,imageUrl:f.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[r.chainId]},...a.type===m.RpcEndpointType.Infura&&{providerType:a.networkClientId}}}));n.getSelectedNetwork=(0,B.createDeepEqualSelector)(T.getSelectedNetworkClientId,T.getNetworkConfigurationsByChainId,((e,t)=>{if(e===undefined)throw new Error("No network is selected");const n=Object.values(t).find((t=>t.rpcEndpoints.some((t=>t.networkClientId===e))));if(n===undefined)throw new Error("Could not find network configuration for selected network client");return{configuration:n,clientId:e}})),n.getConnectedSitesListWithNetworkInfo=(0,B.createDeepEqualSelector)(qe,ie,T.getNetworkConfigurationsByChainId,rt,((e,t,n,r)=>(Object.keys(e).forEach((a=>{const s=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t[a]))));e[a].networkIconUrl=f.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==s?void 0:s.chainId]||"",e[a].networkName=(null==s?void 0:s.name)||(null==r?void 0:r.nickname)||""})),e)));function at(e){return Boolean(e.metamask.useTokenDetection)}n.getAllEnabledNetworks=(0,B.createDeepEqualSelector)(T.getNetworkConfigurationsByChainId,Ae,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>(!t&&f.TEST_CHAINS.includes(n)||(e[n]=r),e)),{}))),n.getAllChainsToPoll=(0,B.createDeepEqualSelector)(T.getNetworkConfigurationsByChainId,T.getCurrentChainId,((e,t)=>Object.keys(e).filter((e=>e===t||!f.TEST_CHAINS.includes(e))))),n.getChainIdsToPoll=(0,B.createDeepEqualSelector)(T.getNetworkConfigurationsByChainId,T.getCurrentChainId,Ie,((e,t,n)=>n?[t]:Object.keys(e).filter((e=>e===t||!f.TEST_CHAINS.includes(e))))),n.getNetworkClientIdsToPoll=(0,B.createDeepEqualSelector)(T.getNetworkConfigurationsByChainId,T.getCurrentChainId,Ie,((e,t,n)=>{if(n){const n=e[t];return[n.rpcEndpoints[n.defaultRpcEndpointIndex].networkClientId]}return Object.entries(e).reduce(((e,[n,r])=>(n!==t&&f.TEST_CHAINS.includes(n)||e.push(r.rpcEndpoints[r.defaultRpcEndpointIndex].networkClientId),e)),[])}));function st(e){const t=(0,T.getCurrentChainId)(e);return[f.CHAIN_IDS.MAINNET,f.CHAIN_IDS.BSC,f.CHAIN_IDS.POLYGON,f.CHAIN_IDS.AVALANCHE,f.CHAIN_IDS.LINEA_GOERLI,f.CHAIN_IDS.LINEA_SEPOLIA,f.CHAIN_IDS.LINEA_MAINNET,f.CHAIN_IDS.ARBITRUM,f.CHAIN_IDS.OPTIMISM,f.CHAIN_IDS.BASE,f.CHAIN_IDS.ZKSYNC_ERA,f.CHAIN_IDS.CRONOS,f.CHAIN_IDS.CELO,f.CHAIN_IDS.GNOSIS,f.CHAIN_IDS.FANTOM,f.CHAIN_IDS.POLYGON_ZKEVM,f.CHAIN_IDS.MOONBEAM,f.CHAIN_IDS.MOONRIVER].includes(t)}function ot(e){const t=Se(e);return!at(e)&&t}function it(e){return e.metamask.useRequestQueue}function ct(e){const t=(0,T.getCurrentChainId)(e);return!f.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch((0,T.getCurrentChainId)(e)){case f.CHAIN_IDS.MAINNET:return f.MAINNET_DISPLAY_NAME;case f.CHAIN_IDS.BSC:return f.BSC_DISPLAY_NAME;case f.CHAIN_IDS.POLYGON:return f.POLYGON_DISPLAY_NAME;case f.CHAIN_IDS.AVALANCHE:return f.AVALANCHE_DISPLAY_NAME;case f.CHAIN_IDS.LINEA_GOERLI:return f.LINEA_GOERLI_DISPLAY_NAME;case f.CHAIN_IDS.LINEA_SEPOLIA:return f.LINEA_SEPOLIA_DISPLAY_NAME;case f.CHAIN_IDS.LINEA_MAINNET:return f.LINEA_MAINNET_DISPLAY_NAME;case f.CHAIN_IDS.ARBITRUM:return f.ARBITRUM_DISPLAY_NAME;case f.CHAIN_IDS.OPTIMISM:return f.OPTIMISM_DISPLAY_NAME;case f.CHAIN_IDS.BASE:return f.BASE_DISPLAY_NAME;case f.CHAIN_IDS.ZKSYNC_ERA:return f.ZK_SYNC_ERA_DISPLAY_NAME;case f.CHAIN_IDS.CRONOS:return f.CRONOS_DISPLAY_NAME;case f.CHAIN_IDS.CELO:return f.CELO_DISPLAY_NAME;case f.CHAIN_IDS.GNOSIS:return f.GNOSIS_DISPLAY_NAME;case f.CHAIN_IDS.FANTOM:return f.FANTOM_DISPLAY_NAME;case f.CHAIN_IDS.POLYGON_ZKEVM:return f.POLYGON_ZKEVM_DISPLAY_NAME;case f.CHAIN_IDS.MOONBEAM:return f.MOONBEAM_DISPLAY_NAME;case f.CHAIN_IDS.MOONRIVER:return f.MOONRIVER_DISPLAY_NAME;default:return""}};n.getUpdatedAndSortedAccounts=(0,B.createDeepEqualSelector)(ae,et,tt,W.getOrderedConnectedAccountsForActiveTab,((e,t,n,r)=>{r.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&t.metadata&&(n.connections=!0,n.lastSelected=t.metadata.lastSelected)}));const a=e.filter((e=>e.connections&&e.lastSelected)),s=a.length>0?a.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;e.forEach((e=>{e.pinned=Boolean(t.includes(e.address)),e.hidden=Boolean(n.includes(e.address)),e.active=Boolean(s&&e.id===s.id)}));return[...null==t?void 0:t.map((t=>e.find((e=>e.address===t)))).filter((e=>Boolean(e&&t.includes(e.address)&&!(null!=n&&n.includes(e.address))))),...e.filter((e=>!t.includes(e.address)&&!n.includes(e.address))),...e.filter((e=>n.includes(e.address)))]}));function ut(e){return Boolean(e.metamask.useCurrencyRateCheck)}function lt(e){const t=Ve(e);return Object.entries(t).filter((([e,t])=>t.status!==o.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden))).map((([t,n])=>{const r=Ne(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==r?void 0:r.iconUrl,subjectType:null==r?void 0:r.subjectType,packageName:(0,o.stripSnapPrefix)(n.id),name:ze(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[6742,{"../../shared/constants/transaction":5007,"../../shared/modules/conversion.utils":5030,"../../shared/modules/selectors/networks":5049,"../../shared/modules/selectors/util":5051,"../helpers/constants/transactions":5992,"../helpers/utils/tx-helper":6028,"./accounts":6723,"./approvals":6725,"@metamask/controller-utils":1375,"@metamask/smart-transactions-controller/dist/types":2195,"@metamask/transaction-controller":2523,reselect:4530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=n.getAllUnapprovedTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return(0,g.getApprovalRequestsByType)(e,a.ApprovalType.Transaction).length>0||(0,g.hasPendingApprovals)(e,P)},n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=void 0,n.selectTransactionMetadata=b,n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.selectTransactionSender=void 0;var r,a=e("@metamask/controller-utils"),s=e("reselect"),o=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),c=e("../helpers/constants/transactions"),u=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},l=e("../../shared/constants/transaction"),d=e("../../shared/modules/conversion.utils"),p=e("../../shared/modules/selectors/networks"),m=e("../../shared/modules/selectors/util"),T=e("./accounts"),g=e("./approvals");const f=[o.TransactionType.cancel,o.TransactionType.retry],h=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],E=n.getTransactions=(0,m.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};return null!=t&&t.length?[...t].sort(((e,t)=>e.time-t.time)):[]}),(e=>e)),S=n.getCurrentNetworkTransactions=(0,m.createDeepEqualSelector)((e=>{const t=E(e);if(!t.length)return[];const{chainId:n}=(0,p.getProviderConfig)(e);return t.filter((e=>e.chainId===n))}),(e=>e)),_=(n.getUnapprovedTransactions=(0,m.createDeepEqualSelector)((e=>{const t=S(e);return(0,m.filterAndShapeUnapprovedTransactions)(t)}),(e=>e)),n.getAllUnapprovedTransactions=(0,m.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask||[];if(null==t||!t.length)return[];const n=[...t].sort(((e,t)=>e.time-t.time));return(0,m.filterAndShapeUnapprovedTransactions)(n)}),(e=>e)),n.getApprovedAndSignedTransactions=(0,m.createDeepEqualSelector)((e=>E(e).filter((e=>[o.TransactionStatus.approved,o.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,m.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=S(e),{address:r}=(0,T.getSelectedInternalAccount)(e);return n.filter((e=>e.type===o.TransactionType.incoming&&e.txParams.to===r))}),(e=>e))),y=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=y;const A=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=A;const I=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=I;const O=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=O;const N=e=>{var t;const{address:n}=(0,T.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,p.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===n&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===o.TransactionType.swap||e.type===o.TransactionType.swapApproval)&&h.includes(e.status))})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?l.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=N;const R=n.selectedAddressTxListSelector=(0,s.createSelector)(T.getSelectedInternalAccount,S,N,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==o.TransactionType.incoming)).concat(n))),v=n.unapprovedMessagesSelector=(0,s.createSelector)(y,A,I,O,p.getCurrentChainId,((e={},t={},n={},r={},a)=>(0,u.default)({},e,t,n,r,a)||[])),C=n.transactionSubSelector=(0,s.createSelector)(v,_,((e=[],t=[])=>e.concat(t))),w=n.transactionsSelector=(0,s.createSelector)(C,R,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),D=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:s}={}}=a;if(s>n){r=t;break}}e.splice(r,0,t)},k=n.nonceSortedTransactionsSelector=(0,s.createSelector)(w,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:s}={},status:i,type:u,time:l,txReceipt:p}=e;if(void 0===s||u===o.TransactionType.incoming){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};u===o.TransactionType.incoming?n.push(r):D(t,r)}else if(s in a){var m,T;const t=a[s];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,d={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:i===o.TransactionStatus.failed&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:f.includes(u),occurredAfterPrimary:l>n,hasPriorityStatus:i in c.PRIORITY_STATUS_HASH,isConfirmed:i===o.TransactionStatus.confirmed,occurredBeforeInitial:l<r,isValidRetry:u===o.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===o.TransactionStatus.dropped),isValidCancel:u===o.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===o.TransactionStatus.dropped)};d.eligibleForInitial=!d.isRetryOrCancel&&!d.isEphemeral,d.shouldBePrimary=d.isConfirmed||d.isOnChainFailure;const g={isEphemeral:t.primaryTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(m=m.txReceipt)||void 0===m?void 0:m.status)},h={isEphemeral:t.initialTransaction.status===o.TransactionStatus.failed&&"0x0"!==(null===(T=t.initialTransaction.txReceipt)||void 0===T?void 0:T.status)};(d.shouldBePrimary||g.isEphemeral||d.occurredAfterPrimary&&d.hasPriorityStatus)&&(t.primaryTransaction=e),(d.occurredBeforeInitial&&d.eligibleForInitial||h.isEphemeral&&d.eligibleForInitial)&&(t.initialTransaction=e),d.isValidRetry&&(t.hasRetried=!0),d.isValidCancel&&(t.hasCancelled=!0)}else a[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===o.TransactionType.retry&&(e.status in c.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped),hasCancelled:e.type===o.TransactionType.cancel&&(e.status in c.PRIORITY_STATUS_HASH||e.status===o.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,d.hexToDecimal)(a))>Number((0,d.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,s)}));const s=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{D(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(f.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!f.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),P=(n.nonceSortedPendingTransactionsSelector=(0,s.createSelector)(k,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,s.createSelector)(k,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,s.createSelector)(w,((e=[])=>e.filter((e=>e.status===o.TransactionStatus.submitted)))),[a.ApprovalType.EthDecrypt,a.ApprovalType.EthGetEncryptionPublicKey,a.ApprovalType.EthSignTypedData,a.ApprovalType.PersonalSign]);function b(e,t){return e.metamask.transactions.find((e=>e.id===t))}n.selectTransactionSender=(0,s.createSelector)(((e,t)=>b(e,t)),(e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from}))}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[6743,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_METAMASK_STATE=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOKEN_SORT_CRITERIA=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SETTINGS_PAGE_ERROR=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_PERMITTED_NETWORK_TOAST_OPEN=n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE=n.SHOW_NFT_STILL_FETCHING_INDICATION=n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS=n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_EDIT_NETWORK=n.SET_DATA_COLLECTION_FOR_MARKETING=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.RESET_ONBOARDING=n.QR_CODE_DETECTED=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_SETTINGS_PAGE_ERROR=n.HIDE_NFT_STILL_FETCHING_INDICATION=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.DELETE_METAMETRICS_DATA_MODAL_OPEN=n.DELETE_METAMETRICS_DATA_MODAL_CLOSE=n.DATA_DELETION_ERROR_MODAL_OPEN=n.DATA_DELETION_ERROR_MODAL_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_SWAP_AND_SEND_STATE=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0,n.UPDATE_TRANSACTION_PARAMS=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_OPEN="UI_PERMITTED_NETWORK_TOAST_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE="UI_PERMITTED_NETWORK_TOAST_CLOSE",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.SHOW_SETTINGS_PAGE_ERROR="SHOW_SETTINGS_PAGE_ERROR",n.HIDE_SETTINGS_PAGE_ERROR="HIDE_SETTINGS_PAGE_ERROR",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",n.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS="SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS",n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS="SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",n.DELETE_METAMETRICS_DATA_MODAL_OPEN="DELETE_METAMETRICS_DATA_MODAL_OPEN",n.DELETE_METAMETRICS_DATA_MODAL_CLOSE="DELETE_METAMETRICS_DATA_MODAL_CLOSE",n.DATA_DELETION_ERROR_MODAL_OPEN="DELETE_METAMETRICS_DATA_ERROR_MODAL_OPEN",n.DATA_DELETION_ERROR_MODAL_CLOSE="DELETE_METAMETRICS_DATA_ERROR_MODAL_CLOSE",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.RESET_ONBOARDING="RESET_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_EDIT_NETWORK="SET_EDIT_NETWORK",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE",n.TOKEN_SORT_CRITERIA="TOKEN_SORT_CRITERIA"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}]],[],{});