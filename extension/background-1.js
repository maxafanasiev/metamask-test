LavaPack.loadBundle([[152,{"fast-json-patch":3712,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=(s=e("fast-json-patch"))&&s.__esModule?s:{default:s},i=e("lodash");r.default={version:18,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const s=n.default.compare(e,t);return s[0]&&(r&&(s[0].note=r),s[0].timestamp=Date.now()),s}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1528,{"./ledger-hw-app":1529,"./ledger-iframe-bridge":1530,"./ledger-keyring":1531,"./ledger-mobile-bridge":1532,"./ledger-transport-middleware":1533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./ledger-keyring"),r),n(e("./ledger-iframe-bridge"),r),n(e("./ledger-mobile-bridge"),r),n(e("./ledger-transport-middleware"),r),n(e("./ledger-hw-app"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1529,{"@ledgerhq/hw-app-eth":783,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMaskLedgerHwAppEth=void 0;const n=s(e("@ledgerhq/hw-app-eth")),i=e("buffer");class a extends n.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,i.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const r=e[t]??0;t+=1;const s=e.slice(t,t+=r).toString(this.transportEncoding),n=e[t]??0;t+=1;return{appName:s,version:e.slice(t,t+=n).toString(this.transportEncoding)}}}r.MetaMaskLedgerHwAppEth=a}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.js"}],[153,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("@metamask/transaction-controller"),n=e("lodash");r.default={version:19,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==s.TransactionStatus.submitted)return e;const n=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===s.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),i=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let s=t;for(;r.includes(s);)s+=1;return s}(r.filter((e=>e.status===s.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),n),a=Math.max(i,n);return parseInt(e.txParams.nonce,16)>a+1&&(e.status=s.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[1530,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var f;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(f||(r.IFrameMessageAction=f={}));r.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){s.add(this),this.iframeLoaded=!1,n.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={},d(this,s,"m",l).call(this,e),h(this,n,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await d(this,s,"m",a).call(this,d(this,n,"f").bridgeUrl),this.eventListener=d(this,s,"m",c).bind(this,d(this,n,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return d(this,n,"f")}async setOptions(e){d(this,s,"m",l).call(this,e),d(this,n,"f")?.bridgeUrl!==e.bridgeUrl&&(d(this,n,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){return new Promise(((e,t)=>{d(this,s,"m",u).call(this,{action:f.LedgerMakeApp},(r=>{"success"in r&&r.success?e(!0):t("error"in r?r.error:new Error("Unknown error occurred"))}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");d(this,s,"m",u).call(this,{action:f.LedgerUpdateTransport,params:{transportType:e}},(e=>"success"in e&&e.success?t(!0):r(new Error("Ledger transport could not be updated"))))}))}async getPublicKey(e){return d(this,s,"m",i).call(this,f.LedgerUnlock,e)}async deviceSignTransaction(e){return d(this,s,"m",i).call(this,f.LedgerSignTransaction,e)}async deviceSignMessage(e){return d(this,s,"m",i).call(this,f.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return d(this,s,"m",i).call(this,f.LedgerSignTypedData,e)}},n=new WeakMap,s=new WeakSet,i=async function(...[e,t]){return new Promise(((r,n)=>{d(this,s,"m",u).call(this,{action:e,params:t},(e=>{if("payload"in e&&e.payload){if("success"in e&&e.success)return r(e.payload);if("error"in e.payload)return n(e.payload.error)}return n(new Error("Unknown error occurred"))}))}))},a=async function(e){return new Promise((t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)}))},o=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},c=function(e,t){if(t.origin===d(this,s,"m",o).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===f.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},u=function(e,t){this.currentMessageId+=1;const r={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"};if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")},l=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1531,{"@ethereumjs/rlp":375,"@ethereumjs/tx":380,"@ethereumjs/util":448,"@metamask/eth-sig-util":1536,buffer:3392,events:3678,hdkey:3909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),b=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return y(t,e),t},v=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},w=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const _=e("@ethereumjs/rlp"),T=e("@ethereumjs/tx"),k=b(e("@ethereumjs/util")),S=e("@metamask/eth-sig-util"),E=e("buffer"),I=e("events"),P=w(e("hdkey")),j="m",C=`${j}/44'/60'/0'`,A="Ledger Hardware";var x;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(x||(x={}));class R extends I.EventEmitter{constructor({bridge:e}){if(super(),s.add(this),this.deviceId="",this.type=A,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new P.default,this.hdPath=C,this.paths={},this.network=x.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e={}){this.hdPath=e.hdPath??C,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||v(this,s,"m",n).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter((e=>t.has(k.toChecksumAddress(e)))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new P.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?v(this,s,"m",f).call(this,e):this.hdPath;let n;try{n=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Ledger Ethereum app closed. Open it to unlock.")}return t&&n.chainCode&&(this.hdk.publicKey=E.Buffer.from(n.publicKey,"hex"),this.hdk.chainCode=E.Buffer.from(n.chainCode,"hex")),n.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const n=this.unlockedAccount,i=n+e,a=[];for(let e=n;e<i;e++){const t=v(this,s,"m",d).call(this,e);let r;r=v(this,s,"m",h).call(this)?await this.unlock(t):v(this,s,"m",u).call(this,j,e),this.accountDetails[k.toChecksumAddress(r)]={bip44:v(this,s,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r],a.push(r)),this.page=0}t(a)})).catch(r)}))}getName(){return A}async getFirstPage(){return this.page=0,v(this,s,"m",a).call(this,1)}async getNextPage(){return v(this,s,"m",a).call(this,1)}async getPreviousPage(){return v(this,s,"m",a).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()));if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[k.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=k.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),v(this,s,"m",i).call(this,e,r,(e=>(t.v=E.Buffer.from(e.v,"hex"),t.r=E.Buffer.from(e.r,"hex"),t.s=E.Buffer.from(e.s,"hex"),t)));const n=t.getMessageToSign(!1);return r=E.Buffer.isBuffer(n)?n.toString("hex"):E.Buffer.from(_.RLP.encode(n)).toString("hex"),v(this,s,"m",i).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=k.addHexPrefix(e.v),r.r=k.addHexPrefix(e.r),r.s=k.addHexPrefix(e.s),T.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:r,message:k.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let n=parseInt(String(s.v),10).toString(16);n.length<2&&(n=`0${n}`);const i=`0x${s.r}${s.s}${n}`,a=(0,S.recoverPersonalSignature)({data:t,signature:i});if(k.toChecksumAddress(a)!==k.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=k.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=r;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:s,types:n,primaryType:i,message:a}=S.TypedDataUtils.sanitizeData(t),o=S.TypedDataUtils.hashStruct("EIP712Domain",s,n,S.SignTypedDataVersion.V4).toString("hex"),c=S.TypedDataUtils.hashStruct(i.toString(),a,n,S.SignTypedDataVersion.V4).toString("hex"),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,domainSeparatorHex:o,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,f=(0,S.recoverTypedSignature)({data:t,signature:h,version:S.SignTypedDataVersion.V4});if(k.toChecksumAddress(f)!==k.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new P.default}}r.LedgerKeyring=R,s=new WeakSet,n=function(e){if(v(this,s,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:v(this,s,"m",d).call(this,r)};const t=new Set(Object.keys(this.accountDetails));v(this,s,"m",h).call(this)||this.accounts.forEach((e=>{const r=k.toChecksumAddress(e);t.has(r)||(this.accountDetails[r]={bip44:!1,hdPath:v(this,s,"m",l).call(this,e)})}))},i=async function(e,t,r){const s=await this.unlockAccountByAddress(e);if(!s)throw new Error("Ledger: Unknown error while signing transaction");let n;try{n=await this.bridge.deviceSignTransaction({tx:t,hdPath:s})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const i=r(n);if(i.verifySignature())return i;throw new Error("Ledger: The transaction signature is not valid")},a=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let n;return await this.unlock(),n=v(this,s,"m",h).call(this)?await v(this,s,"m",o).call(this,t,r):v(this,s,"m",c).call(this,t,r),n},o=async function(e,t){const r=[];for(let n=e;n<t;n++){const e=v(this,s,"m",d).call(this,n),t=await this.unlock(e),i=!this.implementFullBIP44||await v(this,s,"m",m).call(this,t);if(r.push({address:t,balance:null,index:n}),!i)break}return r},c=function(e,t){const r=[];for(let n=e;n<t;n++){const e=v(this,s,"m",u).call(this,j,n);r.push({address:e,balance:null,index:n}),this.paths[k.toChecksumAddress(e)]=n}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),s=k.publicToAddress(r.publicKey,!0).toString("hex");return k.toChecksumAddress(`0x${s}`)},l=function(e){const t=k.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===v(this,s,"m",u).call(this,j,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return v(this,s,"m",d).call(this,r)},d=function(e){return v(this,s,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},m=async function(e){const t=v(this,s,"m",p).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),n=await r.json();return"0"!==n.status&&n.result.length>0},p=function(){return this.network},R.type=A}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[1532,{"@ledgerhq/hw-app-eth/lib/services/ledger":790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerMobileBridge=void 0;const d=l(e("@ledgerhq/hw-app-eth/lib/services/ledger"));r.LedgerMobileBridge=class{constructor(e,t={}){s.add(this),n.set(this,void 0),i.set(this,void 0),this.isDeviceConnected=!1,c(this,i,t,"f"),c(this,n,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await u(this,s,"m",a).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return u(this,s,"m",o).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,domainSeparatorHex:t,hashStructMessageHex:r}){return u(this,s,"m",o).call(this).signEIP712HashedMessage(e,t,r)}async deviceSignTransaction({tx:e,hdPath:t}){const r=await d.default.resolveTransaction(e,{},{});return u(this,s,"m",o).call(this).signTransaction(t,e,r)}async getPublicKey({hdPath:e}){return await u(this,s,"m",o).call(this).getAddress(e,!1,!0)}async getOptions(){return u(this,i,"f")}async setOptions(e){c(this,i,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return u(this,s,"m",a).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await u(this,s,"m",o).call(this).openEthApp()}async closeApps(){await u(this,s,"m",o).call(this).closeApps()}async getAppNameAndVersion(){return u(this,s,"m",o).call(this).getAppNameAndVersion()}},n=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(){if(u(this,n,"f"))return u(this,n,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},o=function(){return u(this,s,"m",a).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.js"}],[1533,{"./ledger-hw-app":1529},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerTransportMiddleware=void 0;const a=e("./ledger-hw-app");r.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",s.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){n(this,s,e,"f")}getTransport(){if(!i(this,s,"f"))throw new Error("Instance `transport` is not initialized.");return i(this,s,"f")}getEthApp(){return new a.MetaMaskLedgerHwAppEth(this.getTransport())}},s=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.js"}],[154,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:20,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[155,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:21,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[156,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("@metamask/transaction-controller"),n=e("lodash");r.default={version:22,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==s.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[157,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let s=!0;for(;r.length>40&&s;){const e=r.findIndex((e=>e.status===n.TransactionStatus.failed||e.status===n.TransactionStatus.rejected||e.status===n.TransactionStatus.confirmed||e.status===n.TransactionStatus.dropped));e<0?s=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[158,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===n.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1584,{"./util":1592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const s=e("./util");class n extends Map{static fromObject(e){return new n(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,s.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=n}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1585,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[1586,{"@metamask/keyring-api":1743},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("@metamask/keyring-api");class d{constructor(e,t,r,o){s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,i,e,"f"),c(this,s,t,"f"),c(this,n,r,"f"),c(this,a,o,"f")}async send(e){return u(this,i,"f").handleRequest({snapId:u(this,s,"f"),origin:u(this,n,"f"),handler:u(this,a,"f"),request:e})}}s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:s="onKeyringRequest"}){super(new d(e,t,r,s)),o.set(this,void 0),c(this,o,e,"f")}withSnapId(e){return new h({controller:u(this,o,"f"),snapId:e})}getController(){return u(this,o,"f")}}r.KeyringSnapControllerClient=h,o=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/KeyringSnapControllerClient.js"}],[1587,{"./CaseInsensitiveMap":1584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const a=e("./CaseInsensitiveMap");class o extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=o;class c{constructor(e){s.set(this,void 0),n(this,s,new a.CaseInsensitiveMap(e),"f")}toObject(){return i(this,s,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=i(this,s,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&i(this,s,"f").delete(t)}set(e,t){if(i(this,s,"f").has(e)&&!this.has(t.snapId,e))throw new o(t.snapId,e);return i(this,s,"f").set(e,t),this}values(){return i(this,s,"f").values()}get size(){return i(this,s,"f").size}}r.SnapIdMap=c,s=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1588,{"./DeferredPromise":1585,"./KeyringSnapControllerClient":1586,"./SnapIdMap":1587,"./logger":1590,"./types":1591,"./util":1592,"@ethereumjs/tx":380,"@metamask/eth-sig-util":1594,"@metamask/keyring-api":1743,"@metamask/superstruct":2494,"@metamask/utils":1608,events:3678,uuid:1619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g,y,b,v,w,_,T,k,S=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},E=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const I=e("@ethereumjs/tx"),P=e("@metamask/eth-sig-util"),j=e("@metamask/keyring-api"),C=e("@metamask/superstruct"),A=e("@metamask/utils"),x=e("events"),R=e("uuid"),O=e("./DeferredPromise"),M=e("./KeyringSnapControllerClient"),N=e("./logger"),B=e("./SnapIdMap"),L=e("./types"),D=e("./util");function H(e){return(0,j.isEvmAccountType)(e.type)?e.address.toLowerCase():e.address}r.SNAP_KEYRING_TYPE="Snap Keyring";class $ extends x.EventEmitter{constructor(e,t){super(),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),this.type=$.type,S(this,n,new M.KeyringSnapControllerClient({controller:e}),"f"),S(this,a,new B.SnapIdMap,"f"),S(this,i,new B.SnapIdMap,"f"),S(this,o,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,C.assert)(t,L.SnapMessageStruct),t.method){case`${j.KeyringEvent.AccountCreated}`:return E(this,s,"m",c).call(this,e,t);case`${j.KeyringEvent.AccountUpdated}`:return E(this,s,"m",u).call(this,e,t);case`${j.KeyringEvent.AccountDeleted}`:return E(this,s,"m",l).call(this,e,t);case`${j.KeyringEvent.RequestApproved}`:return E(this,s,"m",d).call(this,e,t);case`${j.KeyringEvent.RequestRejected}`:return E(this,s,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:E(this,i,"f").toObject()}}async deserialize(e){e!==undefined&&S(this,i,B.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,D.unique)([...E(this,i,"f").values()].map((({account:e})=>H(e))))}async getAccountsBySnapId(e){return(0,D.unique)([...E(this,i,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>H(e))))}async signTransaction(e,t,r={}){const n=t.common.chainId(),i=(0,D.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,A.bigIntToHex)(n)}),a=await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.SignTransaction,params:[i],chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,`${n}`)}),o=(0,C.mask)(a,(0,C.object)({r:(0,C.string)(),s:(0,C.string)(),v:(0,C.string)()}));return I.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:P.SignTypedDataVersion.V1}){const n={[P.SignTypedDataVersion.V1]:j.EthMethod.SignTypedDataV1,[P.SignTypedDataVersion.V3]:j.EthMethod.SignTypedDataV3,[P.SignTypedDataVersion.V4]:j.EthMethod.SignTypedDataV4}[r.version]||j.EthMethod.SignTypedDataV1,i=t.domain?.chainId;return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:n,params:(0,D.toJson)([e,t]),...i===undefined?{}:{chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,`${i}`)}}),j.EthBytesStruct)}async signMessage(e,t){return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.Sign,params:(0,D.toJson)([e,t])}),j.EthBytesStruct)}async signPersonalMessage(e,t){return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.PersonalSign,params:(0,D.toJson)([t,e])}),j.EthBytesStruct)}async prepareUserOperation(e,t,r){return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.PrepareUserOperation,params:(0,D.toJson)(t),noPending:!0,chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),j.EthBaseUserOperationStruct)}async patchUserOperation(e,t,r){return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.PatchUserOperation,params:(0,D.toJson)([t]),noPending:!0,chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),j.EthUserOperationPatchStruct)}async signUserOperation(e,t,r){return(0,D.strictMask)(await E(this,s,"m",f).call(this,{address:e,method:j.EthMethod.SignUserOperation,params:(0,D.toJson)([t]),chainId:(0,A.toCaipChainId)(A.KnownCaipNamespace.Eip155,r.chainId)}),j.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=E(this,s,"m",_).call(this,e);E(this,i,"f").delete(r,t.id);try{await E(this,n,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,D.equalsIgnoreCase)(t,e)))}listAccounts(){return[...E(this,i,"f").values()].map((({account:e,snapId:t})=>{const r=E(this,s,"m",T).call(this,t);return{...e,address:H(e),metadata:{name:"",importTime:0,keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=$,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakSet,c=async function(e,t){(0,C.assert)(t,j.AccountCreatedEventStruct);const{account:r,accountNameSuggestion:s,displayConfirmation:n}=t.params,a=H(r);if(await E(this,o,"f").addressExists(a))throw new Error(`Account address '${a}' already exists`);if(E(this,i,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await E(this,o,"f").addAccount(a,e,(async t=>{t&&(E(this,i,"f").set(r.id,{account:r,snapId:e}),await E(this,o,"f").saveState())}),s,n),null},u=async function(e,t){(0,C.assert)(t,j.AccountUpdatedEventStruct);const{account:r}=t.params,{account:s}=E(this,i,"f").get(e,r.id)??(0,D.throwError)(`Account '${r.id}' not found`);if(!(0,D.equalsIgnoreCase)(s.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return E(this,i,"f").set(r.id,{account:r,snapId:e}),await E(this,o,"f").saveState(),null},l=async function(e,t){(0,C.assert)(t,j.AccountDeletedEventStruct);const{id:r}=t.params,s=E(this,i,"f").get(e,r);if(s===undefined)return null;const{account:n}=s;return await E(this,o,"f").removeAccount(H(n),e,(async e=>{e&&await E(this,o,"f").saveState()})),null},d=async function(e,t){(0,C.assert)(t,j.RequestApprovedEventStruct);const{id:r,result:s}=t.params,{promise:n}=E(this,a,"f").get(e,r)??(0,D.throwError)(`Request '${r}' not found`);return E(this,a,"f").delete(e,r),n.resolve(s),null},h=async function(e,t){(0,C.assert)(t,j.RequestRejectedEventStruct);const{id:r}=t.params,{promise:s}=E(this,a,"f").get(e,r)??(0,D.throwError)(`Request '${r}' not found`);return E(this,a,"f").delete(e,r),s.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:n="",noPending:i=!1}){const{account:a,snapId:o}=E(this,s,"m",_).call(this,e);if(!E(this,s,"m",m).call(this,a,t))throw new Error(`Method '${t}' not supported for account ${a.address}`);const c=(0,R.v4)(),u=E(this,s,"m",p).call(this,c,o),l=await E(this,s,"m",g).call(this,{snapId:o,requestId:c,account:a,method:t,params:r,chainId:n});if(i&&l.pending)throw new Error(`Request '${c}' to snap '${o}' is pending and noPending is true.`);return l.pending?((l.redirect?.message||l.redirect?.url)&&await E(this,s,"m",b).call(this,l.redirect,o),u.promise):E(this,s,"m",y).call(this,l,c,o)},m=function(e,t){return e.methods.includes(t)},p=function(e,t){const r=new O.DeferredPromise;return E(this,a,"f").set(e,{promise:r,snapId:t}),r},g=async function({snapId:e,requestId:t,account:r,method:s,params:i,chainId:o}){try{const a={id:t,scope:o,account:r.id,request:{method:s,...i!==undefined&&{params:i}}};return(0,N.projectLogger)("Submit Snap request: ",a),await E(this,n,"f").withSnapId(e).submitRequest(a)}catch(r){throw(0,N.projectLogger)("Snap Request failed: ",{requestId:t}),E(this,a,"f").delete(e,t),r}},y=function(e,t,r){return E(this,a,"f").delete(r,t),e.result},b=async function(e,t){const{message:r="",url:n=""}=e,i=E(this,s,"m",v).call(this,n);i&&E(this,s,"m",w).call(this,i,t),await E(this,o,"f").redirectUser(t,i,r)},v=function(e){return e?(0,D.sanitizeUrl)(e):e},w=function(e,t){const{origin:r}=new URL(e),i=E(this,n,"f").getController().get(t);if(!i)throw new Error(`Snap '${t}' not found.`);if(!E(this,s,"m",k).call(this,i).includes(r))throw new Error(`Redirect URL domain '${r}' is not an allowed origin by snap '${t}'`)},_=function(e){return[...E(this,i,"f").values()].find((({account:t})=>(0,D.equalsIgnoreCase)(t.address,e)))??(0,D.throwError)(`Account '${e}' not found`)},T=function(e){const t=E(this,n,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},k=function(e){return e.manifest.initialPermissions["endowment:keyring"]?.allowedOrigins??[]},$.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1589,{"./KeyringSnapControllerClient":1586,"./SnapKeyring":1588,"./types":1591},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./types"),r),n(e("./SnapKeyring"),r),n(e("./KeyringSnapControllerClient"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[159,{"../lib/util":134,"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller"),i=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,i.addHexPrefix)(e).toLowerCase(),to:()=>(0,i.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,i.addHexPrefix)(e),value:e=>(0,i.addHexPrefix)(e),data:e=>(0,i.addHexPrefix)(e),gas:e=>(0,i.addHexPrefix)(e),gasPrice:e=>(0,i.addHexPrefix)(e)},r={};return Object.keys(t).forEach((s=>{e[s]&&(r[s]=t[s](e[s]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1590,{"@metamask/utils":1608},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const s=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return s.createModuleLogger}}),r.projectLogger=(0,s.createProjectLogger)("eth-snap-keyring")}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/logger.js"}],[1591,{"@metamask/superstruct":2494,"@metamask/utils":1608},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const s=e("@metamask/superstruct"),n=e("@metamask/utils");r.SnapMessageStruct=(0,s.object)({method:(0,s.string)(),params:(0,s.optional)((0,s.union)([(0,s.array)(n.JsonStruct),(0,s.record)((0,s.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1592,{"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUrl=r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const s=e("@metamask/superstruct");r.strictMask=function(e,t,r){return(0,s.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},r.sanitizeUrl=function(e){return new URL(e).toString()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1593,{"./utils":1597,"@scure/base":2697,buffer:3392,tweetnacl:4859},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const a=e("@scure/base"),o=i(e("tweetnacl")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let s;try{s=a.base64.decode(e)}catch(e){throw new Error("Bad public key")}const n=a.utf8.decode(t),i=o.randomBytes(o.box.nonceLength),c=o.box(n,i,s,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.base64.encode(i),ephemPublicKey:a.base64.encode(r.publicKey),ciphertext:a.base64.encode(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:r}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const s=t.from(r,"hex"),n=o.box.keyPair.fromSecretKey(s).secretKey,i=a.base64.decode(e.nonce),c=a.base64.decode(e.ciphertext),u=a.base64.decode(e.ephemPublicKey),l=o.box.open(c,i,u,n);try{if(!l)throw new Error;const e=a.utf8.encode(l);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:s}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(s))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const n={data:r,padding:""},i=t.byteLength(JSON.stringify(n),"utf-8")%2048;let a=0;return i>0&&(a=2048-i-16),n.padding="0".repeat(a),u({publicKey:e,data:JSON.stringify(n),version:s})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const r=t.from(e,"hex"),s=o.box.keyPair.fromSecretKey(r).publicKey;return a.base64.encode(s)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1594,{"./encryption":1593,"./personal-sign":1595,"./sign-typed-data":1596,"./utils":1597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,n(e("./personal-sign"),r),n(e("./sign-typed-data"),r),n(e("./encryption"),r);var i=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return i.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return i.normalize}})}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/index.js"}],[1595,{"./utils":1597,"@ethereumjs/util":448},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const s=e("@ethereumjs/util"),n=e("./utils");function i(e,t){const r=(0,s.hashPersonalMessage)((0,n.legacyToBuffer)(e));return(0,n.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,n.isNullish)(t))throw new Error("Missing data parameter");if((0,n.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,n.legacyToBuffer)(t),i=(0,s.hashPersonalMessage)(r),a=(0,s.ecsign)(i,e);return(0,n.concatSig)((0,s.toBuffer)(a.v),a.r,a.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,n.isNullish)(e))throw new Error("Missing data parameter");if((0,n.isNullish)(t))throw new Error("Missing signature parameter");const r=i(e,t),a=(0,s.publicToAddress)(r);return(0,s.bufferToHex)(a)},r.extractPublicKey=function({data:e,signature:t}){if((0,n.isNullish)(e))throw new Error("Missing data parameter");if((0,n.isNullish)(t))throw new Error("Missing signature parameter");return`0x${i(e,t).toString("hex")}`}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1596,{"./utils":1597,"@ethereumjs/util":448,"@metamask/abi-utils":1262,"@metamask/abi-utils/dist/parsers":1271,"@metamask/abi-utils/dist/utils":1279,"@metamask/utils":1608,"ethereum-cryptography/keccak":3589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const s=e("@ethereumjs/util"),n=e("@metamask/abi-utils"),i=e("@metamask/abi-utils/dist/parsers"),a=e("@metamask/abi-utils/dist/utils"),o=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),s=(0,i.getLength)(e),n=BigInt(2)**BigInt(s)-BigInt(1);return(0,o.assert)(r>=-n&&r<=n,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const s=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=s>=49?s-BigInt(49)+BigInt(10):s>=17?s-BigInt(17)+BigInt(10):s}return(0,a.padStart)((0,o.bigIntToBytes)(t),20)}function m(e,t,r,i,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==i?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,s.arrToBufArr)((0,c.keccak256)(p(r,i,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(i===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof i)return["address",(0,a.padStart)((0,o.numberToBytes)(i),20)];if((0,o.isStrictHexString)(i))return["address",(0,o.add0x)(i)];if("string"==typeof i)return["address",f(i).subarray(0,20)]}if("bool"===r)return["bool",Boolean(i)];if("bytes"===r)return"number"==typeof i?i=(0,o.numberToBytes)(i):(0,o.isStrictHexString)(i)||"0x"===i?i=(0,o.hexToBytes)(i):"string"==typeof i&&(i=(0,o.stringToBytes)(i)),["bytes32",(0,s.arrToBufArr)((0,c.keccak256)(i))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof i?i<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(i))]:(0,o.isStrictHexString)(i)?["bytes32",(0,o.hexToBytes)(i)]:["bytes32",i];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,i);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return i="number"==typeof i?(0,o.numberToBytes)(i):(0,o.stringToBytes)(null!=i?i:""),["bytes32",(0,s.arrToBufArr)((0,c.keccak256)(i))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const a=r.slice(0,r.lastIndexOf("[")),o=i.map((r=>m(e,t,a,r,u)));return["bytes32",(0,s.arrToBufArr)((0,c.keccak256)((0,n.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[r,i]}function p(e,t,r,i){d(i,[l.V3,l.V4]);const a=["bytes32"],o=[v(e,r)];for(const s of r[e]){if(i===l.V3&&t[s.name]===undefined)continue;const[e,n]=m(r,s.name,s.type,t[s.name],i);a.push(e),o.push(n)}return(0,s.arrToBufArr)((0,n.encode)(a,o))}function g(e,t){let r="";const s=y(e,t);s.delete(e);const n=[e,...Array.from(s).sort()];for(const e of n){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const s=e.match(/^\w*/u);if([e]=s,r.has(e)||t[e]===undefined)return r;r.add(e);for(const s of t[e])y(s.type,t,r);return r}function b(e,t,r,n){d(n,[l.V3,l.V4]);const i=p(e,t,r,n),a=(0,c.keccak256)(i);return(0,s.arrToBufArr)(a)}function v(e,t){const r=(0,o.stringToBytes)(g(e,t));return(0,s.arrToBufArr)((0,c.keccak256)(r))}function w(e){const t={};for(const s in r.TYPED_MESSAGE_SCHEMA.properties)e[s]&&(t[s]=e[s]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function _(e,t){d(t,[l.V3,l.V4]);const r=w(e),{domain:s}=r;return b("EIP712Domain",s,{EIP712Domain:r.types.EIP712Domain},t)}function T(e,t){if((0,i.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,i.getArrayType)(e);return t.map((e=>T(r,e)))}if("address"===e){if((0,o.isStrictHexString)(t))return(0,a.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,a.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,i.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,i.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function k(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,a.padStart)((0,o.bigIntToBytes)(r),32);const s=(0,i.getLength)(e),n=BigInt.asIntN(s,r);return(0,o.signedBigIntToBytes)(n,32)}return t}))}function S(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(s=r,s.map((e=>"number"==typeof e?(0,a.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,a.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,a.padStart)(e.subarray(0,32),32):e)))};var s;if(t.startsWith("int")&&(0,i.isArrayType)(t)){const[s,n]=(0,i.getArrayType)(t);return{name:e,type:`bytes32[${null!=n?n:""}]`,value:k(s,r)}}return{name:e,type:t,value:T(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,s.arrToBufArr)((0,c.keccak256)((0,n.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,n.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,n.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:p,encodeType:g,findTypeDependencies:y,hashStruct:b,hashType:v,sanitizeData:w,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=w(e),n=[(0,o.hexToBytes)("1901")];return n.push(_(e,t)),"EIP712Domain"!==r.primaryType&&n.push(b(r.primaryType,r.message,r.types,t)),(0,s.arrToBufArr)((0,c.keccak256)((0,o.concatBytes)(n)))},eip712DomainHash:_},r.typedSignatureHash=function(e){const t=S(e);return(0,o.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:n}){if(d(n),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const i=n===l.V1?S(t):r.TypedDataUtils.eip712Hash(t,n),a=(0,s.ecsign)(i,e);return(0,u.concatSig)((0,s.arrToBufArr)((0,o.bigIntToBytes)(a.v)),a.r,a.s)},r.recoverTypedSignature=function({data:e,signature:t,version:n}){if(d(n),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const i=n===l.V1?S(e):r.TypedDataUtils.eip712Hash(e,n),a=(0,u.recoverPublicKey)(i,t),c=(0,s.publicToAddress)(a);return(0,o.bytesToHex)(c)}}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1597,{"@ethereumjs/util":448,"@metamask/utils":1608,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const s=e("@ethereumjs/util"),n=e("@metamask/utils");function i(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function a(e){return null===e||e===undefined}r.padWithZeroes=i,r.isNullish=a,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,s.isHexString)(e)?(0,s.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const a=(0,s.fromSigned)(t),o=(0,s.fromSigned)(r),c=(0,s.bufferToInt)(e),u=i((0,s.toUnsigned)(a).toString("hex"),64),l=i((0,s.toUnsigned)(o).toString("hex"),64),d=(0,n.remove0x)((0,n.numberToHex)(c));return(0,n.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,s.fromRpcSig)(t);return(0,s.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(a(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,n.numberToBytes)(e);e=(0,n.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,n.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1598,{"./errors.cjs":1606,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/assert.cjs"}],[1599,{"./assert.cjs":1598,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/base64.cjs"}],[16,{"../../../../shared/constants/bridge":4978,"../../../../shared/lib/fetch-with-cache":5012,"./validators":17},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchBridgeTxStatus=r.BRIDGE_STATUS_BASE_URL=void 0;var s,n=e("../../../../shared/constants/bridge"),i=(s=e("../../../../shared/lib/fetch-with-cache"))&&s.__esModule?s:{default:s},a=e("./validators");const o={"X-Client-Id":n.BRIDGE_CLIENT_ID},c=r.BRIDGE_STATUS_BASE_URL=`${n.BRIDGE_API_BASE_URL}/getTxStatus`;r.fetchBridgeTxStatus=async e=>{const{quote:t,...r}=e,s=Object.fromEntries(Object.entries(r).map((([e,t])=>[e,t.toString()]))),n=new URLSearchParams(s),u=`${c}?${n.toString()}`,l=await(0,i.default)({url:u,fetchOptions:{method:"GET",headers:o},cacheOptions:{cacheRefreshTime:0},functionName:"fetchBridgeTxStatus"});if(!(0,a.validateResponse)(a.validators,l,c))throw new Error("Invalid response from bridge");return l}}}},{package:"$root$",file:"app/scripts/controllers/bridge-status/utils.ts"}],[160,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:26,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[1600,{"./assert.cjs":1598,"./hex.cjs":1607,"@scure/base":2697,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function m(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=n-(n<o?a:c);s[e]=16*i+u}return s}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return m(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return m(e.toString(16))}function y(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?m(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=m,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=b,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=b(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/bytes.cjs"}],[1601,{"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,s.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,s.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1602,{"./base64.cjs":1599,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/checksum.cjs"}],[1603,{"./assert.cjs":1598,"./bytes.cjs":1600,"./hex.cjs":1607,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),u=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/coercers.cjs"}],[1604,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/collections.cjs"}],[1605,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1606,{"./misc.cjs":1612,"pony-cause":4247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/errors.cjs"}],[1607,{"./assert.cjs":1598,"./bytes.cjs":1600,"@metamask/superstruct":2494,"@noble/hashes/sha3":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/hex.cjs"}],[1608,{"./assert.cjs":1598,"./base64.cjs":1599,"./bytes.cjs":1600,"./caip-types.cjs":1601,"./checksum.cjs":1602,"./coercers.cjs":1603,"./collections.cjs":1604,"./encryption-types.cjs":1605,"./errors.cjs":1606,"./hex.cjs":1607,"./json.cjs":1609,"./keyring.cjs":1610,"./logging.cjs":1611,"./misc.cjs":1612,"./number.cjs":1613,"./opaque.cjs":1614,"./promise.cjs":1615,"./time.cjs":1616,"./transaction-types.cjs":1617,"./versions.cjs":1618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/index.cjs"}],[1609,{"./assert.cjs":1598,"./misc.cjs":1612,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/json.cjs"}],[161,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==n.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[1610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/keyring.cjs"}],[1611,{debug:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/logging.cjs"}],[1612,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/misc.cjs"}],[1613,{"./assert.cjs":1598,"./hex.cjs":1607},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/number.cjs"}],[1614,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/opaque.cjs"}],[1615,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/promise.cjs"}],[1616,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/time.cjs"}],[1617,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1618,{"./assert.cjs":1598,"@metamask/superstruct":2494,semver:4793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/eth-snap-keyring>@metamask/utils",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/utils/dist/versions.cjs"}],[1619,{"./nil.js":1622,"./parse.js":1623,"./stringify.js":1627,"./v1.js":1628,"./v3.js":1629,"./v4.js":1631,"./v5.js":1632,"./validate.js":1633,"./version.js":1634},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var s=h(e("./v1.js")),n=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[162,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:28,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[1620,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e){return 14+(e+64>>>9<<4)+1}function n(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,s,i,a){return n((o=n(n(t,e),n(s,a)))<<(c=i)|o>>>32-c,r);var o,c}function a(e,t,r,s,n,a,o){return i(t&r|~t&s,e,t,n,a,o)}function o(e,t,r,s,n,a,o){return i(t&s|r&~s,e,t,n,a,o)}function c(e,t,r,s,n,a,o){return i(t^r^s,e,t,n,a,o)}function u(e,t,r,s,n,a,o){return i(r^(t|~s),e,t,n,a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,s="0123456789abcdef";for(let n=0;n<r;n+=8){const r=e[n>>5]>>>n%32&255,i=parseInt(s.charAt(r>>>4&15)+s.charAt(15&r),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[s(t)-1]=t;let r=1732584193,i=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const s=r,h=i,f=l,m=d;r=a(r,i,l,d,e[t],7,-680876936),d=a(d,r,i,l,e[t+1],12,-389564586),l=a(l,d,r,i,e[t+2],17,606105819),i=a(i,l,d,r,e[t+3],22,-1044525330),r=a(r,i,l,d,e[t+4],7,-176418897),d=a(d,r,i,l,e[t+5],12,1200080426),l=a(l,d,r,i,e[t+6],17,-1473231341),i=a(i,l,d,r,e[t+7],22,-45705983),r=a(r,i,l,d,e[t+8],7,1770035416),d=a(d,r,i,l,e[t+9],12,-1958414417),l=a(l,d,r,i,e[t+10],17,-42063),i=a(i,l,d,r,e[t+11],22,-1990404162),r=a(r,i,l,d,e[t+12],7,1804603682),d=a(d,r,i,l,e[t+13],12,-40341101),l=a(l,d,r,i,e[t+14],17,-1502002290),i=a(i,l,d,r,e[t+15],22,1236535329),r=o(r,i,l,d,e[t+1],5,-165796510),d=o(d,r,i,l,e[t+6],9,-1069501632),l=o(l,d,r,i,e[t+11],14,643717713),i=o(i,l,d,r,e[t],20,-373897302),r=o(r,i,l,d,e[t+5],5,-701558691),d=o(d,r,i,l,e[t+10],9,38016083),l=o(l,d,r,i,e[t+15],14,-660478335),i=o(i,l,d,r,e[t+4],20,-405537848),r=o(r,i,l,d,e[t+9],5,568446438),d=o(d,r,i,l,e[t+14],9,-1019803690),l=o(l,d,r,i,e[t+3],14,-187363961),i=o(i,l,d,r,e[t+8],20,1163531501),r=o(r,i,l,d,e[t+13],5,-1444681467),d=o(d,r,i,l,e[t+2],9,-51403784),l=o(l,d,r,i,e[t+7],14,1735328473),i=o(i,l,d,r,e[t+12],20,-1926607734),r=c(r,i,l,d,e[t+5],4,-378558),d=c(d,r,i,l,e[t+8],11,-2022574463),l=c(l,d,r,i,e[t+11],16,1839030562),i=c(i,l,d,r,e[t+14],23,-35309556),r=c(r,i,l,d,e[t+1],4,-1530992060),d=c(d,r,i,l,e[t+4],11,1272893353),l=c(l,d,r,i,e[t+7],16,-155497632),i=c(i,l,d,r,e[t+10],23,-1094730640),r=c(r,i,l,d,e[t+13],4,681279174),d=c(d,r,i,l,e[t],11,-358537222),l=c(l,d,r,i,e[t+3],16,-722521979),i=c(i,l,d,r,e[t+6],23,76029189),r=c(r,i,l,d,e[t+9],4,-640364487),d=c(d,r,i,l,e[t+12],11,-421815835),l=c(l,d,r,i,e[t+15],16,530742520),i=c(i,l,d,r,e[t+2],23,-995338651),r=u(r,i,l,d,e[t],6,-198630844),d=u(d,r,i,l,e[t+7],10,1126891415),l=u(l,d,r,i,e[t+14],15,-1416354905),i=u(i,l,d,r,e[t+5],21,-57434055),r=u(r,i,l,d,e[t+12],6,1700485571),d=u(d,r,i,l,e[t+3],10,-1894986606),l=u(l,d,r,i,e[t+10],15,-1051523),i=u(i,l,d,r,e[t+1],21,-2054922799),r=u(r,i,l,d,e[t+8],6,1873313359),d=u(d,r,i,l,e[t+15],10,-30611744),l=u(l,d,r,i,e[t+6],15,-1560198380),i=u(i,l,d,r,e[t+13],21,1309151649),r=u(r,i,l,d,e[t+4],6,-145523070),d=u(d,r,i,l,e[t+11],10,-1120210379),l=u(l,d,r,i,e[t+2],15,718787259),i=u(i,l,d,r,e[t+9],21,-343485551),r=n(r,s),i=n(i,h),l=n(l,f),d=n(d,m)}return[r,i,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(s(t));for(let s=0;s<t;s+=8)r[s>>5]|=(255&e[s/8])<<s%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1621,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[1622,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1623,{"./validate.js":1633},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=(s=e("./validate.js"))&&s.__esModule?s:{default:s};var i=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1624,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1625,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let s;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(n)};const n=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1626,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function s(e,t,r,s){switch(e){case 0:return t&r^~t&s;case 1:case 3:return t^r^s;case 2:return t&r^t&s^r&s}}function n(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let s=0;s<16;++s)r[s]=e[64*t+4*s]<<24|e[64*t+4*s+1]<<16|e[64*t+4*s+2]<<8|e[64*t+4*s+3];o[t]=r}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=o[e][t];for(let e=16;e<80;++e)i[e]=n(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=n(a,5)+s(r,c,u,l)+d+t[r]+i[e]>>>0;d=l,l=u,u=n(c,30)>>>0,c=a,a=o}r[0]=r[0]+a>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1627,{"./validate.js":1633},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var s,n=(s=e("./validate.js"))&&s.__esModule?s:{default:s};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var o=function(e,t=0){const r=a(e,t);if(!(0,n.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1628,{"./rng.js":1625,"./stringify.js":1627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=(s=e("./rng.js"))&&s.__esModule?s:{default:s},i=e("./stringify.js");let a,o,c=0,u=0;var l=function(e,t,r){let s=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||a,h=e.clockseq!==undefined?e.clockseq:o;if(null==d||null==h){const t=e.random||(e.rng||n.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),m=e.nsecs!==undefined?e.nsecs:u+1;const p=f-c+(m-u)/1e4;if(p<0&&e.clockseq===undefined&&(h=h+1&16383),(p<0||f>c)&&e.nsecs===undefined&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=m,o=h,f+=122192928e5;const g=(1e4*(268435455&f)+m)%4294967296;l[s++]=g>>>24&255,l[s++]=g>>>16&255,l[s++]=g>>>8&255,l[s++]=255&g;const y=f/4294967296*1e4&268435455;l[s++]=y>>>8&255,l[s++]=255&y,l[s++]=y>>>24&15|16,l[s++]=y>>>16&255,l[s++]=h>>>8|128,l[s++]=255&h;for(let e=0;e<6;++e)l[s+e]=d[e];return t||(0,i.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1629,{"./md5.js":1620,"./v35.js":1630},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("./v35.js")),n=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,s.default)("v3",48,n.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[163,{"./fail-tx":285,"@metamask/transaction-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=e("@metamask/transaction-controller"),i=(s=e("./fail-tx"))&&s.__esModule?s:{default:s};r.default={version:29,migrate:(0,i.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===n.TransactionStatus.approved,r=e.submittedTime,s=Date.now();return t&&s-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[1630,{"./parse.js":1623,"./stringify.js":1627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function s(e,s,a,o){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof s&&(s=(0,i.default)(s)),16!==(null===(c=s)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(s),u.set(e,s.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=u[e];return a}return(0,n.unsafeStringify)(u)}try{s.name=e}catch(e){}return s.DNS=a,s.URL=o,s};var s,n=e("./stringify.js"),i=(s=e("./parse.js"))&&s.__esModule?s:{default:s};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1631,{"./native.js":1621,"./rng.js":1625,"./stringify.js":1627},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("./native.js")),n=a(e("./rng.js")),i=e("./stringify.js");function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){if(s.default.randomUUID&&!t&&!e)return s.default.randomUUID();const a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return(0,i.unsafeStringify)(a)};r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[1632,{"./sha1.js":1626,"./v35.js":1630},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("./v35.js")),n=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,s.default)("v5",80,n.default);r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1633,{"./regex.js":1624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=(s=e("./regex.js"))&&s.__esModule?s:{default:s};var i=function(e){return"string"==typeof e&&n.default.test(e)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1634,{"./validate.js":1633},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=(s=e("./validate.js"))&&s.__esModule?s:{default:s};var i=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[164,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:30,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[165,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:31,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[166,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:32,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1665,{"./trezor-bridge":1666,"./trezor-connect-bridge":1667,"./trezor-keyring":1668},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./trezor-keyring"),r),n(e("./trezor-bridge"),r),n(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1666,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1667,{"@trezor/connect-web":2928},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const a=i(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){a.default.on(a.DEVICE_EVENT,(e=>{var t;e.type===a.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await a.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return a.default.dispose(),Promise.resolve()}getPublicKey(e){return a.default.getPublicKey(e)}ethereumSignTransaction(e){return a.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return a.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return a.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[1668,{"@ethereumjs/tx":380,"@ethereumjs/util":448,"@trezor/connect-plugin-ethereum":2920,buffer:3392,events:3678,hdkey:3909},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var s,n,i,a,o,c,u=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return l(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const m=e("events"),p=d(e("@ethereumjs/util")),g=f(e("hdkey")),y=e("@ethereumjs/tx"),b=e("@trezor/connect-plugin-ethereum"),v="m/44'/60'/0'/0",w={[v]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},_="Trezor Hardware",T=1e3;async function k(e){return new Promise((t=>setTimeout(t,e)))}function S(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E extends m.EventEmitter{constructor({bridge:e}){if(super(),s.add(this),this.type=_,this.accounts=[],this.hdk=new g.default,this.hdPath=v,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,s,n;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:v,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(s=e.page)&&void 0!==s?s:0,this.perPage=null!==(n=e.perPage)&&void 0!==n?n:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((s=>{var n;s.success?(this.hdk.publicKey=t.from(s.payload.publicKey,"hex"),this.hdk.chainCode=t.from(s.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(n=s.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const n=this.unlockedAccount,i=n+e;for(let e=n;e<i;e++){const t=h(this,s,"m",o).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,s,"m",n).call(this,1)}async getNextPage(){return h(this,s,"m",n).call(this,1)}async getPreviousPage(){return h(this,s,"m",n).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return S(r)?h(this,s,"m",i).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,s,"m",i).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=p.addHexPrefix(e.v),t.r=p.addHexPrefix(e.r),t.s=p.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,n)=>{this.unlock().then((i=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,s,"m",c).call(this,e),message:p.stripHexPrefix(t),hex:!0}).then((t=>{var s;if(t.success){t.payload.address!==p.toChecksumAddress(e)&&n(new Error("signature doesnt match the right address"));const s=`0x${t.payload.signature}`;r(s)}else n(new Error((null===(s=t.payload)||void 0===s?void 0:s.error)||"Unknown error"))})).catch((e=>{n(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===i?T:0)})).catch((e=>{n(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var n,i;const a=(0,b.transformTypedData)(t,"V4"===r),{types:o,message:u={},domain:l={},primaryType:d,domain_separator_hash:f,message_hash:m}=a,g=await this.unlock();await k("just unlocked"===g?T:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,s,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},o),{EIP712Domain:null!==(n=o.EIP712Domain)&&void 0!==n?n:[]}),message:u,domain:l,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=m?m:""});if(y.success){if(p.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(i=y.payload)||void 0===i?void 0:i.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!w[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,s=new WeakSet,n=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,n=r+this.perPage,i=[];for(let e=r;e<n;e++){const t=h(this,s,"m",o).call(this,"m",e);i.push({address:t,balance:null,index:e}),this.paths[p.toChecksumAddress(t)]=e}e(i)})).catch((e=>{t(e)}))}))},i=async function(e,t,r,n){var i,o;let u;u=S(r)?{to:h(this,s,"m",a).call(this,r.to),value:h(this,s,"m",a).call(this,r.value),data:h(this,s,"m",a).call(this,r.data),chainId:t,nonce:h(this,s,"m",a).call(this,r.nonce),gasLimit:h(this,s,"m",a).call(this,r.gasLimit),gasPrice:h(this,s,"m",a).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,s,"m",a).call(this,p.toBuffer(r.to))});try{const t=await this.unlock();await k("just unlocked"===t?T:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,s,"m",c).call(this,e),transaction:u});if(r.success){const t=n(r.payload),s=p.toChecksumAddress(p.addHexPrefix(t.getSenderAddress().toString("hex")));if(s!==p.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(i=r.payload)||void 0===i?void 0:i.error)||"Unknown error")}catch(e){throw new Error(null!==(o=null==e?void 0:e.toString())&&void 0!==o?o:"Unknown error")}},a=function(e){return p.bufferToHex(e).toString()},o=function(e,t){const r=this.hdk.derive(`${e}/${t}`),s=p.publicToAddress(r.publicKey,!0).toString("hex");return p.toChecksumAddress(`0x${s}`)},c=function(e){const t=p.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,s,"m",o).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=_}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[167,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:33,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[168,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:34,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[169,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:35,async migrate(e){const t=(0,s.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[17,{"../../../../shared/lib/swaps-utils":5017,"../../../../shared/modules/hexstring-utils":5036,"../../../../shared/types/bridge-status":5058,"./utils":16},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validators=r.validateResponse=void 0;var s=e("../../../../shared/lib/swaps-utils"),n=e("../../../../shared/modules/hexstring-utils"),i=e("../../../../shared/types/bridge-status"),a=e("./utils");const o=(e,t,r)=>null!==t&&t!==undefined&&(0,s.validateData)(e,t,r);r.validateResponse=o;const c=[{property:"chainId",type:"number",validator:e=>"number"==typeof e},{property:"address",type:"string",validator:e=>(0,n.isValidHexAddress)(e)},{property:"symbol",type:"string",validator:e=>"string"==typeof e},{property:"name",type:"string",validator:e=>"string"==typeof e},{property:"decimals",type:"number",validator:e=>"number"==typeof e},{property:"icon",type:"string|undefined",validator:e=>e===undefined||"string"==typeof e}],u=e=>o(c,e,a.BRIDGE_STATUS_BASE_URL),l=[{property:"chainId",type:"number|string",validator:e=>"number"==typeof e||"string"==typeof e},{property:"txHash",type:"string",validator:s.validHex},{property:"amount",type:"string|undefined",validator:e=>e===undefined||"string"==typeof e},{property:"token",type:"object|undefined",validator:e=>e===undefined||u(e)}],d=[{property:"chainId",type:"number|string",validator:e=>"number"==typeof e||"string"==typeof e},{property:"amount",type:"string|undefined",validator:e=>e===undefined||"string"==typeof e},{property:"txHash",type:"string|undefined",validator:e=>e===undefined||"string"==typeof e},{property:"token",type:"object|undefined",validator:e=>e===undefined||e&&"object"==typeof e&&0===Object.keys(e).length||u(e)}];r.validators=[{property:"status",type:"string",validator:e=>Object.values(i.StatusTypes).includes(e)},{property:"srcChain",type:"object",validator:e=>o(l,e,a.BRIDGE_STATUS_BASE_URL)},{property:"destChain",type:"object|undefined",validator:e=>e===undefined||(e=>o(d,e,a.BRIDGE_STATUS_BASE_URL))(e)},{property:"bridge",type:"string|undefined",validator:e=>e===undefined||Object.values(i.BridgeId).includes(e)},{property:"isExpectedToken",type:"boolean|undefined",validator:e=>e===undefined||"boolean"==typeof e},{property:"isUnrecognizedRouterAddress",type:"boolean|undefined",validator:e=>e===undefined||"boolean"==typeof e}]}}},{package:"$root$",file:"app/scripts/controllers/bridge-status/validators.ts"}],[170,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:36,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[1702,{"readable-stream":4520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const s=e("readable-stream");r.default=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,r=new s.Duplex({objectMode:!0,read:()=>undefined,write:function(e,s,n){t.handle(e,((e,t)=>{r.push(t)})),n()}});return t.on&&t.on("notification",(e=>{r.push(e)})),r}}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/createEngineStream.cjs"}],[1703,{"@metamask/safe-event-emitter":2143,"@metamask/utils":2620,"readable-stream":4520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const n=s(e("@metamask/safe-event-emitter")),i=e("@metamask/utils"),a=e("readable-stream");r.default=function(e={}){const t={},r=new a.Duplex({objectMode:!0,read:()=>undefined,write:function(r,n,a){let c=null;try{!(0,i.hasProperty)(r,"id")?function(r){e?.retryOnMessage&&r.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:r=0})=>{if(!e.id)return;if(r>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const s=t[e.id];s&&(s.retryCount=r+1),o(e)}));s.emit("notification",r)}(r):function(e){const{id:r}=e;if(null===r)return;const s=t[r];if(!s)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(s.res,e),setTimeout(s.end)}(r)}catch(e){c=e}a(c)}}),s=new n.default;return{events:s,middleware:(e,r,s,n)=>{t[e.id]={req:e,res:r,next:s,end:n},o(e)},stream:r};function o(e){r.push(e)}}}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/createStreamMiddleware.cjs"}],[1704,{"./createEngineStream.cjs":1702,"./createStreamMiddleware.cjs":1703},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createStreamMiddleware=r.createEngineStream=void 0;const n=s(e("./createEngineStream.cjs"));r.createEngineStream=n.default;const i=s(e("./createStreamMiddleware.cjs"));r.createStreamMiddleware=i.default}}},{package:"@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/json-rpc-middleware-stream/dist/index.cjs"}],[171,{"@metamask/controller-utils":1375,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,s={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){s[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,n.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),s[e][r]=t[r])}e.AddressBookController.addressBook=s}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[172,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:38,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[173,{"../../../shared/modules/hexstring-utils":5036,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("../../../shared/modules/hexstring-utils");const i="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",a="DAI",o="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===a&&(0,n.toChecksumHexAddress)(e.address)===i}r.default={version:39,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=o);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=o)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[174,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:40,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[175,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:41,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[176,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:42,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[177,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:43,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[178,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:44,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[179,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:45,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;n.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const n=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[18,{"../../../../shared/constants/network":4993,"../../../../shared/modules/bridge-utils/balance":5025,"../../../../shared/modules/conversion.utils":5030,"../../../../ui/pages/bridge/bridge.util":6117,"../../../../ui/pages/bridge/utils/quote":6145,"../../../../ui/pages/swaps/swaps.util":6714,"./constants":19,"./types":20,"@ethersproject/bignumber":485,"@ethersproject/contracts":494,"@ethersproject/providers":532,"@metamask/metamask-eth-abis":1844,"@metamask/polling-controller":2004,"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("@metamask/utils"),n=e("@metamask/polling-controller"),i=e("@ethersproject/contracts"),a=e("@metamask/metamask-eth-abis"),o=e("@ethersproject/providers"),c=e("@ethersproject/bignumber"),u=e("../../../../ui/pages/bridge/bridge.util"),l=e("../../../../ui/pages/swaps/swaps.util"),d=e("../../../../shared/modules/conversion.utils"),h=e("../../../../ui/pages/bridge/utils/quote"),f=e("../../../../shared/modules/bridge-utils/balance"),m=e("../../../../shared/constants/network"),p=e("./constants"),g=e("./types");function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t,r){v(e,t),t.set(e,r)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t){return e.get(T(e,t))}function _(e,t,r){return e.set(T(e,t),r),r}function T(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const k={bridgeState:{persist:!1,anonymous:!1}},S="Reset controller state";var E=new WeakMap,I=new WeakMap,P=new WeakMap,j=new WeakMap,C=new WeakMap,A=new WeakMap,x=new WeakMap,R=new WeakSet;class O extends((0,n.StaticIntervalPollingController)()){constructor({messenger:e,getLayer1GasFee:t}){var r,n;super({name:p.BRIDGE_CONTROLLER_NAME,metadata:k,messenger:e,state:{bridgeState:p.DEFAULT_BRIDGE_CONTROLLER_STATE}}),v(r=this,n=R),n.add(r),b(this,E,void 0),b(this,I,void 0),y(this,"_executePoll",(async e=>{await w(j,this).call(this,e)})),y(this,"updateBridgeQuoteRequestParams",(async e=>{var t;this.stopAllPolling(),null===(t=w(E,this))||void 0===t||t.abort("Quote request updated");const{bridgeState:r}=this.state,n={...p.DEFAULT_BRIDGE_CONTROLLER_STATE.quoteRequest,...e};if(this.update((e=>{e.bridgeState={...r,quoteRequest:n,quotes:p.DEFAULT_BRIDGE_CONTROLLER_STATE.quotes,quotesLastFetched:p.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLastFetched,quotesLoadingStatus:p.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesLoadingStatus,quotesRefreshCount:p.DEFAULT_BRIDGE_CONTROLLER_STATE.quotesRefreshCount}})),(0,h.isValidQuoteRequest)(n)){const t=T(R,this,M).call(this).address,r=(0,s.add0x)((0,d.decimalToHex)(n.srcChainId)),i=e.insufficientBal||!await w(P,this).call(this,n),a=T(R,this,B).call(this,r);this.startPolling({networkClientId:a,updatedQuoteRequest:{...n,walletAddress:t,insufficientBal:i}})}})),b(this,P,(async e=>{var t;const r=T(R,this,M).call(this).address,n=(0,s.add0x)((0,d.decimalToHex)(e.srcChainId)),i=null===(t=T(R,this,N).call(this))||void 0===t?void 0:t.provider;return i&&await(0,f.hasSufficientBalance)(i,r,e.srcTokenAddress,e.srcTokenAmount,n)})),y(this,"resetState",(()=>{var e;this.stopAllPolling(),null===(e=w(E,this))||void 0===e||e.abort(S),this.update((e=>{e.bridgeState={...p.DEFAULT_BRIDGE_CONTROLLER_STATE,quotes:[],bridgeFeatureFlags:e.bridgeState.bridgeFeatureFlags}}))})),y(this,"setBridgeFeatureFlags",(async()=>{const{bridgeState:e}=this.state,t=await(0,u.fetchBridgeFeatureFlags)();this.update((r=>{r.bridgeState={...e,bridgeFeatureFlags:t}})),this.setIntervalLength(t[g.BridgeFeatureFlagsKey.EXTENSION_CONFIG].refreshRate)})),y(this,"selectSrcNetwork",(async e=>{await w(A,this).call(this,e,"srcTopAssets"),await w(x,this).call(this,e,"srcTokens")})),y(this,"selectDestNetwork",(async e=>{await w(A,this).call(this,e,"destTopAssets"),await w(x,this).call(this,e,"destTokens")})),b(this,j,(async({networkClientId:e,updatedQuoteRequest:t})=>{var r;if(null===(r=w(E,this))||void 0===r||r.abort("New quote request"),_(E,this,new AbortController),t.srcChainId===t.destChainId)return;const{bridgeState:s}=this.state;this.update((e=>{e.bridgeState={...s,quotesLoadingStatus:p.RequestStatus.LOADING,quoteRequest:t}}));const{maxRefreshCount:n}=s.bridgeFeatureFlags[g.BridgeFeatureFlagsKey.EXTENSION_CONFIG],i=s.quotesRefreshCount+1;try{const e=await(0,u.fetchBridgeQuotes)(t,w(E,this).signal);(t.insufficientBal&&i>=1||!t.insufficientBal&&i>=n)&&this.stopAllPolling();const r=await w(C,this).call(this,e);this.update((e=>{e.bridgeState={...e.bridgeState,quotes:r,quotesLastFetched:Date.now(),quotesLoadingStatus:p.RequestStatus.FETCHED,quotesRefreshCount:i}}))}catch(e){const t="AbortError"===e.name;if(e===S||t)return;this.update((e=>{e.bridgeState={...s,quotesLoadingStatus:p.RequestStatus.ERROR,quotesRefreshCount:i}})),console.log("Failed to fetch bridge quotes",e)}})),b(this,C,(async e=>await Promise.all(e.map((async e=>{const{quote:t,trade:r,approval:n}=e,i=(0,s.add0x)((0,d.decimalToHex)(t.srcChainId));if([m.CHAIN_IDS.OPTIMISM.toString(),m.CHAIN_IDS.BASE.toString()].includes(i)){const t=e=>{var t;return{from:e.from,to:e.to,value:e.value,data:e.data,gasLimit:null===(t=e.gasLimit)||void 0===t?void 0:t.toString()}},s=n?await w(I,this).call(this,{transactionParams:t(n),chainId:i}):"0",a=await w(I,this).call(this,{transactionParams:t(r),chainId:i});return{...e,l1GasFeesInHexWei:(0,d.sumHexes)(s,a)}}return e}))))),b(this,A,(async(e,t)=>{const{bridgeState:r}=this.state,s=await(0,l.fetchTopAssetsList)(e);this.update((e=>{e.bridgeState={...r,[t]:s}}))})),b(this,x,(async(e,t)=>{const{bridgeState:r}=this.state,s=await(0,u.fetchBridgeTokens)(e);this.update((e=>{e.bridgeState={...r,[t]:s}}))})),y(this,"getBridgeERC20Allowance",(async(e,t)=>{var r;const s=null===(r=T(R,this,N).call(this))||void 0===r?void 0:r.provider;if(!s)throw new Error("No provider found");const n=new o.Web3Provider(s),u=new i.Contract(e,a.abiERC20,n),{address:l}=T(R,this,M).call(this),d=await u.allowance(l,p.METABRIDGE_CHAIN_TO_ADDRESS_MAP[t]);return c.BigNumber.from(d).toString()})),this.setIntervalLength(p.REFRESH_INTERVAL_MS),_(E,this,new AbortController),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:setBridgeFeatureFlags`,this.setBridgeFeatureFlags.bind(this)),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:selectSrcNetwork`,this.selectSrcNetwork.bind(this)),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:selectDestNetwork`,this.selectDestNetwork.bind(this)),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:updateBridgeQuoteRequestParams`,this.updateBridgeQuoteRequestParams.bind(this)),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:resetState`,this.resetState.bind(this)),this.messagingSystem.registerActionHandler(`${p.BRIDGE_CONTROLLER_NAME}:getBridgeERC20Allowance`,this.getBridgeERC20Allowance.bind(this)),_(I,this,t)}}function M(){return this.messagingSystem.call("AccountsController:getSelectedAccount")}function N(){return this.messagingSystem.call("NetworkController:getSelectedNetworkClient")}function B(e){return this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e)}r.default=O}}},{package:"$root$",file:"app/scripts/controllers/bridge/bridge-controller.ts"}],[180,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:46,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[181,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:47,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[182,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:48,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,s,a,o,c,u,l;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&i.test(d.chainId))&&"localhost"!==d.type){if(null!==(s=e.NetworkController)&&void 0!==s&&s.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(a=e.CachedBalancesController)||void 0===a||delete a.cachedBalances;const f=null===(o=e.TransactionController)||void 0===o?void 0:o.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&n.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const m=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(m).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(m[e],t),m[t]?function(e,t,r){const s=e[t]||{},n={...e[r]};Object.keys(s).forEach((e=>{if(n[e]&&"object"==typeof n[e]){const t={};new Set([...Object.keys(n[e]),...Object.keys(s[e]||{})]).forEach((r=>{var i;t[r]=n[e][r]||(null===(i=s[e])||void 0===i?void 0:i[r])||""})),n[e]=t}else s[e]&&"object"==typeof s[e]&&(n[e]=s[e])})),e[r]=n}(m,e,t):m[t]=m[e],delete m[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(u=u.incomingTxLastFetchedBlocksByNetwork)||void 0===u||delete u.localhost;const p=null===(l=e.PreferencesController)||void 0===l?void 0:l.accountTokens;p&&Object.keys(p).forEach((e=>{var t,r;const s=(null===(t=p[e])||void 0===t?void 0:t.localhost)||[];if(s.length>0){const t=p[e].rpc||[];t.length>0?p[e].rpc=function(e,t){const r=i(e),s=i(t),n=[];return new Set([...Object.keys(r),...Object.keys(s)]).forEach((e=>{n.push({...r[e],...s[e]})})),n;function i(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(s,t):p[e].rpc=s}null===(r=p[e])||void 0===r||delete r.localhost}));return e}(r),t}};const n=/^0x[0-9a-f]+$/iu,i=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[183,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:49,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:s}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),s!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=s,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[1833,{"@metamask/base-controller":1349,events:3678,uuid:4904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const s=e("@metamask/base-controller"),n=e("events"),i=e("uuid");class a extends s.BaseControllerV1{addRequestToMessageParams(e,t){const r={...e};return t&&(r.requestId=t.id,r.origin=t.origin),r}createUnapprovedMessage(e,t,r){return{id:(0,i.v1)(),messageParams:e,securityAlertResponse:r?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}constructor(e,t,r,s,i){super(e,t),this.hub=new n.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=s??[],this.getCurrentChainId=i,this.initialize()}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:r,...s}=e;return new Promise(((e,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return n(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return n(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return n(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(s)}`))}}))}))}}r.AbstractMessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.cjs"}],[1834,{"./AbstractMessageManager.cjs":1833,"./utils.cjs":1838,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const s=e("@metamask/controller-utils"),n=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}async addUnapprovedMessageAsync(e,t){(0,i.validateDecryptedMessageData)(e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return s(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return s(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return s(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t);e.data=(0,i.normalizeMessageData)(e.data);const n=this.createUnapprovedMessage(r,s.ApprovalType.EthDecrypt,t),a=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:a}),a}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.cjs"}],[1835,{"./AbstractMessageManager.cjs":1833,"./utils.cjs":1838,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const s=e("@metamask/controller-utils"),n=e("./AbstractMessageManager.cjs"),i=e("./utils.cjs");class a extends n.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}async addUnapprovedMessageAsync(e,t){(0,i.validateEncryptionPublicKeyMessageData)(e);const r=await this.addUnapprovedMessage(e,t);return new Promise(((t,s)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return s(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return s(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}async addUnapprovedMessage(e,t){const r=this.addRequestToMessageParams(e,t),n=this.createUnapprovedMessage(r,s.ApprovalType.EthGetEncryptionPublicKey,t),i=n.id;return await this.addMessage(n),this.hub.emit("unapprovedMessage",{...r,metamaskId:i}),i}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.cjs"}],[1836,{"./AbstractMessageManager.cjs":1833,"./DecryptMessageManager.cjs":1834,"./EncryptionPublicKeyManager.cjs":1835,"./types.cjs":1837},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./AbstractMessageManager.cjs"),r),n(e("./EncryptionPublicKeyManager.cjs"),r),n(e("./DecryptMessageManager.cjs"),r),n(e("./types.cjs"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.cjs"}],[1837,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/types.cjs"}],[1838,{"@metamask/controller-utils":1375,"@metamask/utils":2620,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.normalizeMessageData=void 0;const s=e("@metamask/controller-utils"),n=e("@metamask/utils"),i=/^[0-9A-Fa-f]+$/gu;function a(e,t){if(!e||"string"!=typeof e||!(0,s.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,n.remove0x)(e);if(t.match(i))return(0,n.add0x)(t)}catch(e){}return(0,n.bytesToHex)(t.from(e,"utf8"))},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;a(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;a(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.cjs"}],[1839,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={snapId:"npm:@metamask/message-signing-snap",manifest:{version:"0.4.0",description:"Automatic message signing of MetaMask tagged messages",proposedName:"MetaMask Message Signing Snap",repository:{type:"git",url:"https://github.com/MetaMask/message-signing-snap.git"},source:{shasum:"LAgptN++khoaukUy3XKLBOO+KSU41rPiLsLFk1Uwuws=",location:{npm:{filePath:"dist/bundle.js",iconPath:"images/icon.svg",packageName:"@metamask/message-signing-snap",registry:"https://registry.npmjs.org/"}}},initialConnections:{"https://portfolio.metamask.io":{},"https://portfolio-builds.metafi-dev.codefi.network":{}},initialPermissions:{snap_getEntropy:{},"endowment:rpc":{dapps:!0,snaps:!1}},manifestVersion:"0.1"},files:[{path:"images/icon.svg",value:'<svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="500" height="500" fill="black"/>\n<g filter="url(#filter0_f_8_91)">\n<path d="M249.444 373.519C249.444 373.519 364.118 343.192 364.118 257.188L378.333 248.251L364.118 239.314L378.333 230.378L364.118 221.441V203.568V185.695V149.948V114.202L301.639 132.596C267.566 142.628 231.323 142.628 197.25 132.596L134.771 114.202V149.948V167.821V185.695V203.568V221.441L120.556 230.378L134.771 239.314L120.556 248.251L134.771 257.188C134.771 343.192 249.444 373.519 249.444 373.519Z" fill="#F1CA77"/>\n</g>\n<path d="M249.445 406.215C249.445 406.215 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 406.215 249.445 406.215Z" fill="#233447"/>\n<path d="M249.445 399.107C249.445 399.107 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 399.107 249.445 399.107Z" fill="#123AF0"/>\n<path d="M249.445 392C249.445 392 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 392 249.445 392Z" fill="#CD6116"/>\n<path d="M249.445 382.049C249.445 382.049 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 382.049 249.445 382.049Z" fill="#E4751F"/>\n<path d="M249.445 370.676C249.445 370.676 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888L249.445 162.179L134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 370.676 249.445 370.676Z" fill="#F6851B"/>\n<path d="M249.445 352.196C249.445 352.196 364.118 348.879 364.118 262.874L378.333 253.937L364.118 245.001L378.333 236.064L364.118 227.127V209.254V191.381V155.634V119.888C290.105 147.184 208.784 147.184 134.771 119.888V155.634V173.508V191.381V209.254V227.127L120.556 236.064L134.771 245.001L120.556 253.937L134.771 262.874C134.771 348.879 249.445 352.196 249.445 352.196Z" fill="url(#paint0_linear_8_91)"/>\n<defs>\n<filter id="filter0_f_8_91" x="94.9674" y="88.6133" width="308.954" height="310.494" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n<feFlood flood-opacity="0" result="BackgroundImageFix"/>\n<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>\n<feGaussianBlur stdDeviation="12.7941" result="effect1_foregroundBlur_8_91"/>\n</filter>\n<linearGradient id="paint0_linear_8_91" x1="144.012" y1="132.09" x2="425.482" y2="446.967" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F1CA77"/>\n<stop offset="1" stop-color="#F6851B"/>\n</linearGradient>\n</defs>\n</svg>\n'},{path:"dist/bundle.js",value:'(()=>{var e={463:e=>{e.exports=a,a.default=a,a.stable=u,a.stableStringify=u;var t="[...]",n="[Circular]",r=[],s=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,n,a){var o;void 0===a&&(a=i()),c(e,"",0,[],void 0,0,a);try{o=0===s.length?JSON.stringify(e,t,n):JSON.stringify(e,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function o(e,t,n,i){var a=Object.getOwnPropertyDescriptor(i,n);void 0!==a.get?a.configurable?(Object.defineProperty(i,n,{value:e}),r.push([i,n,t,a])):s.push([t,n,e]):(i[n]=e,r.push([i,n,t]))}function c(e,r,s,i,a,d,u){var l;if(d+=1,"object"==typeof e&&null!==e){for(l=0;l<i.length;l++)if(i[l]===e)return void o(n,e,r,a);if(void 0!==u.depthLimit&&d>u.depthLimit)return void o(t,e,r,a);if(void 0!==u.edgesLimit&&s+1>u.edgesLimit)return void o(t,e,r,a);if(i.push(e),Array.isArray(e))for(l=0;l<e.length;l++)c(e[l],l,l,i,e,d,u);else{var h=Object.keys(e);for(l=0;l<h.length;l++){var f=h[l];c(e[f],f,l,i,e,d,u)}}i.pop()}}function d(e,t){return e<t?-1:e>t?1:0}function u(e,t,n,a){void 0===a&&(a=i());var o,c=l(e,"",0,[],void 0,0,a)||e;try{o=0===s.length?JSON.stringify(c,t,n):JSON.stringify(c,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var d=r.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return o}function l(e,s,i,a,c,u,h){var f;if(u+=1,"object"==typeof e&&null!==e){for(f=0;f<a.length;f++)if(a[f]===e)return void o(n,e,s,c);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==h.depthLimit&&u>h.depthLimit)return void o(t,e,s,c);if(void 0!==h.edgesLimit&&i+1>h.edgesLimit)return void o(t,e,s,c);if(a.push(e),Array.isArray(e))for(f=0;f<e.length;f++)l(e[f],f,f,a,e,u,h);else{var p={},m=Object.keys(e).sort(d);for(f=0;f<m.length;f++){var g=m[f];l(e[g],g,f,a,e,u,h),p[g]=e[g]}if(void 0===c)return p;r.push([c,s,e]),c[s]=p}a.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(s.length>0)for(var r=0;r<s.length;r++){var i=s[r];if(i[1]===t&&i[0]===n){n=i[2],s.splice(r,1);break}}return e.call(this,t,n)}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{onRpcRequest:()=>xs});var e={};n.r(e),n.d(e,{aK:()=>ur,e8:()=>Wn,DO:()=>Kn,dJ:()=>lr,OG:()=>hr,My:()=>Yn,Ph:()=>nr,lX:()=>rr,Id:()=>or,fg:()=>mr,qj:()=>ar,aT:()=>tr,r4:()=>dr,aY:()=>Hn,x:()=>vr,lq:()=>sr,z:()=>ir,zW:()=>Gn,Q5:()=>yr});var t={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},s={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function i(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}const a=(e,t)=>Object.hasOwnProperty.call(e,t);var o;!function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(o=o||(o={}));class c extends TypeError{constructor(e,t){let n;const{message:r,explanation:s,...i}=e,{path:a}=e,o=0===a.length?r:`At path: ${a.join(".")} -- ${r}`;super(s??o),null!=s&&(this.cause=o),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function d(e){return"object"==typeof e&&null!==e}function u(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function l(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:s,branch:i}=t,{type:a}=n,{refinement:o,message:c=`Expected a value of type \\`${a}\\`${o?` with refinement \\`${o}\\``:""}, but received: \\`${u(r)}\\``}=e;return{value:r,type:a,refinement:o,key:s[s.length-1],path:s,branch:i,...e,message:c}}function*h(e,t,n,r){(function(e){return d(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const s of e){const e=l(s,t,n,r);e&&(yield e)}}function*f(e,t,n={}){const{path:r=[],branch:s=[e],coerce:i=!1,mask:a=!1}=n,o={path:r,branch:s};if(i&&(e=t.coercer(e,o),a&&"type"!==t.type&&d(t.schema)&&d(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let c="valid";for(const r of t.validator(e,o))r.explanation=n.message,c="not_valid",yield[r,void 0];for(let[u,l,h]of t.entries(e,o)){const t=f(l,h,{path:void 0===u?r:[...r,u],branch:void 0===u?s:[...s,l],coerce:i,mask:a,message:n.message});for(const n of t)n[0]?(c=null===n[0].refinement||void 0===n[0].refinement?"not_valid":"not_refined",yield[n[0],void 0]):i&&(l=n[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):d(e)&&(void 0!==l||u in e)&&(e[u]=l))}if("not_valid"!==c)for(const r of t.refiner(e,o))r.explanation=n.message,c="not_refined",yield[r,void 0];"valid"===c&&(yield[void 0,e])}class p{constructor(e){const{type:t,schema:n,validator:r,refiner:s,coercer:i=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=i,this.validator=r?(e,t)=>h(r(e,t),t,this,e):()=>[],this.refiner=s?(e,t)=>h(s(e,t),t,this,e):()=>[]}assert(e,t){return m(e,this,t)}create(e,t){return g(e,this,t)}is(e){return y(e,this)}mask(e,t){return function(e,t,n){const r=v(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return v(e,this,t)}}function m(e,t,n){const r=v(e,t,{message:n});if(r[0])throw r[0]}function g(e,t,n){const r=v(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function y(e,t){return!v(e,t)[0]}function v(e,t,n={}){const r=f(e,t,n),s=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(s[0]){return[new c(s[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]}return[void 0,s[1]]}function _(e,t){return new p({type:e,schema:null,validator:t})}function w(e){let t;return new p({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function b(e){return new p({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${u(e)}`})}function x(e){const t=u(e),n=typeof e;return new p({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \\`${t}\\`, but received: ${u(n)}`})}function E(){return _("never",(()=>!1))}function k(){return _("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${u(e)}`))}function O(e){const t=e?Object.keys(e):[],n=E();return new p({type:"object",schema:e??null,*entries(r){if(e&&d(r)){const s=new Set(Object.keys(r));for(const n of t)s.delete(n),yield[n,r[n],e[n]];for(const e of s)yield[e,r[e],n]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`,coercer:e=>d(e)?{...e}:e})}function S(e){return new p({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function Z(e,t){return new p({type:"record",schema:null,*entries(n){if(d(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator:e=>d(e)||`Expected an object, but received: ${u(e)}`})}function N(){return _("string",(e=>"string"==typeof e||`Expected a string, but received: ${u(e)}`))}function T(e){const t=e.map((e=>e.type)).join(" | ");return new p({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const s=[];for(const t of e){const[...e]=f(n,t,r),[i]=e;if(!i?.[0])return[];for(const[t]of e)t&&s.push(t)}return[`Expected the value to satisfy a union of \\`${t}\\`, but received: ${u(n)}`,...s]}})}function A(e,t,n){return new p({...e,coercer:(r,s)=>y(r,t)?e.coercer(n(r,s),s):e.coercer(r,s)})}Error;function I(e){return function(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)&&"string"==typeof e.message?e.message:null==e?"":String(e)}(e).replace(/\\.$/u,"")}function j(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class C extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}const B=e=>O(e);function R({path:e,branch:t}){const n=e[e.length-1];return a(t[t.length-2],n)}function P(e){return new p({...e,type:`optional ${e.type}`,validator:(t,n)=>!R(n)||e.validator(t,n),refiner:(t,n)=>!R(n)||e.refiner(t,n)})}const $=T([x(null),_("boolean",(e=>"boolean"==typeof e)),_("finite number",(e=>y(e,k())&&Number.isFinite(e))),N(),b(w((()=>$))),Z(N(),w((()=>$)))]),L=A($,_("any",(()=>!0)),(e=>(function(e,t,n="Assertion failed",r=C){try{m(e,t)}catch(e){throw j(r,`${n}: ${I(e)}.`)}}(e,$),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function U(e){try{return function(e){g(e,L)}(e),!0}catch{return!1}}const M=x("2.0"),z=(q=T([k(),N()]),new p({...q,validator:(e,t)=>null===e||q.validator(e,t),refiner:(e,t)=>null===e||q.refiner(e,t)}));var q;const D=B({code:_("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${u(e)}`)),message:N(),data:P(L),stack:P(N())}),F=T([Z(N(),L),b(L)]);B({id:z,jsonrpc:M,method:N(),params:P(F)}),B({jsonrpc:M,method:N(),params:P(F)});O({id:z,jsonrpc:M,result:S(_("unknown",(()=>!0))),error:S(D)});const V=B({id:z,jsonrpc:M,result:L}),H=B({id:z,jsonrpc:M,error:D});T([V,H]);var K=t.internal,W=(J(K),"Unspecified server error.");function J(e,t="Unspecified error message. This is a bug, please report it."){if(function(e){return Number.isInteger(e)}(e)){const t=e.toString();if(a(s,t))return s[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return W}return t}function Y(e){return Array.isArray(e)?e.map((e=>U(e)?e:i(e)?G(e):null)):i(e)?G(e):U(e)?e:null}function G(e){return Object.getOwnPropertyNames(e).reduce(((t,n)=>{const r=e[n];return U(r)&&(t[n]=r),t}),{})}var X=n(463),Q=class extends Error{constructor(e,t,n){var r=(...e)=>{super(...e)};if(!Number.isInteger(e))throw new Error(\'"code" must be an integer.\');if(!t||"string"!=typeof t)throw new Error(\'"message" must be a non-empty string.\');!function(e){return i(e)&&a(e,"cause")&&i(e.cause)}(n)?r(t):(r(t,{cause:n.cause}),a(this,"cause")||Object.assign(this,{cause:n.cause})),void 0!==n&&(this.data=n),this.code=e}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=Y(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return X(this.serialize(),ee,2)}};function ee(e,t){if("[Circular]"!==t)return t}var te,ne,re=e=>ie(t.invalidParams,e),se=e=>ie(t.methodNotFound,e);function ie(e,t){const[n,r]=ae(t);return new Q(e,n??J(e),r)}function ae(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,n]}}return[]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`\'${e}\'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(te||(te={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(ne||(ne={}));const oe=te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ce=e=>{switch(typeof e){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(e)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(e)?oe.array:null===e?oe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?oe.promise:"undefined"!=typeof Map&&e instanceof Map?oe.map:"undefined"!=typeof Set&&e instanceof Set?oe.set:"undefined"!=typeof Date&&e instanceof Date?oe.date:oe.object;default:return oe.unknown}},de=te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ue extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const s of e.issues)if("invalid_union"===s.code)s.unionErrors.map(r);else if("invalid_return_type"===s.code)r(s.returnTypeError);else if("invalid_arguments"===s.code)r(s.argumentsError);else if(0===s.path.length)n._errors.push(t(s));else{let e=n,r=0;for(;r<s.path.length;){const n=s.path[r];r===s.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(s))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,te.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ue.create=e=>new ue(e);const le=(e,t)=>{let n;switch(e.code){case de.invalid_type:n=e.received===oe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,te.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${te.joinValues(e.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${te.joinValues(e.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${te.joinValues(e.options)}, received \'${e.received}\'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:te.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case de.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case de.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=t.defaultError,te.assertNever(e)}return{message:n}};let he=le;function fe(){return he}const pe=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};if(void 0!==s.message)return{...s,path:i,message:s.message};let o="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}};function me(e,t){const n=fe(),r=pe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===le?void 0:le].filter((e=>!!e))});e.common.issues.push(r)}class ge{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return ye;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return ge.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:s}=r;if("aborted"===t.status)return ye;if("aborted"===s.status)return ye;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!r.alwaysSet||(n[t.value]=s.value)}return{status:e.value,value:n}}}const ye=Object.freeze({status:"aborted"}),ve=e=>({status:"dirty",value:e}),_e=e=>({status:"valid",value:e}),we=e=>"aborted"===e.status,be=e=>"dirty"===e.status,xe=e=>"valid"===e.status,Ee=e=>"undefined"!=typeof Promise&&e instanceof Promise;function ke(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Oe(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}var Se,Ze,Ne;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Se||(Se={}));class Te{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ae=(e,t)=>{if(xe(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ue(e.common.issues);return this._error=t,this._error}}};function Ie(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(\'Can\\\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.\');if(t)return{errorMap:t,description:s};return{errorMap:(t,s)=>{var i,a;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:s.defaultError}:void 0===s.data?{message:null!==(i=null!=o?o:r)&&void 0!==i?i:s.defaultError}:"invalid_type"!==t.code?{message:s.defaultError}:{message:null!==(a=null!=o?o:n)&&void 0!==a?a:s.defaultError}},description:s}}class je{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ce(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ge,ctx:{common:e.parent.common,data:e.data,parsedType:ce(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ee(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},s=this._parseSync({data:e,path:r.path,parent:r});return Ae(r,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ce(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(Ee(r)?r:Promise.resolve(r));return Ae(n,s)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const s=e(t),i=()=>r.addIssue({code:de.custom,...n(t)});return"undefined"!=typeof Promise&&s instanceof Promise?s.then((e=>!!e||(i(),!1))):!!s||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new St({schema:this,typeName:Lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Zt.create(this,this._def)}nullable(){return Nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ot.create(this,this._def)}promise(){return Ot.create(this,this._def)}or(e){return ut.create([this,e],this._def)}and(e){return pt.create(this,e,this._def)}transform(e){return new St({...Ie(this._def),schema:this,typeName:Lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Tt({...Ie(this._def),innerType:this,defaultValue:t,typeName:Lt.ZodDefault})}brand(){return new Ct({typeName:Lt.ZodBranded,type:this,...Ie(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new At({...Ie(this._def),innerType:this,catchValue:t,typeName:Lt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Bt.create(this,e)}readonly(){return Rt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ce=/^c[^\\s-]{8,}$/i,Be=/^[0-9a-z]+$/,Re=/^[0-9A-HJKMNP-TV-Z]{26}$/,Pe=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,$e=/^[a-z0-9_-]{21}$/i,Le=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,Ue=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_\'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let Me;const ze=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,De=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Fe="((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))",Ve=new RegExp(`^${Fe}$`);function He(e){let t="([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\\\.\\\\d+)?`),t}function Ke(e){let t=`${Fe}T${He(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\\\d{2}:?\\\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class We extends je{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==oe.string){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.string,received:t.parsedType}),ye}const t=new ge;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,s=e.data.length<i.value;(r||s)&&(n=this._getOrReturnCtx(e,n),r?me(n,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&me(n,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Ue.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"email",code:de.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Me||(Me=new RegExp("^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$","u")),Me.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"emoji",code:de.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Pe.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"uuid",code:de.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)$e.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"nanoid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Ce.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid",code:de.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)Be.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"cuid2",code:de.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)Re.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"ulid",code:de.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),me(n,{validation:"url",code:de.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"regex",code:de.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){Ke(i).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Ve.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${He(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:de.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Le.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"duration",code:de.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"!==(s=i.version)&&s||!ze.test(r))&&("v6"!==s&&s||!qe.test(r))&&(n=this._getOrReturnCtx(e,n),me(n,{validation:"ip",code:de.invalid_string,message:i.message}),t.dirty())):"base64"===i.kind?De.test(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{validation:"base64",code:de.invalid_string,message:i.message}),t.dirty()):te.assertNever(i);var r,s;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:de.invalid_string,...Se.errToObj(n)})}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Se.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Se.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Se.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Se.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Se.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Se.errToObj(t)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new We({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Je(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}We.create=e=>{var t;return new We({checks:[],typeName:Lt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Ye extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==oe.number){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.number,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("int"===r.kind)te.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Je(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_finite,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ye({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&te.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ye.create=e=>new Ye({checks:[],typeName:Lt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Ge extends je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==oe.bigint){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.bigint,received:t.parsedType}),ye}let t;const n=new ge;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),me(t,{code:de.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):te.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(e,t,n,r){return new Ge({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Se.toString(r)}]})}_addCheck(e){return new Ge({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ge.create=e=>{var t;return new Ge({checks:[],typeName:Lt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ie(e)})};class Xe extends je{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==oe.boolean){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.boolean,received:t.parsedType}),ye}return _e(e.data)}}Xe.create=e=>new Xe({typeName:Lt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ie(e)});class Qe extends je{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==oe.date){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.date,received:t.parsedType}),ye}if(isNaN(e.data.getTime())){return me(this._getOrReturnCtx(e),{code:de.invalid_date}),ye}const t=new ge;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),me(n,{code:de.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):te.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Qe.create=e=>new Qe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Lt.ZodDate,...Ie(e)});class et extends je{_parse(e){if(this._getType(e)!==oe.symbol){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.symbol,received:t.parsedType}),ye}return _e(e.data)}}et.create=e=>new et({typeName:Lt.ZodSymbol,...Ie(e)});class tt extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.undefined,received:t.parsedType}),ye}return _e(e.data)}}tt.create=e=>new tt({typeName:Lt.ZodUndefined,...Ie(e)});class nt extends je{_parse(e){if(this._getType(e)!==oe.null){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.null,received:t.parsedType}),ye}return _e(e.data)}}nt.create=e=>new nt({typeName:Lt.ZodNull,...Ie(e)});class rt extends je{constructor(){super(...arguments),this._any=!0}_parse(e){return _e(e.data)}}rt.create=e=>new rt({typeName:Lt.ZodAny,...Ie(e)});class st extends je{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _e(e.data)}}st.create=e=>new st({typeName:Lt.ZodUnknown,...Ie(e)});class it extends je{_parse(e){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.never,received:t.parsedType}),ye}}it.create=e=>new it({typeName:Lt.ZodNever,...Ie(e)});class at extends je{_parse(e){if(this._getType(e)!==oe.undefined){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.void,received:t.parsedType}),ye}return _e(e.data)}}at.create=e=>new at({typeName:Lt.ZodVoid,...Ie(e)});class ot extends je{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==oe.array)return me(t,{code:de.invalid_type,expected:oe.array,received:t.parsedType}),ye;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,s=t.data.length<r.exactLength.value;(e||s)&&(me(t,{code:e?de.too_big:de.too_small,minimum:s?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(me(t,{code:de.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(me(t,{code:de.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Te(t,e,t.path,n))))).then((e=>ge.mergeArray(n,e)));const s=[...t.data].map(((e,n)=>r.type._parseSync(new Te(t,e,t.path,n))));return ge.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new ot({...this._def,minLength:{value:e,message:Se.toString(t)}})}max(e,t){return new ot({...this._def,maxLength:{value:e,message:Se.toString(t)}})}length(e,t){return new ot({...this._def,exactLength:{value:e,message:Se.toString(t)}})}nonempty(e){return this.min(1,e)}}function ct(e){if(e instanceof dt){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Zt.create(ct(r))}return new dt({...e._def,shape:()=>t})}return e instanceof ot?new ot({...e._def,type:ct(e.element)}):e instanceof Zt?Zt.create(ct(e.unwrap())):e instanceof Nt?Nt.create(ct(e.unwrap())):e instanceof mt?mt.create(e.items.map((e=>ct(e)))):e}ot.create=(e,t)=>new ot({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Lt.ZodArray,...Ie(t)});class dt extends je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=te.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==oe.object){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof it&&"strip"===this._def.unknownKeys))for(const e in n.data)s.includes(e)||i.push(e);const a=[];for(const e of s){const t=r[e],s=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new Te(n,s,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof it){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(me(n,{code:de.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new Te(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>ge.mergeObjectSync(t,e))):ge.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return Se.errToObj,new dt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,s,i,a;const o=null!==(i=null===(s=(r=this._def).errorMap)||void 0===s?void 0:s.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=Se.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new dt({...this._def,unknownKeys:"strip"})}passthrough(){return new dt({...this._def,unknownKeys:"passthrough"})}extend(e){return new dt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Lt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new dt({...this._def,catchall:e})}pick(e){const t={};return te.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}omit(e){const t={};return te.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new dt({...this._def,shape:()=>t})}deepPartial(){return ct(this)}partial(e){const t={};return te.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new dt({...this._def,shape:()=>t})}required(e){const t={};return te.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Zt;)e=e._def.innerType;t[n]=e}})),new dt({...this._def,shape:()=>t})}keyof(){return xt(te.objectKeys(this.shape))}}dt.create=(e,t)=>new dt({shape:()=>e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.strictCreate=(e,t)=>new dt({shape:()=>e,unknownKeys:"strict",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)}),dt.lazycreate=(e,t)=>new dt({shape:e,unknownKeys:"strip",catchall:it.create(),typeName:Lt.ZodObject,...Ie(t)});class ut extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new ue(e.ctx.common.issues)));return me(t,{code:de.invalid_union,unionErrors:n}),ye}));{let e;const r=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=r.map((e=>new ue(e)));return me(t,{code:de.invalid_union,unionErrors:s}),ye}}get options(){return this._def.options}}ut.create=(e,t)=>new ut({options:e,typeName:Lt.ZodUnion,...Ie(t)});const lt=e=>e instanceof wt?lt(e.schema):e instanceof St?lt(e.innerType()):e instanceof bt?[e.value]:e instanceof Et?e.options:e instanceof kt?te.objectValues(e.enum):e instanceof Tt?lt(e._def.innerType):e instanceof tt?[void 0]:e instanceof nt?[null]:e instanceof Zt?[void 0,...lt(e.unwrap())]:e instanceof Nt?[null,...lt(e.unwrap())]:e instanceof Ct||e instanceof Rt?lt(e.unwrap()):e instanceof At?lt(e._def.innerType):[];class ht extends je{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.object)return me(t,{code:de.invalid_type,expected:oe.object,received:t.parsedType}),ye;const n=this.discriminator,r=t.data[n],s=this.optionsMap.get(r);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(me(t,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=lt(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const s of t){if(r.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);r.set(s,n)}}return new ht({typeName:Lt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Ie(n)})}}function ft(e,t){const n=ce(e),r=ce(t);if(e===t)return{valid:!0,data:e};if(n===oe.object&&r===oe.object){const n=te.objectKeys(t),r=te.objectKeys(e).filter((e=>-1!==n.indexOf(e))),s={...e,...t};for(const n of r){const r=ft(e[n],t[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(n===oe.array&&r===oe.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const s=ft(e[r],t[r]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}return n===oe.date&&r===oe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class pt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(we(e)||we(r))return ye;const s=ft(e.value,r.value);return s.valid?((be(e)||be(r))&&t.dirty(),{status:t.value,value:s.data}):(me(n,{code:de.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}pt.create=(e,t,n)=>new pt({left:e,right:t,typeName:Lt.ZodIntersection,...Ie(n)});class mt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return me(n,{code:de.invalid_type,expected:oe.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return me(n,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Te(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>ge.mergeArray(t,e))):ge.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new mt({...this._def,rest:e})}}mt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mt({items:e,typeName:Lt.ZodTuple,rest:null,...Ie(t)})};class gt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return me(n,{code:de.invalid_type,expected:oe.object,received:n.parsedType}),ye;const r=[],s=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:s._parse(new Te(n,e,n.path,e)),value:i._parse(new Te(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?ge.mergeObjectAsync(t,r):ge.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new gt(t instanceof je?{keyType:e,valueType:t,typeName:Lt.ZodRecord,...Ie(n)}:{keyType:We.create(),valueType:e,typeName:Lt.ZodRecord,...Ie(t)})}}class yt extends je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return me(n,{code:de.invalid_type,expected:oe.map,received:n.parsedType}),ye;const r=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new Te(n,e,n.path,[i,"key"])),value:s._parse(new Te(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,s=await n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,s=n.value;if("aborted"===r.status||"aborted"===s.status)return ye;"dirty"!==r.status&&"dirty"!==s.status||t.dirty(),e.set(r.value,s.value)}return{status:t.value,value:e}}}}yt.create=(e,t,n)=>new yt({valueType:t,keyType:e,typeName:Lt.ZodMap,...Ie(n)});class vt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return me(n,{code:de.invalid_type,expected:oe.set,received:n.parsedType}),ye;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(me(n,{code:de.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(me(n,{code:de.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return ye;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>s._parse(new Te(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new vt({...this._def,minSize:{value:e,message:Se.toString(t)}})}max(e,t){return new vt({...this._def,maxSize:{value:e,message:Se.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vt.create=(e,t)=>new vt({valueType:e,minSize:null,maxSize:null,typeName:Lt.ZodSet,...Ie(t)});class _t extends je{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.function)return me(t,{code:de.invalid_type,expected:oe.function,received:t.parsedType}),ye;function n(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_arguments,argumentsError:n}})}function r(e,n){return pe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,fe(),le].filter((e=>!!e)),issueData:{code:de.invalid_return_type,returnTypeError:n}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Ot){const e=this;return _e((async function(...t){const a=new ue([]),o=await e._def.args.parseAsync(t,s).catch((e=>{throw a.addIssue(n(t,e)),a})),c=await Reflect.apply(i,this,o);return await e._def.returns._def.type.parseAsync(c,s).catch((e=>{throw a.addIssue(r(c,e)),a}))}))}{const e=this;return _e((function(...t){const a=e._def.args.safeParse(t,s);if(!a.success)throw new ue([n(t,a.error)]);const o=Reflect.apply(i,this,a.data),c=e._def.returns.safeParse(o,s);if(!c.success)throw new ue([r(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _t({...this._def,args:mt.create(e).rest(st.create())})}returns(e){return new _t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _t({args:e||mt.create([]).rest(st.create()),returns:t||st.create(),typeName:Lt.ZodFunction,...Ie(n)})}}class wt extends je{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}wt.create=(e,t)=>new wt({getter:e,typeName:Lt.ZodLazy,...Ie(t)});class bt extends je{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:de.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}function xt(e,t){return new Et({values:e,typeName:Lt.ZodEnum,...Ie(t)})}bt.create=(e,t)=>new bt({value:e,typeName:Lt.ZodLiteral,...Ie(t)});class Et extends je{constructor(){super(...arguments),Ze.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{expected:te.joinValues(n),received:t.parsedType,code:de.invalid_type}),ye}if(ke(this,Ze,"f")||Oe(this,Ze,new Set(this._def.values),"f"),!ke(this,Ze,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{received:t.data,code:de.invalid_enum_value,options:n}),ye}return _e(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Et.create(e,{...this._def,...t})}exclude(e,t=this._def){return Et.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ze=new WeakMap,Et.create=xt;class kt extends je{constructor(){super(...arguments),Ne.set(this,void 0)}_parse(e){const t=te.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){const e=te.objectValues(t);return me(n,{expected:te.joinValues(e),received:n.parsedType,code:de.invalid_type}),ye}if(ke(this,Ne,"f")||Oe(this,Ne,new Set(te.getValidEnumValues(this._def.values)),"f"),!ke(this,Ne,"f").has(e.data)){const e=te.objectValues(t);return me(n,{received:n.data,code:de.invalid_enum_value,options:e}),ye}return _e(e.data)}get enum(){return this._def.values}}Ne=new WeakMap,kt.create=(e,t)=>new kt({values:e,typeName:Lt.ZodNativeEnum,...Ie(t)});class Ot extends je{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.promise&&!1===t.common.async)return me(t,{code:de.invalid_type,expected:oe.promise,received:t.parsedType}),ye;const n=t.parsedType===oe.promise?t.data:Promise.resolve(t.data);return _e(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ot.create=(e,t)=>new Ot({type:e,typeName:Lt.ZodPromise,...Ie(t)});class St extends je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:e=>{me(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===r.type){const e=r.transform(n.data,s);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ye;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}));{if("aborted"===t.value)return ye;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?ye:"dirty"===r.status||"dirty"===t.value?ve(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ye:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ye:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xe(e))return e;const i=r.transform(e.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>xe(e)?Promise.resolve(r.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}te.assertNever(r)}}St.create=(e,t,n)=>new St({schema:e,typeName:Lt.ZodEffects,effect:t,...Ie(n)}),St.createWithPreprocess=(e,t,n)=>new St({schema:t,effect:{type:"preprocess",transform:e},typeName:Lt.ZodEffects,...Ie(n)});class Zt extends je{_parse(e){return this._getType(e)===oe.undefined?_e(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zt.create=(e,t)=>new Zt({innerType:e,typeName:Lt.ZodOptional,...Ie(t)});class Nt extends je{_parse(e){return this._getType(e)===oe.null?_e(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nt.create=(e,t)=>new Nt({innerType:e,typeName:Lt.ZodNullable,...Ie(t)});class Tt extends je{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Tt.create=(e,t)=>new Tt({innerType:e,typeName:Lt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ie(t)});class At extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ee(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}At.create=(e,t)=>new At({innerType:e,typeName:Lt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ie(t)});class It extends je{_parse(e){if(this._getType(e)!==oe.nan){const t=this._getOrReturnCtx(e);return me(t,{code:de.invalid_type,expected:oe.nan,received:t.parsedType}),ye}return{status:"valid",value:e.data}}}It.create=e=>new It({typeName:Lt.ZodNaN,...Ie(e)});const jt=Symbol("zod_brand");class Ct extends je{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Bt extends je{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),ve(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ye:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Bt({in:e,out:t,typeName:Lt.ZodPipeline})}}class Rt extends je{_parse(e){const t=this._def.innerType._parse(e),n=e=>(xe(e)&&(e.value=Object.freeze(e.value)),e);return Ee(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Pt(e,t={},n){return e?rt.create().superRefine(((r,s)=>{var i,a;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a,c="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...c,fatal:o})}})):rt.create()}Rt.create=(e,t)=>new Rt({innerType:e,typeName:Lt.ZodReadonly,...Ie(t)});const $t={object:dt.lazycreate};var Lt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Lt||(Lt={}));const Ut=We.create,Mt=Ye.create,zt=It.create,qt=Ge.create,Dt=Xe.create,Ft=Qe.create,Vt=et.create,Ht=tt.create,Kt=nt.create,Wt=rt.create,Jt=st.create,Yt=it.create,Gt=at.create,Xt=ot.create,Qt=dt.create,en=dt.strictCreate,tn=ut.create,nn=ht.create,rn=pt.create,sn=mt.create,an=gt.create,on=yt.create,cn=vt.create,dn=_t.create,un=wt.create,ln=bt.create,hn=Et.create,fn=kt.create,pn=Ot.create,mn=St.create,gn=Zt.create,yn=Nt.create,vn=St.createWithPreprocess,_n=Bt.create,wn={string:e=>We.create({...e,coerce:!0}),number:e=>Ye.create({...e,coerce:!0}),boolean:e=>Xe.create({...e,coerce:!0}),bigint:e=>Ge.create({...e,coerce:!0}),date:e=>Qe.create({...e,coerce:!0})},bn=ye;var xn=Object.freeze({__proto__:null,defaultErrorMap:le,setErrorMap:function(e){he=e},getErrorMap:fe,makeIssue:pe,EMPTY_PATH:[],addIssueToContext:me,ParseStatus:ge,INVALID:ye,DIRTY:ve,OK:_e,isAborted:we,isDirty:be,isValid:xe,isAsync:Ee,get util(){return te},get objectUtil(){return ne},ZodParsedType:oe,getParsedType:ce,ZodType:je,datetimeRegex:Ke,ZodString:We,ZodNumber:Ye,ZodBigInt:Ge,ZodBoolean:Xe,ZodDate:Qe,ZodSymbol:et,ZodUndefined:tt,ZodNull:nt,ZodAny:rt,ZodUnknown:st,ZodNever:it,ZodVoid:at,ZodArray:ot,ZodObject:dt,ZodUnion:ut,ZodDiscriminatedUnion:ht,ZodIntersection:pt,ZodTuple:mt,ZodRecord:gt,ZodMap:yt,ZodSet:vt,ZodFunction:_t,ZodLazy:wt,ZodLiteral:bt,ZodEnum:Et,ZodNativeEnum:kt,ZodPromise:Ot,ZodEffects:St,ZodTransformer:St,ZodOptional:Zt,ZodNullable:Nt,ZodDefault:Tt,ZodCatch:At,ZodNaN:It,BRAND:jt,ZodBranded:Ct,ZodPipeline:Bt,ZodReadonly:Rt,custom:Pt,Schema:je,ZodSchema:je,late:$t,get ZodFirstPartyTypeKind(){return Lt},coerce:wn,any:Wt,array:Xt,bigint:qt,boolean:Dt,date:Ft,discriminatedUnion:nn,effect:mn,enum:hn,function:dn,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Pt((t=>t instanceof e),t),intersection:rn,lazy:un,literal:ln,map:on,nan:zt,nativeEnum:fn,never:Yt,null:Kt,nullable:yn,number:Mt,object:Qt,oboolean:()=>Dt().optional(),onumber:()=>Mt().optional(),optional:gn,ostring:()=>Ut().optional(),pipeline:_n,preprocess:vn,promise:pn,record:an,set:cn,strictObject:en,string:Ut,symbol:Vt,transformer:mn,tuple:sn,undefined:Ht,union:tn,unknown:Jt,void:Gt,NEVER:bn,ZodIssueCode:de,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ue});function En(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function kn(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function On(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");En(e.outputLen),En(e.blockLen)}function Sn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Zn(e,t){kn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Nn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Tn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),An=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function In(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),kn(e),e}class jn{clone(){return this._cloneInto()}}function Cn(e=32){if(Nn&&"function"==typeof Nn.getRandomValues)return Nn.getRandomValues(new Uint8Array(e));if(Nn&&"function"==typeof Nn.randomBytes)return Nn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Bn=(e,t,n)=>e&t^e&n^t&n;class Rn extends jn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tn(this.buffer)}update(e){Sn(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=In(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Tn(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sn(this),Zn(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,d=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+d,o,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const a=Tn(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Pn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$n=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ln=new Uint32Array(64);class Un extends Rn{constructor(){super(64,32,8,!1),this.A=0|$n[0],this.B=0|$n[1],this.C=0|$n[2],this.D=0|$n[3],this.E=0|$n[4],this.F=0|$n[5],this.G=0|$n[6],this.H=0|$n[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Ln[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ln[e-15],n=Ln[e-2],r=An(t,7)^An(t,18)^t>>>3,s=An(n,17)^An(n,19)^n>>>10;Ln[e]=s+Ln[e-7]+r+Ln[e-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:o,G:c,H:d}=this;for(let e=0;e<64;e++){const t=d+(An(a,6)^An(a,11)^An(a,25))+((u=a)&o^~u&c)+Pn[e]+Ln[e]|0,l=(An(n,2)^An(n,13)^An(n,22))+Bn(n,r,s)|0;d=c,c=o,o=a,a=i+t|0,i=s,s=r,r=n,n=t+l|0}var u;n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(n,r,s,i,a,o,c,d)}roundClean(){Ln.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mn=function(e){const t=t=>e().update(In(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}((()=>new Un));class zn extends jn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,On(e);const n=In(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return Sn(this),this.iHash.update(e),this}digestInto(e){Sn(this),kn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qn=(e,t,n)=>new zn(e,t).update(n).digest();qn.create=(e,t)=>new zn(e,t);const Dn=BigInt(0),Fn=BigInt(1),Vn=BigInt(2);function Hn(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Kn(e){if(!Hn(e))throw new Error("Uint8Array expected")}function Wn(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const Jn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Yn(e){Kn(e);let t="";for(let n=0;n<e.length;n++)t+=Jn[e[n]];return t}function Gn(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Xn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Qn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function er(e){return e>=Qn._0&&e<=Qn._9?e-Qn._0:e>=Qn._A&&e<=Qn._F?e-(Qn._A-10):e>=Qn._a&&e<=Qn._f?e-(Qn._a-10):void 0}function tr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=er(e.charCodeAt(s)),i=er(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}function nr(e){return Xn(Yn(e))}function rr(e){return Kn(e),Xn(Yn(Uint8Array.from(e).reverse()))}function sr(e,t){return tr(e.toString(16).padStart(2*t,"0"))}function ir(e,t){return sr(e,t).reverse()}function ar(e,t,n){let r;if("string"==typeof t)try{r=tr(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Hn(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function or(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const cr=e=>"bigint"==typeof e&&Dn<=e;function dr(e,t,n){return cr(e)&&cr(t)&&cr(n)&&t<=e&&e<n}function ur(e,t,n,r){if(!dr(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function lr(e){let t;for(t=0;e>Dn;e>>=Fn,t+=1);return t}const hr=e=>(Vn<<BigInt(e-1))-Fn,fr=e=>new Uint8Array(e),pr=e=>Uint8Array.from(e);function mr(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=fr(e),s=fr(e),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...e)=>n(s,r,...e),c=(e=fr())=>{s=o(pr([0]),e),r=o(),0!==e.length&&(s=o(pr([1]),e),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return or(...n)};return(e,t)=>{let n;for(a(),c(e);!(n=t(d()));)c();return a(),n}}const gr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Hn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function yr(e,t,n={}){const r=(t,n,r)=>{const s=gr[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||s(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function vr(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const _r=BigInt(0),wr=BigInt(1),br=BigInt(2),xr=BigInt(3),Er=BigInt(4),kr=BigInt(5),Or=BigInt(8);BigInt(9),BigInt(16);function Sr(e,t){const n=e%t;return n>=_r?n:t+n}function Zr(e,t,n){if(n<=_r||t<_r)throw new Error("Expected power/modulo > 0");if(n===wr)return _r;let r=wr;for(;t>_r;)t&wr&&(r=r*e%n),e=e*e%n,t>>=wr;return r}function Nr(e,t,n){let r=e;for(;t-- >_r;)r*=r,r%=n;return r}function Tr(e,t){if(e===_r||t<=_r)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Sr(e,t),r=t,s=_r,i=wr,a=wr,o=_r;for(;n!==_r;){const e=r/n,t=r%n,c=s-a*e,d=i-o*e;r=n,n=t,s=a,i=o,a=c,o=d}if(r!==wr)throw new Error("invert: does not exist");return Sr(s,t)}function Ar(e){if(e%Er===xr){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Or===kr){const t=(e-kr)/Or;return function(e,n){const r=e.mul(n,br),s=e.pow(r,t),i=e.mul(n,s),a=e.mul(e.mul(i,br),s),o=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-wr)/br;let n,r,s;for(n=e-wr,r=0;n%br===_r;n/=br,r++);for(s=br;s<e&&Zr(s,t,e)!==e-wr;s++);if(1===r){const t=(e+wr)/Er;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+wr)/br;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=r,c=e.pow(e.mul(e.ONE,s),n),d=e.pow(a,i),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,wr<<BigInt(o-t-1));c=e.sqr(n),d=e.mul(d,n),u=e.mul(u,c),o=t}return d}}(e)}const Ir=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jr(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Cr(e,t,n=!1,r={}){if(e<=_r)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=jr(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Ar(e),o=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:hr(s),ZERO:_r,ONE:wr,create:t=>Sr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return _r<=t&&t<e},is0:e=>e===_r,isOdd:e=>(e&wr)===wr,neg:t=>Sr(-t,e),eql:(e,t)=>e===t,sqr:t=>Sr(t*t,e),add:(t,n)=>Sr(t+n,e),sub:(t,n)=>Sr(t-n,e),mul:(t,n)=>Sr(t*n,e),pow:(e,t)=>function(e,t,n){if(n<_r)throw new Error("Expected power > 0");if(n===_r)return e.ONE;if(n===wr)return t;let r=e.ONE,s=t;for(;n>_r;)n&wr&&(r=e.mul(r,s)),s=e.sqr(s),n>>=wr;return r}(o,e,t),div:(t,n)=>Sr(t*Tr(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Tr(t,e),sqrt:r.sqrt||(e=>a(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ir(e,i):sr(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?rr(e):nr(e)}});return Object.freeze(o)}function Br(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rr(e){const t=Br(e);return t+Math.ceil(t/2)}const Pr=BigInt(0),$r=BigInt(1),Lr=new WeakMap,Ur=new WeakMap;function Mr(e){return function(e){const t=Ir.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});yr(e,t)}(e.Fp),yr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jr(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function zr(e){void 0!==e.lowS&&Wn("lowS",e.lowS),void 0!==e.prehash&&Wn("prehash",e.prehash)}const{Ph:qr,aT:Dr}=e,Fr={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:n}=Fr;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Gn(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Gn(s.length/2|128):"";return`${Gn(e)}${i}${s}${t}`},decode(e,t){const{Err:n}=Fr;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const a=t.subarray(r,r+e);if(a.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===a[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of a)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Fr;if(e<Vr)throw new t("integer: negative integers are not allowed");let n=Gn(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Fr;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return qr(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Fr,s="string"==typeof e?Dr(e):e;Kn(s);const{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:d,l:u}=r.decode(2,c);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(d)}},hexFromSig(e){const{_tlv:t,_int:n}=Fr,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Vr=BigInt(0),Hr=BigInt(1),Kr=(BigInt(2),BigInt(3));BigInt(4);function Wr(e){const t=function(e){const t=Mr(e);yr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=Cr(t.n,t.nBitLength),s=t.toBytes||((e,t,r)=>{const s=t.toAffine();return or(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function a(e){const{a:r,b:s}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(Hn(e)&&(e=Yn(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"==typeof e?e:nr(ar("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return s&&(a=Sr(a,i)),ur("private key",a,Hr,i),a}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const d=vr(((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const a=e.is0();null==t&&(t=a?n.ONE:n.inv(i));const o=n.mul(r,t),c=n.mul(s,t),d=n.mul(i,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(d,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),u=vr((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");const i=n.sqr(s),o=a(r);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?l.ZERO:new l(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ar("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(o(e))}static msm(e,t){return function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const s=lr(BigInt(n.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,o=new Array(a+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/i)*i;let d=e.ZERO;for(let t=c;t>=0;t-=i){o.fill(e.ZERO);for(let e=0;e<r.length;e++){const s=r[e],i=Number(s>>BigInt(t)&BigInt(a));o[i]=o[i].add(n[e])}let s=e.ZERO;for(let t=o.length-1,n=e.ZERO;t>0;t--)n=n.add(o[t]),s=s.add(n);if(d=d.add(s),0!==t)for(let e=0;e<i;e++)d=d.double()}return d}(l,r,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn\'t support isOdd")}equals(e){c(e);const{px:t,py:r,pz:s}=this,{px:i,py:a,pz:o}=e,d=n.eql(n.mul(t,o),n.mul(i,s)),u=n.eql(n.mul(r,o),n.mul(a,s));return d&&u}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,Kr),{px:i,py:a,pz:o}=this;let c=n.ZERO,d=n.ZERO,u=n.ZERO,h=n.mul(i,i),f=n.mul(a,a),p=n.mul(o,o),m=n.mul(i,a);return m=n.add(m,m),u=n.mul(i,o),u=n.add(u,u),c=n.mul(e,u),d=n.mul(s,p),d=n.add(c,d),c=n.sub(f,d),d=n.add(f,d),d=n.mul(c,d),c=n.mul(m,c),u=n.mul(s,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),d=n.add(d,h),p=n.mul(a,o),p=n.add(p,p),h=n.mul(p,m),c=n.sub(c,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new l(c,d,u)}add(e){c(e);const{px:r,py:s,pz:i}=this,{px:a,py:o,pz:d}=e;let u=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,m=n.mul(t.b,Kr);let g=n.mul(r,a),y=n.mul(s,o),v=n.mul(i,d),_=n.add(r,s),w=n.add(a,o);_=n.mul(_,w),w=n.add(g,y),_=n.sub(_,w),w=n.add(r,i);let b=n.add(a,d);return w=n.mul(w,b),b=n.add(g,v),w=n.sub(w,b),b=n.add(s,i),u=n.add(o,d),b=n.mul(b,u),u=n.add(y,v),b=n.sub(b,u),f=n.mul(p,w),u=n.mul(m,v),f=n.add(u,f),u=n.sub(y,f),f=n.add(y,f),h=n.mul(u,f),y=n.add(g,g),y=n.add(y,g),v=n.mul(p,v),w=n.mul(m,w),y=n.add(y,v),v=n.sub(g,v),v=n.mul(p,v),w=n.add(w,v),g=n.mul(y,w),h=n.add(h,g),g=n.mul(b,w),u=n.mul(_,u),u=n.sub(u,g),g=n.mul(_,y),f=n.mul(b,f),f=n.add(f,g),new l(u,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return f.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){ur("scalar",e,Vr,t.n);const r=l.ZERO;if(e===Vr)return r;if(e===Hr)return this;const{endo:s}=t;if(!s)return f.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:o,k2:c}=s.splitScalar(e),d=r,u=r,h=this;for(;a>Vr||c>Vr;)a&Hr&&(d=d.add(h)),c&Hr&&(u=u.add(h)),h=h.double(),a>>=Hr,c>>=Hr;return i&&(d=d.negate()),o&&(u=u.negate()),u=new l(n.mul(u.px,s.beta),u.py,u.pz),d.add(u)}multiply(e){const{endo:r,n:s}=t;let i,a;if(ur("scalar",e,Hr,s),r){const{k1neg:t,k1:s,k2neg:o,k2:c}=r.splitScalar(e);let{p:d,f:u}=this.wNAF(s),{p:h,f:p}=this.wNAF(c);d=f.constTimeNegate(t,d),h=f.constTimeNegate(o,h),h=new l(n.mul(h.px,r.beta),h.py,h.pz),i=d.add(h),a=u.add(p)}else{const{p:t,f:n}=this.wNAF(e);i=t,a=n}return l.normalizeZ([i,a])[0]}multiplyAndAddUnsafe(e,t,n){const r=l.BASE,s=(e,t)=>t!==Vr&&t!==Hr&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){return d(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Hr)return!0;if(n)return n(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Hr?this:n?n(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Wn("isCompressed",e),this.assertValidity(),s(l,this,e)}toHex(e=!0){return Wn("isCompressed",e),Yn(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},s=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>Pr;)n&$r&&(r=r.add(s)),s=s.double(),n>>=$r;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=s(t),i=[];let a=e,o=a;for(let e=0;e<n;e++){o=a,i.push(o);for(let e=1;e<r;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(t,r,i){const{windows:a,windowSize:o}=s(t);let c=e.ZERO,d=e.BASE;const u=BigInt(2**t-1),l=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let s=Number(i&u);i>>=h,s>o&&(s-=l,i+=$r);const a=t,f=t+Math.abs(s)-1,p=e%2!=0,m=s<0;0===s?d=d.add(n(p,r[a])):c=c.add(n(m,r[f]))}return{p:c,f:d}},wNAFCached(e,t,n){const r=Ur.get(e)||1;let s=Lr.get(e);return s||(s=this.precomputeWindow(e,r),1!==r&&Lr.set(e,n(s))),this.wNAF(r,s,t)},setWindowSize(e,t){r(t),Ur.set(e,t),Lr.delete(e)}}}(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:o,weierstrassEquation:a,isWithinCurveOrder:function(e){return dr(e,Hr,t.n)}}}function Jr(e){const t=function(e){const t=Mr(e);return yr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function a(e){return Sr(e,r)}function o(e){return Tr(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:l}=Wr({...t,toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),a=or;return Wn("isCompressed",r),r?a(Uint8Array.from([t.hasEvenY()?2:3]),i):a(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const e=nr(a);if(!dr(e,Hr,n.ORDER))throw new Error("Point is not on curve");const t=u(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((s&Hr)===Hr)&&(s=n.neg(s)),{x:e,y:s}}}}),h=e=>Yn(sr(e,t.nByteLength));function f(e){return e>r>>Hr}const p=(e,t,n)=>nr(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ar("compactSignature",e,2*n),new m(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Fr.toSig(ar("DER",e));return new m(t,n)}assertValidity(){ur("r",this.r,Hr,r),ur("s",this.s,Hr,r)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r,s,recovery:i}=this,d=_(ar("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&i?"03":"02",f=c.fromHex(l+h(u)),p=o(u),m=a(-d*p),g=a(s*p),y=c.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return tr(this.toDERHex())}toDERHex(){return Fr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return d(e),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=Rr(t.n);return function(e,t,n=!1){const r=e.length,s=Br(t),i=Rr(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=Sr(n?nr(e):rr(e),t-wr)+wr;return n?ir(a,s):sr(a,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Hn(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===s||r===i:n?r===2*s||r===2*i:e instanceof c}const v=t.bits2int||function(e){const n=nr(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},_=t.bits2int_modN||function(e){return a(v(e))},w=hr(t.nBitLength);function b(e){return ur(`num < 2^${t.nBitLength}`,e,Vr,w),sr(e,t.nByteLength)}function x(e,r,s=E){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:h,prehash:p,extraEntropy:g}=s;null==h&&(h=!0),e=ar("msgHash",e),zr(s),p&&(e=ar("prehashed msgHash",i(e)));const y=_(e),w=d(r),x=[b(w),b(y)];if(null!=g&&!1!==g){const e=!0===g?u(n.BYTES):g;x.push(ar("extraEntropy",e))}const k=or(...x),O=y;return{seed:k,k2sig:function(e){const t=v(e);if(!l(t))return;const n=o(t),r=c.BASE.multiply(t).toAffine(),s=a(r.x);if(s===Vr)return;const i=a(n*a(O+s*w));if(i===Vr)return;let d=(r.x===s?0:2)|Number(r.y&Hr),u=i;return h&&f(i)&&(u=function(e){return f(e)?a(-e):e}(i),d^=1),new m(s,u,d)}}}const E={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(d(e)).toRawBytes(n)},sign:function(e,n,r=E){const{seed:s,k2sig:i}=x(e,n,r),a=t;return mr(a.hash.outputLen,a.nByteLength,a.hmac)(s,i)},verify:function(e,n,r,s=k){const i=e;if(n=ar("msgHash",n),r=ar("publicKey",r),"strict"in s)throw new Error("options.strict was renamed to lowS");zr(s);const{lowS:d,prehash:u}=s;let l,h;try{if("string"==typeof i||Hn(i))try{l=m.fromDER(i)}catch(e){if(!(e instanceof Fr.Err))throw e;l=m.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:t}=i;l=new m(e,t)}}h=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&l.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=l,g=_(n),y=o(p),v=a(g*y),w=a(f*y),b=c.BASE.multiplyAndAddUnsafe(h,v,w)?.toAffine();return!!b&&a(b.x)===f},ProjectivePoint:c,Signature:m,utils:g}}function Yr(e){return{hash:e,hmac:(t,...n)=>qn(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];kn(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}(...n)),randomBytes:Cn}}const Gr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Xr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Qr=BigInt(1),es=BigInt(2),ts=(e,t)=>(e+t/es)/t;function ns(e){const t=Gr,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),d=e*e*e%t,u=d*d*e%t,l=Nr(u,n,t)*u%t,h=Nr(l,n,t)*u%t,f=Nr(h,es,t)*d%t,p=Nr(f,s,t)*f%t,m=Nr(p,i,t)*p%t,g=Nr(m,o,t)*m%t,y=Nr(g,c,t)*g%t,v=Nr(y,o,t)*m%t,_=Nr(v,n,t)*u%t,w=Nr(_,a,t)*p%t,b=Nr(w,r,t)*d%t,x=Nr(b,es,t);if(!rs.eql(rs.sqr(x),e))throw new Error("Cannot find square root");return x}const rs=Cr(Gr,void 0,void 0,{sqrt:ns}),ss=function(e,t){const n=t=>Jr({...e,...Yr(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:rs,n:Xr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Xr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Qr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=ts(i*e,t),c=ts(-r*e,t);let d=Sr(e-o*n-c*s,t),u=Sr(-o*r-c*i,t);const l=d>a,h=u>a;if(l&&(d=t-d),h&&(u=t-u),d>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:d,k2neg:h,k2:u}}}},Mn);BigInt(0);ss.ProjectivePoint;function is(e,t){return as(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \\`/${t.source}/\\` but received "${n}"`))}function as(e,t,n){return new p({...e,*refiner(r,s){yield*e.refiner(r,s);const i=h(n(r,s),s,e,r);for(const e of i)yield{...e,refinement:t}}})}is(N(),/^(?:0x)?[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]+$/iu),is(N(),/^0x[0-9a-f]{40}$/u),is(N(),/^0x[0-9a-fA-F]{40}$/u);function os(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}function cs(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const ds=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function us(e){cs(e);let t="";for(let n=0;n<e.length;n++)t+=ds[e[n]];return t}const ls=48,hs=57,fs=65,ps=70,ms=97,gs=102;function ys(e){return e>=ls&&e<=hs?e-ls:e>=fs&&e<=ps?e-(fs-10):e>=ms&&e<=gs?e-(ms-10):void 0}function vs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=ys(e.charCodeAt(s)),i=ys(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error(\'hex string expected, got non-hex character "\'+t+\'" at index \'+s)}r[t]=16*n+i}return r}async function _s(){const e=await async function(){return await snap.request({method:"snap_getEntropy",params:{version:1}})}();return vs(os(e))}async function ws(){const e=await _s();return function(e){return`0x${us(e)}`}(ss.getPublicKey(e))}const bs=xn.object({message:xn.string().startsWith("metamask:")});const xs=async({request:e})=>{switch(e.method){case"getPublicKey":return ws();case"signMessage":{const{params:t}=e;!function(e){try{bs.parse(e)}catch{throw re({message:"`signMessage`, must take a `message` parameter that must begin with `metamask:`"})}}(t);const{message:n}=t;return await async function(e){const t=await _s(),n=Mn(e);return`0x${ss.sign(n,t).toCompactHex()}`}(n)}default:throw se({data:{method:e.method}})}}})();var s=exports;for(var i in r)s[i]=r[i];r.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();'}],removable:!1}}}},{package:"@metamask/message-signing-snap",file:"node_modules/@metamask/message-signing-snap/dist/preinstalled-snap.json"}],[184,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");const n=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,s.cloneDeep)(e);return t.meta.version=50,n.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[185,{"../../../shared/constants/network":4993,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:s,type:i}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},a=null===(r=n.BUILT_IN_NETWORKS[i])||void 0===r?void 0:r.chainId;a&&s!==a&&(e.NetworkController.provider.chainId=a);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[186,{"../../../shared/constants/network":4993,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:s}=e.PreferencesController,i={},a={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){i[e]={},t[e][n.NETWORK_TYPES.RPC]&&s.forEach((r=>{i[e][r.chainId]=t[e][n.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case n.NETWORK_TYPES.MAINNET:i[e][n.CHAIN_IDS.MAINNET]=t[e][n.NETWORK_TYPES.MAINNET];break;case"ropsten":i[e]["0x3"]=t[e].ropsten;break;case"rinkeby":i[e]["0x4"]=t[e].rinkeby;break;case n.NETWORK_TYPES.GOERLI:i[e][n.CHAIN_IDS.GOERLI]=t[e][n.NETWORK_TYPES.GOERLI];break;case"kovan":i[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=i}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){a[e]={},r[e][n.NETWORK_TYPES.RPC]&&s.forEach((t=>{a[e][t.chainId]=r[e][n.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case n.NETWORK_TYPES.MAINNET:a[e][n.CHAIN_IDS.MAINNET]=r[e][n.NETWORK_TYPES.MAINNET];break;case"ropsten":a[e]["0x3"]=r[e].ropsten;break;case"rinkeby":a[e]["0x4"]=r[e].rinkeby;break;case n.NETWORK_TYPES.GOERLI:a[e][n.CHAIN_IDS.GOERLI]=r[e][n.NETWORK_TYPES.GOERLI];break;case"kovan":a[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=a}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[187,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const s=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,i=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(s)&&s.forEach((e=>{e&&(e.type!==n.TransactionType.retry&&e.type!==n.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(i){Object.entries(i).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:n.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[188,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");function n(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],s=r.filter((({decimals:e})=>n(e)));for(const e of s)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=s;const{accountTokens:i}=t.PreferencesController;if(i&&"object"==typeof i)for(const e of Object.keys(i)){const t=i[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>n(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=i,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[189,{"../../../shared/constants/network":4993,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,s.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=n.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??i})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[i],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const i="UNKNOWN";n.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},n.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},n.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[190,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:56,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[191,{"../../../shared/modules/random-id":5043,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=e("lodash"),i=(s=e("../../../shared/modules/random-id"))&&s.__esModule?s:{default:s};r.default={version:57,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,n.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,i.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[192,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:58,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[193,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");r.default={version:59,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=59;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,s.isPlainObject)(r)){const t=(0,s.groupBy)(Object.values(r),(e=>{var t;return`${null===(t=e.txParams)||void 0===t?void 0:t.nonce}-${e.chainId??e.metamaskNetworkId}`})),i=(0,s.pickBy)(t,(e=>e.some((e=>e.type!==n.TransactionType.cancel&&e.type!==n.TransactionType.retry))));e.TransactionController.transactions=(0,s.keyBy)((0,s.concat)(...Object.values(i)),(e=>e.id))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/059.js"}],[194,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");const n="2020-08-31";r.default={version:60,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=60;const r=function(e){var t;const r=null==e||null===(t=e.NotificationController)||void 0===t?void 0:t.notifications;var i;(0,s.isPlainObject)(r)&&(null===(i=r[2])||void 0===i?void 0:i.date)===n&&delete e.NotificationController.notifications[2];return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/060.js"}],[195,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:61,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=61;const r=function(e){const t=(new Date).getTime();e.AppStateController?(e.AppStateController.recoveryPhraseReminderHasBeenShown=!1,e.AppStateController.recoveryPhraseReminderLastShown=t):e.AppStateController={recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:t};return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/061.js"}],[1952,{"./ObservableStore":1954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const s=e("./ObservableStore");class n extends s.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=n}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1953,{"./ObservableStore":1954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const s=e("./ObservableStore");class n extends s.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=n}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1954,{"@metamask/safe-event-emitter":2143},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const n=s(e("@metamask/safe-event-emitter"));class i extends n.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1955,{"readable-stream":4520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const s=e("readable-stream");class n extends s.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new n(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1956,{"./ComposedStore":1952,"./MergedStore":1953,"./ObservableStore":1954,"./asStream":1955,"./transform":1957},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./asStream"),r),n(e("./ComposedStore"),r),n(e("./MergedStore"),r),n(e("./ObservableStore"),r),n(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1957,{"readable-stream":4520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const s=e("readable-stream");r.storeTransformStream=function(e){return new s.Transform({objectMode:!0,transform:(t,r,s)=>{try{const r=e(t);return s(undefined,r),undefined}catch(e){return s(e),undefined}}})}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[196,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:62,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=62;const r=function(e){if(e.MetaMetricsController){const{metaMetricsSendCount:t}=e.MetaMetricsController;t!==undefined&&delete e.MetaMetricsController.metaMetricsSendCount}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/062.js"}],[197,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:63,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=63;const r=function(e){var t,r,s,n,i,a,o,c;const u=null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.accountTokens,l=null==e||null===(r=e.PreferencesController)||void 0===r?void 0:r.accountHiddenTokens,d={};u&&Object.keys(u).forEach((e=>{Object.keys(u[e]).forEach((t=>{const r=u[e][t];d[t]===undefined?d[t]={[e]:r}:d[t]={...d[t],[e]:r}}))}));const h={};l&&Object.keys(l).forEach((e=>{Object.keys(l[e]).forEach((t=>{const r=l[e][t];h[t]===undefined?h[t]={[e]:r}:h[t]={...h[t],[e]:r}}))}));e.TokensController?(e.TokensController.allTokens=d,e.TokensController.allIgnoredTokens=h):e.TokensController={allTokens:d,allIgnoredTokens:h};return null==e||null===(s=e.PreferencesController)||void 0===s||delete s.accountHiddenTokens,null==e||null===(n=e.PreferencesController)||void 0===n||delete n.accountTokens,null==e||null===(i=e.PreferencesController)||void 0===i||delete i.assetImages,null==e||null===(a=e.PreferencesController)||void 0===a||delete a.hiddenTokens,null==e||null===(o=e.PreferencesController)||void 0===o||delete o.tokens,null==e||null===(c=e.PreferencesController)||void 0===c||delete c.suggestedTokens,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/063.js"}],[1972,{"./enums.cjs":1973,"@metamask/base-controller":1349,"@metamask/utils":1985},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},f=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionLogController=void 0;const m=e("@metamask/base-controller"),p=e("@metamask/utils"),g=e("./enums.cjs"),y={permissionHistory:{},permissionActivityLog:[]};class b extends m.BaseController{constructor({messenger:e,restrictedMethods:t,state:r}){super({messenger:e,name:"PermissionLogController",metadata:{permissionHistory:{persist:!0,anonymous:!1},permissionActivityLog:{persist:!0,anonymous:!1}},state:{...y,...r}}),s.add(this),n.set(this,void 0),h(this,n,t,"f")}updateAccountsHistory(e,t){if(0===t.length)return;const r={eth_accounts:{accounts:f(this,s,"m",i).call(this,t,Date.now())}};f(this,s,"m",u).call(this,e,r)}createMiddleware(){return(e,t,r)=>{const{origin:i,method:u}=e,d=u.startsWith(g.WALLET_PREFIX),h="eth_requestAccounts"===u;if(!g.LOG_IGNORE_METHODS.includes(u)&&(d||f(this,n,"f").has(u))||h){const n=f(this,s,"m",a).call(this,e,d),u=f(this,s,"m",l).call(this,e);r((e=>{const r=Date.now();f(this,s,"m",o).call(this,n,t,r),u&&!t.error&&t.result&&i&&f(this,s,"m",c).call(this,u,i,t.result,r,h),e()}))}else r()}}}r.PermissionLogController=b,n=new WeakMap,s=new WeakSet,i=function(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})},a=function(e,t){const r={id:e.id,method:e.method,methodType:t?g.LOG_METHOD_TYPES.internal:g.LOG_METHOD_TYPES.restricted,origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.update((e=>{const t=[...e.permissionActivityLog,r];e.permissionActivityLog=t.length>g.LOG_LIMIT?t.slice(1):t})),r},o=function(e,t,r){e&&t&&this.update((s=>{s.permissionActivityLog=s.permissionActivityLog.map((s=>s.id===e.id?{...s,success:(0,p.hasProperty)(t,"result"),responseTime:r}:s))}))},c=function(e,t,r,n,a){let o;if(a){const e=r;o={eth_accounts:{accounts:f(this,s,"m",i).call(this,e,n),lastApproved:n}}}else{o=r.reduce(((t,r)=>{const a=r.parentCapability;if(!e.includes(a))return t;if("eth_accounts"===a){const e=f(this,s,"m",d).call(this,r);return{...t,[a]:{lastApproved:n,accounts:f(this,s,"m",i).call(this,e,n)}}}return{...t,[a]:{lastApproved:n}}}),{})}Object.keys(o).length>0&&f(this,s,"m",u).call(this,t,o)},u=function(e,t){const{permissionHistory:r}=this.state,s=r[e]??{},n={...s,...t},i=s.eth_accounts,a=t.eth_accounts;if(i&&a){const e=a.lastApproved??i.lastApproved;n.eth_accounts={lastApproved:e,accounts:{...i.accounts,...a.accounts}}}this.update((t=>{t.permissionHistory={...r,[e]:n}}))},l=function(e){const{method:t,params:r}=e;return"eth_requestAccounts"===t?["eth_accounts"]:t===`${g.WALLET_PREFIX}requestPermissions`&&r&&Array.isArray(r)&&r[0]&&"object"==typeof r[0]&&!Array.isArray(r[0])?Object.keys(r[0]):null},d=function(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===g.CAVEAT_TYPES.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]}}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/PermissionLogController.cjs"}],[1973,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s;Object.defineProperty(r,"__esModule",{value:!0}),r.LOG_LIMIT=r.LOG_METHOD_TYPES=r.LOG_IGNORE_METHODS=r.CAVEAT_TYPES=r.WALLET_PREFIX=void 0,r.WALLET_PREFIX="wallet_",r.CAVEAT_TYPES=Object.freeze({restrictReturnedAccounts:"restrictReturnedAccounts"}),r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],function(e){e.restricted="restricted",e.internal="internal"}(s||(r.LOG_METHOD_TYPES=s={})),r.LOG_LIMIT=100}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/enums.cjs"}],[1974,{"./PermissionLogController.cjs":1972},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./PermissionLogController.cjs"),r)}}},{package:"@metamask/permission-log-controller",file:"node_modules/@metamask/permission-log-controller/dist/index.cjs"}],[1975,{"./errors.cjs":1983,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[1976,{"./assert.cjs":1975,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[1977,{"./assert.cjs":1975,"./hex.cjs":1984,"@scure/base":2697,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function m(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=n-(n<o?a:c);s[e]=16*i+u}return s}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return m(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return m(e.toString(16))}function y(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?m(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=m,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=b,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=b(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[1978,{"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,s.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,s.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[1979,{"./base64.cjs":1976,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[198,{"@metamask/transaction-controller":2523,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("@metamask/transaction-controller");const i="sentEther";r.default={version:64,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=64;const r=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;if((0,s.isPlainObject)(r))for(const e of Object.values(r))e.type===i&&(e.type=n.TransactionType.simpleSend),e.history&&e.history.map((e=>(e.type&&e.type===i&&(e.type=n.TransactionType.simpleSend),e)));return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/064.js"}],[1980,{"./assert.cjs":1975,"./bytes.cjs":1977,"./hex.cjs":1984,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),u=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[1981,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[1982,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[1983,{"./misc.cjs":1989,"pony-cause":4247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[1984,{"./assert.cjs":1975,"./bytes.cjs":1977,"@metamask/superstruct":2494,"@noble/hashes/sha3":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[1985,{"./assert.cjs":1975,"./base64.cjs":1976,"./bytes.cjs":1977,"./caip-types.cjs":1978,"./checksum.cjs":1979,"./coercers.cjs":1980,"./collections.cjs":1981,"./encryption-types.cjs":1982,"./errors.cjs":1983,"./hex.cjs":1984,"./json.cjs":1986,"./keyring.cjs":1987,"./logging.cjs":1988,"./misc.cjs":1989,"./number.cjs":1990,"./opaque.cjs":1991,"./promise.cjs":1992,"./time.cjs":1993,"./transaction-types.cjs":1994,"./versions.cjs":1995},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/index.cjs"}],[1986,{"./assert.cjs":1975,"./misc.cjs":1989,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/json.cjs"}],[1987,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[1988,{debug:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[1989,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[199,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:65,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=65;const r=function(e){if(e.PreferencesController){const{completedOnboarding:t,firstTimeFlowType:r}=e.PreferencesController;e.OnboardingController=e.OnboardingController??{},t!==undefined&&(e.OnboardingController.completedOnboarding=t,delete e.PreferencesController.completedOnboarding),r!==undefined&&(e.OnboardingController.firstTimeFlowType=r,delete e.PreferencesController.firstTimeFlowType)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/065.js"}],[1990,{"./assert.cjs":1975,"./hex.cjs":1984},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/number.cjs"}],[1991,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[1992,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[1993,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/time.cjs"}],[1994,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[1995,{"./assert.cjs":1975,"@metamask/superstruct":2494,semver:4793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/permission-log-controller>@metamask/utils",file:"node_modules/@metamask/permission-log-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[1996,{"./PhishingDetector.cjs":1997,"./types.cjs":1999,"./utils.cjs":2e3,"@metamask/base-controller":1349,"@metamask/controller-utils":1375,"punycode/punycode.js":4315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.C2_DOMAIN_BLOCKLIST_URL=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=r.C2_DOMAIN_BLOCKLIST_ENDPOINT=r.CLIENT_SIDE_DETECION_BASE_URL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const b=e("@metamask/base-controller"),v=e("@metamask/controller-utils"),w=e("punycode/punycode.js"),_=e("./PhishingDetector.cjs"),T=e("./types.cjs"),k=e("./utils.cjs");var S,E;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.api.cx.metamask.io",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.CLIENT_SIDE_DETECION_BASE_URL="https://client-side-detection.api.cx.metamask.io",r.C2_DOMAIN_BLOCKLIST_ENDPOINT="/v1/request-blocklist",r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL=300,r.HOTLIST_REFRESH_INTERVAL=300,r.STALELIST_REFRESH_INTERVAL=2592e3,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,r.C2_DOMAIN_BLOCKLIST_URL=`${r.CLIENT_SIDE_DETECION_BASE_URL}${r.C2_DOMAIN_BLOCKLIST_ENDPOINT}`,function(e){e.EthPhishingDetectConfig="eth_phishing_detect_config"}(S||(r.ListKeys=S={})),function(e){e.MetaMask="MetaMask"}(E||(r.ListNames=E={}));const I={[E.MetaMask]:S.EthPhishingDetectConfig};r.phishingListKeyNameMap={[S.EthPhishingDetectConfig]:E.MetaMask};const P="PhishingController",j={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1},c2DomainBlocklistLastFetched:{persist:!0,anonymous:!1}};class C extends b.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,c2DomainBlocklistRefreshInterval:h=r.C2_DOMAIN_BLOCKLIST_REFRESH_INTERVAL,messenger:f,state:m={}}){super({name:P,metadata:j,messenger:f,state:{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0,c2DomainBlocklistLastFetched:0,...m}}),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),g(this,i,e,"f"),g(this,a,t,"f"),g(this,o,h,"f"),y(this,s,"m",d).call(this),this.updatePhishingDetector()}updatePhishingDetector(){g(this,n,new _.PhishingDetector(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){g(this,i,e,"f")}setHotlistRefreshInterval(e){g(this,a,e,"f")}setC2DomainBlocklistRefreshInterval(e){g(this,o,e,"f")}isStalelistOutOfDate(){return(0,k.fetchTimeNow)()-this.state.stalelistLastFetched>=y(this,i,"f")}isHotlistOutOfDate(){return(0,k.fetchTimeNow)()-this.state.hotlistLastFetched>=y(this,a,"f")}isC2DomainBlocklistOutOfDate(){return(0,k.fetchTimeNow)()-this.state.c2DomainBlocklistLastFetched>=y(this,o,"f")}async maybeUpdateState(){if(this.isStalelistOutOfDate())return void await this.updateStalelist();this.isHotlistOutOfDate()&&await this.updateHotlist();this.isC2DomainBlocklistOutOfDate()&&await this.updateC2DomainBlocklist()}test(e){const t=(0,w.toASCII)(e),r=(0,k.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:T.PhishingDetectorResultType.All}:y(this,n,"f").check(t)}isBlockedRequest(e){const t=(0,w.toASCII)(e),r=(0,k.getHostnameFromUrl)(t);return this.state.whitelist.includes(r||t)?{result:!1,type:T.PhishingDetectorResultType.All}:y(this,n,"f").isMaliciousC2Domain(t)}bypass(e){const t=(0,w.toASCII)(e),r=(0,k.getHostnameFromUrl)(t),{whitelist:s}=this.state;s.includes(r||t)||this.update((e=>{e.whitelist.push(r||t)}))}async updateC2DomainBlocklist(){if(y(this,l,"f"))await y(this,l,"f");else try{g(this,l,y(this,s,"m",m).call(this),"f"),await y(this,l,"f")}finally{g(this,l,undefined,"f")}}async updateHotlist(){if(y(this,c,"f"))await y(this,c,"f");else try{g(this,c,y(this,s,"m",f).call(this),"f"),await y(this,c,"f")}finally{g(this,c,undefined,"f")}}async updateStalelist(){if(y(this,u,"f"))await y(this,u,"f");else try{g(this,u,y(this,s,"m",h).call(this),"f"),await y(this,u,"f")}finally{g(this,u,undefined,"f")}}}r.PhishingController=C,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,s=new WeakSet,d=function(){this.messagingSystem.registerActionHandler(`${P}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${P}:testOrigin`,this.test.bind(this))},h=async function(){let e=null,t=null,n=null;try{const i=y(this,s,"m",p).call(this,r.METAMASK_STALELIST_URL),a=y(this,s,"m",p).call(this,r.C2_DOMAIN_BLOCKLIST_URL);[e,n]=await Promise.all([i,a]),e?.data&&e.data.lastUpdated>0&&(t=await y(this,s,"m",p).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,k.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e,t.c2DomainBlocklistLastFetched=e}))}if(!e||!t)return;const{eth_phishing_detect_config:i,...a}=e.data,o={...i,...a,c2DomainBlocklist:n?n.recentlyAdded:[],name:r.phishingListKeyNameMap.eth_phishing_detect_config},c=(0,k.applyDiffs)(o,t.data,S.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[c]})),this.updatePhishingDetector()},f=async function(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=await y(this,s,"m",p).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,k.fetchTimeNow)()}))}if(!t?.data)return;const n=t.data,i=this.state.phishingLists.map((e=>(0,k.applyDiffs)(e,n,I[e.name],[],[])));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},m=async function(){let e=null;try{e=await y(this,s,"m",p).call(this,`${r.C2_DOMAIN_BLOCKLIST_URL}?timestamp=${(0,k.roundToNearestMinute)(this.state.c2DomainBlocklistLastFetched)}`)}finally{this.update((e=>{e.c2DomainBlocklistLastFetched=(0,k.fetchTimeNow)()}))}if(!e)return;const t=e.recentlyAdded,n=e.recentlyRemoved,i=this.state.phishingLists.map((e=>(0,k.applyDiffs)(e,[],I[e.name],t,n)));this.update((e=>{e.phishingLists=i})),this.updatePhishingDetector()},p=async function(e){const t=await(0,v.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===t?.status?await t.json():null},r.default=C}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.cjs"}],[1997,{"./types.cjs":1999,"./utils.cjs":2e3,"fastest-levenshtein":3726},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetector=void 0;const u=e("fastest-levenshtein"),l=e("./types.cjs"),d=e("./utils.cjs");r.PhishingDetector=class{constructor(e){s.add(this),n.set(this,void 0),i.set(this,void 0),Array.isArray(e)?(o(this,n,(0,d.processConfigs)(e),"f"),o(this,i,!1,"f")):(o(this,n,[(0,d.getDefaultPhishingDetectorConfig)({allowlist:e.whitelist,blocklist:e.blacklist,c2DomainBlocklist:e.c2DomainBlocklist,fuzzylist:e.fuzzylist,tolerance:e.tolerance})],"f"),o(this,i,!0,"f"))}check(e){const t=c(this,s,"m",a).call(this,e);if(c(this,i,"f")){let e=t.type;return e===l.PhishingDetectorResultType.Allowlist?e=l.PhishingDetectorResultType.Whitelist:e===l.PhishingDetectorResultType.Blocklist&&(e=l.PhishingDetectorResultType.Blacklist),{match:t.match,result:t.result,type:e}}return t}isMaliciousC2Domain(e){const t=(0,d.getHostnameFromUrl)(e);if(!t)return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist};const r=t.endsWith(".")?t.slice(0,-1):t,s=(0,d.domainToParts)(r);for(const{allowlist:e,name:t,version:r}of c(this,n,"f")){const n=(0,d.matchPartsAgainstList)(s,e);if(n){return{match:(0,d.domainPartsToDomain)(n),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}const i=(0,d.sha256Hash)(t.toLowerCase()),a=(0,d.generateParentDomains)(s.reverse(),5);for(const{c2DomainBlocklist:e,name:t,version:r}of c(this,n,"f"))if(e&&0!==e.length){if(e.includes(i))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)};for(const s of a){const n=(0,d.sha256Hash)(s);if(e.includes(n))return{name:t,result:!0,type:l.PhishingDetectorResultType.C2DomainBlocklist,version:r===undefined?r:String(r)}}}return{result:!1,type:l.PhishingDetectorResultType.C2DomainBlocklist}}},n=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(e){const t=e.match(new RegExp("Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,}","u"));if(null!==t){const e=t[0];for(const{blocklist:t,name:r,version:s}of c(this,n,"f")){if(t.filter((e=>1===e.length)).find((t=>t[0]===e)))return{name:r,match:e,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:s===undefined?s:String(s)}}}let r;try{r=new URL(e).hostname}catch(e){return{result:!1,type:l.PhishingDetectorResultType.All}}const s=r.endsWith(".")?r.slice(0,-1):r,i=(0,d.domainToParts)(s);for(const{allowlist:e,name:t,version:r}of c(this,n,"f")){const s=(0,d.matchPartsAgainstList)(i,e);if(s){return{match:(0,d.domainPartsToDomain)(s),name:t,result:!1,type:l.PhishingDetectorResultType.Allowlist,version:r===undefined?r:String(r)}}}for(const{blocklist:e,fuzzylist:t,name:r,tolerance:s,version:a}of c(this,n,"f")){const n=(0,d.matchPartsAgainstList)(i,e);if(n){return{match:(0,d.domainPartsToDomain)(n),name:r,result:!0,type:l.PhishingDetectorResultType.Blocklist,version:a===undefined?a:String(a)}}if(s>0){let e=(0,d.domainPartsToFuzzyForm)(i);e=e.replace(/^www\./u,"");const n=t.find((t=>{const r=(0,d.domainPartsToFuzzyForm)(t);return(0,u.distance)(e,r)<=s}));if(n){return{name:r,match:(0,d.domainPartsToDomain)(n),result:!0,type:l.PhishingDetectorResultType.Fuzzy,version:a===undefined?a:String(a)}}}}return{result:!1,type:l.PhishingDetectorResultType.All}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingDetector.cjs"}],[1998,{"./PhishingController.cjs":1996,"./PhishingDetector.cjs":1997,"./types.cjs":1999},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=r.PhishingDetector=void 0,n(e("./PhishingController.cjs"),r);var i=e("./PhishingDetector.cjs");Object.defineProperty(r,"PhishingDetector",{enumerable:!0,get:function(){return i.PhishingDetector}});var a=e("./types.cjs");Object.defineProperty(r,"PhishingDetectorResultType",{enumerable:!0,get:function(){return a.PhishingDetectorResultType}})}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.cjs"}],[1999,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s;Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingDetectorResultType=void 0,function(e){e.All="all",e.Fuzzy="fuzzy",e.Blocklist="blocklist",e.Allowlist="allowlist",e.Blacklist="blacklist",e.Whitelist="whitelist",e.C2DomainBlocklist="c2DomainBlocklist"}(s||(r.PhishingDetectorResultType=s={}))}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/types.cjs"}],[200,{"../../../shared/constants/hardware-wallets":4985,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=e("../../../shared/constants/hardware-wallets");r.default={version:66,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=66;const r=function(e){var t;const r=window.navigator.hid?n.LedgerTransportTypes.webhid:n.LedgerTransportTypes.u2f,s=Boolean(null===(t=e.PreferencesController)||void 0===t?void 0:t.useLedgerLive),i={...e,PreferencesController:{...null==e?void 0:e.PreferencesController,ledgerTransportType:s?n.LedgerTransportTypes.live:r}};return delete i.PreferencesController.useLedgerLive,i}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/066.js"}],[2e3,{"./PhishingController.cjs":1996,"@noble/hashes/utils":2680,"ethereum-cryptography/sha256":3599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.generateParentDomains=r.getHostnameFromUrl=r.sha256Hash=r.matchPartsAgainstList=r.domainPartsToFuzzyForm=r.domainPartsToDomain=r.processConfigs=r.getDefaultPhishingDetectorConfig=r.processDomainList=r.domainToParts=r.validateConfig=r.applyDiffs=r.roundToNearestMinute=r.fetchTimeNow=void 0;const s=e("@noble/hashes/utils"),n=e("ethereum-cryptography/sha256"),i=e("./PhishingController.cjs");r.fetchTimeNow=()=>Math.round(Date.now()/1e3),r.roundToNearestMinute=function(e){return 60*Math.floor(e/60)};const a=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};function o(e){if(null===e||"object"!=typeof e)throw new Error("Invalid config");if("tolerance"in e&&!("fuzzylist"in e))throw new Error("Fuzzylist tolerance provided without fuzzylist");if("name"in e&&("string"!=typeof e.name||""===e.name))throw new Error("Invalid config parameter: 'name'");if("version"in e&&(!["number","string"].includes(typeof e.version)||""===e.version))throw new Error("Invalid config parameter: 'version'")}r.applyDiffs=(e,t,r,s=[],n=[])=>{const o=t.filter((({timestamp:t,targetList:s})=>t>e.lastUpdated&&a(s)[0]===r));let c=e.lastUpdated;const u={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist),c2DomainBlocklist:new Set(e.c2DomainBlocklist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:s}of o){const n=a(t)[1];s>c&&(c=s),e?u[n].delete(r):u[n].add(r)}if(r===i.ListKeys.EthPhishingDetectConfig){for(const e of s)u.c2DomainBlocklist.add(e);for(const e of n)u.c2DomainBlocklist.delete(e)}return{c2DomainBlocklist:Array.from(u.c2DomainBlocklist),allowlist:Array.from(u.allowlist),blocklist:Array.from(u.blocklist),fuzzylist:Array.from(u.fuzzylist),version:e.version,name:i.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:c}},r.validateConfig=o;r.domainToParts=e=>{try{return e.split(".").reverse()}catch(t){throw new Error(JSON.stringify(e))}};r.processDomainList=e=>e.map(r.domainToParts);r.getDefaultPhishingDetectorConfig=({allowlist:e=[],blocklist:t=[],fuzzylist:s=[],tolerance:n=3})=>({allowlist:(0,r.processDomainList)(e),blocklist:(0,r.processDomainList)(t),fuzzylist:(0,r.processDomainList)(s),tolerance:n});r.processConfigs=(e=[])=>e.filter((e=>{try{return o(e),!0}catch(e){return console.error(e),!1}})).map((e=>({...e,...(0,r.getDefaultPhishingDetectorConfig)(e)})));r.domainPartsToDomain=e=>e.slice().reverse().join(".");r.domainPartsToFuzzyForm=e=>e.slice(1).reverse().join(".");r.matchPartsAgainstList=(e,t)=>t.find((t=>!(t.length>e.length)&&t.every(((t,r)=>e[r]===t))));r.sha256Hash=e=>{const t=(0,n.sha256)((new TextEncoder).encode(e.toLowerCase()));return(0,s.bytesToHex)(t)};r.getHostnameFromUrl=e=>{let t;try{t=new URL(e).hostname}catch(e){return null}return t};r.generateParentDomains=(e,t=5)=>{const r=[];if(0===e.length)return r;if(1===e.length)r.push(e[0].toLowerCase());else{const s=e.slice(-2).join(".");r.push(s.toLowerCase());for(let s=e.length-3;s>=0&&r.length<t;s--){const t=e.slice(s).join(".");r.push(t.toLowerCase())}}return r}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.cjs"}],[201,{"../../../shared/constants/network":4993,"bignumber.js":3341,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=e("lodash"),i=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0);r.default={version:67,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=67;const r=function(e){var t,r,s;const n=(null==e?void 0:e.PreferencesController)||{},i=n.preferences||{};if(i.showTestNetworks)return e;const c=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},u=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{},l=(null===(s=e.CachedBalancesController)||void 0===s?void 0:s.cachedBalances)||{},d=a.TEST_CHAINS.includes(null==u?void 0:u.chainId),h=Object.values(c).some((({chainId:e})=>a.TEST_CHAINS.includes(e))),f=a.TEST_CHAINS.some((e=>Object.values(l[e]||{}).some(o))),m=d||h||f,p={...e,PreferencesController:{...n,preferences:{...i,showTestNetworks:m}}};return p}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/067.js"}],[202,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:68,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=68;const r=function(e){const{PermissionsController:t={},PermissionsMetadata:r={},...s}=e,{domainMetadata:a={},permissionsHistory:o={},permissionsLog:c=[]}=r;return{...s,PermissionController:n(t),PermissionLogController:{permissionActivityLog:c,permissionHistory:o},SubjectMetadataController:i(a)}}(t.data);return t.data=r,t}};function n(e){const{domains:t={}}=e;return{subjects:Object.entries(t).reduce(((e,[t,r])=>{const{permissions:[s]}=r,n=s.caveats.find((e=>"exposedAccounts"===e.name)),i={...s,caveats:[{type:"restrictReturnedAccounts",value:n.value}]};return delete i["@context"],e[t]={origin:t,permissions:{eth_accounts:i}},e}),{})}}function i(e){return{subjectMetadata:Object.entries(e).reduce(((e,[t,r])=>{const{name:s=null,icon:n=null,extensionId:i=null,...a}=r;return delete a.lastUpdated,delete a.host,t&&(e[t]={name:s,iconUrl:n,extensionId:i,...a,origin:t}),e}),{})}}}}},{package:"$root$",file:"app/scripts/migrations/068.js"}],[203,{"@metamask/permission-controller":1963,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("@metamask/permission-controller"),n=e("lodash");r.default={version:69,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=69;const r=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?s.SubjectType.Extension:s.SubjectType.Website)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[2033,{"./ppom-controller":2034},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;var s=e("./ppom-controller");Object.defineProperty(r,"NETWORK_CACHE_DURATION",{enumerable:!0,get:function(){return s.NETWORK_CACHE_DURATION}}),Object.defineProperty(r,"PPOMController",{enumerable:!0,get:function(){return s.PPOMController}})}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[2034,{"./ppom-storage":2035,"./util":2036,"@metamask/base-controller":1349,"@metamask/controller-utils":1375,"await-semaphore":3330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g,y,b,v,w,_,T,k,S,E,I,P,j,C,A,x,R,O,M,N=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},B=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.NETWORK_CACHE_DURATION=void 0;const L=e("@metamask/base-controller"),D=e("@metamask/controller-utils"),H=e("await-semaphore"),$=e("./ppom-storage"),F=e("./util");r.NETWORK_CACHE_DURATION=6048e5;const U=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],V={versionInfo:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1}},z="PPOMController",G={headers:{"Content-Type":"application/json"}};class J extends L.BaseController{constructor({chainId:e,messenger:t,provider:r,storageBackend:b,securityAlertsEnabled:v,onPreferencesChange:w,ppomProvider:S,cdnBaseUrl:E,providerRequestLimit:I,state:P,blockaidPublicKey:j,nativeCrypto:C}){super({name:z,metadata:V,messenger:t,state:{versionInfo:P?.versionInfo??[],storageMetadata:P?.storageMetadata??[]}}),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,0),h.set(this,void 0),f.set(this,void 0),m.set(this,{}),p.set(this,void 0),g.set(this,!1),y.set(this,undefined),N(this,h,(0,F.addHexPrefix)(e),"f"),N(this,i,r,"f"),N(this,c,S,"f"),N(this,a,new $.PPOMStorage({storageBackend:b,readMetadata:()=>[...this.state.storageMetadata],writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),N(this,o,new H.Mutex,"f"),N(this,u,E,"f"),N(this,l,I??300,"f"),N(this,f,v,"f"),N(this,p,j,"f"),N(this,y,C,"f"),w(B(this,s,"m",_).bind(this)),B(this,s,"m",T).call(this),B(this,s,"m",k).call(this)}async usePPOM(e,t){const r=t??B(this,h,"f");if(!B(this,f,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,F.blockaidValidationSupportedForNetwork)(r))throw Error(`Blockaid validation not available on network with chainId: ${r}`);return await B(this,o,"f").use((async()=>{const t=await B(this,s,"m",E).call(this,r);N(this,d,0,"f"),N(this,m,{},"f");return{...await e(t),providerRequestsCount:{...B(this,m,"f")}}}))}}r.PPOMController=J,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,s=new WeakSet,b=async function(){if(B(this,f,"f")&&!B(this,g,"f")){const{ppomInit:e}=B(this,c,"f");await e("./ppom_bg.wasm"),N(this,g,!0,"f")}},v=function(){B(this,s,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));const{storageMetadata:e}=this.state;this.update((e=>{e.versionInfo=[],e.storageMetadata=[]})),B(this,a,"f").deleteAllFiles(e).catch((e=>{console.error(`Error in deleting files: ${e.message}`)}))},w=function(e){const t=this.messagingSystem.call("NetworkController:getNetworkClientById",e.selectedNetworkClientId),{chainId:r}=t.configuration,n=(0,F.addHexPrefix)(r);n!==B(this,h,"f")&&(N(this,h,n,"f"),B(this,s,"m",S).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})))},_=function(e){const t=e.securityAlertsEnabled;t!==B(this,f,"f")&&(N(this,f,t,"f"),t||B(this,s,"m",v).call(this))},T=function(){this.messagingSystem.registerActionHandler(`${z}:usePPOM`,this.usePPOM.bind(this))},k=function(){const e=B(this,s,"m",w).bind(this);this.messagingSystem.subscribe("NetworkController:networkDidChange",e)},S=async function(){await B(this,o,"f").use((async()=>{B(this,n,"f")&&(B(this,n,"f").free(),N(this,n,undefined,"f"))}))},E=async function(e){const t=await B(this,s,"m",I).call(this);let r;return(B(this,n,"f")===undefined||t)&&(r=await B(this,s,"m",M).call(this,e),B(this,h,"f")===e&&(B(this,n,"f")&&B(this,n,"f").free(),N(this,n,r,"f")),B(this,a,"f").syncMetadata(this.state.versionInfo).catch((e=>{console.error(`Error while trying to sync metadata: ${e.message}`)}))),r},I=async function(){const e=await B(this,s,"m",x).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},P=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},j=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await B(this,s,"m",C).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},C=async function(e){const{storageMetadata:t}=this.state;if(B(this,s,"m",P).call(this,t,e))try{return await B(this,a,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,F.checkFilePath)(e.filePath);const r=(0,F.constructURLHref)(B(this,u,"f"),e.filePath),n=await B(this,s,"m",R).call(this,r);return await(0,F.validateSignature)(n,e.hashSignature,B(this,p,"f"),e.filePath,B(this,y,"f")),await B(this,a,"f").writeFile({data:n,...e}).catch((e=>{console.error(`Error in writing file: ${e.message}`)})),n},A=async function(e,t={},r="GET"){const s=await(0,D.safelyExecute)((async()=>(0,D.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0),n=304===s?.status;if(!s?.status||s?.status<200||s?.status>399)throw new Error(`Failed to fetch file with url: ${e}`);return{cached:n,response:s}},x=async function(){const e=(0,F.constructURLHref)(B(this,u,"f"),"ppom_version.json"),{cached:t,response:r}=await B(this,s,"m",A).call(this,e,{headers:G});return t&&this.state.versionInfo?.length?undefined:r.json()},R=async function(e){const{response:t}=await B(this,s,"m",A).call(this,e);return await t.arrayBuffer()},O=async function(e,t){if(B(this,d,"f")>B(this,l,"f"))return F.PROVIDER_ERRORS.limitExceeded();if(N(this,d,B(this,d,"f")+1,"f"),!U.includes(e))return F.PROVIDER_ERRORS.methodNotSupported();B(this,m,"f")[e]=B(this,m,"f")[e]?Number(B(this,m,"f")[e])+1:1;const r=(0,F.createPayload)(e,t);try{const e=await B(this,i,"f").request(r);return{jsonrpc:"2.0",id:r.id,result:e}}catch(e){return{jsonrpc:"2.0",id:r.id,error:e}}},M=async function(e){await B(this,s,"m",b).call(this);const t=this.state.versionInfo.filter((({chainId:t})=>t===e));if(t?.length===undefined||0===t?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${e}`);const r=await B(this,s,"m",j).call(this,t);if(r?.length!==t?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${e}`);const{PPOM:n}=B(this,c,"f");return n.new(B(this,s,"m",O).bind(this),r)}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[2035,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a(this,s,e,"f"),a(this,n,t,"f"),a(this,i,r,"f")}async syncMetadata(e){const t=o(this,n,"f").call(this),r=[];for(const s of t){try{await this.readFile(s.name,s.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===s.name&&e.chainId===s.chainId&&e.version===s.version&&e.checksum===s.checksum))&&r.push(s)}const a=await o(this,s,"f").dir();for(const{name:e,chainId:t}of a)r.find((r=>r.name===e&&r.chainId===t))||await o(this,s,"f").delete({name:e,chainId:t});return o(this,i,"f").call(this,r),r}async deleteAllFiles(e){for(const t of e){const{name:e,chainId:r}=t;try{await o(this,s,"f").delete({name:e,chainId:r})}catch(t){console.error(`Error in deleting file: ${e}, ${r}`,t)}}}async readFile(e,t){const r=o(this,n,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const i=await o(this,s,"f").read({name:e,chainId:t},r.checksum);if(!i)throw new Error(`Storage File (${e}, ${t}) not found`);return i}async writeFile({data:e,name:t,chainId:r,version:a,checksum:c}){await o(this,s,"f").write({name:t,chainId:r},e,c);const u=o(this,n,"f").call(this),l=u.find((e=>e.name===t&&e.chainId===r));l?(l.version=a,l.checksum=c):u.push({name:t,chainId:r,version:a,checksum:c}),o(this,i,"f").call(this,u)}},s=new WeakMap,n=new WeakMap,i=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[2036,{buffer:3392,"crypto-js":3500,elliptic:3555,"json-rpc-random-id":3961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const o=i(e("crypto-js")),c=a(e("elliptic")),u=a(e("json-rpc-random-id")),l=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708",BASE:"0x2105",SEPOLIA:"0xaa36a7",OPBNB:"0xcc",ZKSYNC:"0x144",SCROLL:"0x82750",BERACHAIN:"0x138d4",METACHAIN_ONE:"0x1b6e6"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,u.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t??[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,s,n,i,a)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,o.SHA256)(o.default.lib.WordArray.create(e)).toString()})(e,i,a);if(!new l("ed25519").keyFromPublic(s).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${n}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[2037,{"./constants.cjs":2038,"@metamask/base-controller":1349,"@metamask/controller-utils":1375},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PreferencesController=r.getDefaultPreferencesState=void 0;const a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("./constants.cjs"),u={featureFlags:{persist:!0,anonymous:!0},identities:{persist:!0,anonymous:!1},ipfsGateway:{persist:!0,anonymous:!1},isIpfsGatewayEnabled:{persist:!0,anonymous:!0},isMultiAccountBalancesEnabled:{persist:!0,anonymous:!0},lostIdentities:{persist:!0,anonymous:!1},openSeaEnabled:{persist:!0,anonymous:!0},securityAlertsEnabled:{persist:!0,anonymous:!0},selectedAddress:{persist:!0,anonymous:!1},showTestNetworks:{persist:!0,anonymous:!0},showIncomingTransactions:{persist:!0,anonymous:!0},useNftDetection:{persist:!0,anonymous:!0},useTokenDetection:{persist:!0,anonymous:!0},smartTransactionsOptInStatus:{persist:!0,anonymous:!1},useTransactionSimulations:{persist:!0,anonymous:!0},useMultiRpcMigration:{persist:!0,anonymous:!0},useSafeChainsListValidation:{persist:!0,anonymous:!0},tokenSortConfig:{persist:!0,anonymous:!0},privacyMode:{persist:!0,anonymous:!0}};function l(){return{featureFlags:{},identities:{},ipfsGateway:"https://ipfs.io/ipfs/",isIpfsGatewayEnabled:!0,isMultiAccountBalancesEnabled:!0,lostIdentities:{},openSeaEnabled:!1,securityAlertsEnabled:!1,selectedAddress:"",showIncomingTransactions:{[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.BSC_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.OPTIMISM_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.POLYGON_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.AVALANCHE_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.FANTOM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_GOERLI]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_SEPOLIA]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.LINEA_MAINNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONBEAM_TESTNET]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.MOONRIVER]:!0,[c.ETHERSCAN_SUPPORTED_CHAIN_IDS.GNOSIS]:!0},showTestNetworks:!1,useNftDetection:!1,useTokenDetection:!0,useMultiRpcMigration:!0,smartTransactionsOptInStatus:!0,useTransactionSimulations:!0,useSafeChainsListValidation:!0,tokenSortConfig:{key:"tokenFiatAmount",order:"dsc",sortCallback:"stringNumeric"},privacyMode:!1}}r.getDefaultPreferencesState=l;class d extends a.BaseController{constructor({messenger:e,state:t}){super({name:"PreferencesController",metadata:u,messenger:e,state:{...l(),...t}}),s.add(this),e.subscribe("KeyringController:stateChange",(e=>{const t=new Set;for(const r of e.keyrings)for(const e of r.accounts)t.add(e);t.size>0&&i(this,s,"m",n).call(this,Array.from(t))}))}addIdentities(e){const t=e.map((e=>(0,o.toChecksumHexAddress)(e)));this.update((e=>{const{identities:r}=e;for(const e of t){if(r[e])continue;const t=Object.keys(r).length;r[e]={name:`Account ${t+1}`,address:e,importTime:Date.now()}}}))}removeIdentity(e){e=(0,o.toChecksumHexAddress)(e);const{identities:t}=this.state;t[e]&&this.update((t=>{delete t.identities[e],e===t.selectedAddress&&(t.selectedAddress=Object.keys(t.identities)[0])}))}setAccountLabel(e,t){e=(0,o.toChecksumHexAddress)(e),this.update((r=>{const s=r.identities[e]||{};s.name=t,r.identities[e]=s}))}setFeatureFlag(e,t){this.update((r=>{r.featureFlags[e]=t}))}setSelectedAddress(e){this.update((t=>{t.selectedAddress=(0,o.toChecksumHexAddress)(e)}))}setIpfsGateway(e){this.update((t=>{t.ipfsGateway=e}))}setUseTokenDetection(e){this.update((t=>{t.useTokenDetection=e}))}setUseNftDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useNftDetection cannot be enabled if openSeaEnabled is false");this.update((t=>{t.useNftDetection=e}))}setOpenSeaEnabled(e){this.update((t=>{t.openSeaEnabled=e,e||(t.useNftDetection=!1)}))}setSecurityAlertsEnabled(e){this.update((t=>{t.securityAlertsEnabled=e}))}setIsMultiAccountBalancesEnabled(e){this.update((t=>{t.isMultiAccountBalancesEnabled=e}))}setShowTestNetworks(e){this.update((t=>{t.showTestNetworks=e}))}setIsIpfsGatewayEnabled(e){this.update((t=>{t.isIpfsGatewayEnabled=e}))}setEnableNetworkIncomingTransactions(e,t){Object.values(c.ETHERSCAN_SUPPORTED_CHAIN_IDS).includes(e)&&this.update((r=>{r.showIncomingTransactions={...this.state.showIncomingTransactions,[e]:t}}))}setUseMultiRpcMigration(e){this.update((t=>{t.useMultiRpcMigration=e,e||(t.useMultiRpcMigration=!1)}))}setSmartTransactionsOptInStatus(e){this.update((t=>{t.smartTransactionsOptInStatus=e}))}setUseTransactionSimulations(e){this.update((t=>{t.useTransactionSimulations=e}))}setTokenSortConfig(e){this.update((t=>{t.tokenSortConfig=e}))}setUseSafeChainsListValidation(e){this.update((t=>{t.useSafeChainsListValidation=e}))}setPrivacyMode(e){this.update((t=>{t.privacyMode=e}))}}r.PreferencesController=d,s=new WeakSet,n=function(e){e=e.map((e=>(0,o.toChecksumHexAddress)(e))),this.update((t=>{const{identities:r}=t,s={};for(const[t,n]of Object.entries(r))e.includes(t)||(s[t]=n,delete r[t]);for(const[e,r]of Object.entries(s))t.lostIdentities[e]=r})),this.addIdentities(e),e.includes(this.state.selectedAddress)||this.update((t=>{t.selectedAddress=e[0]}))},r.default=d}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/PreferencesController.cjs"}],[2038,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,r.ETHERSCAN_SUPPORTED_CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64"}}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/constants.cjs"}],[2039,{"./PreferencesController.cjs":2037,"./constants.cjs":2038},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.ETHERSCAN_SUPPORTED_CHAIN_IDS=void 0,n(e("./PreferencesController.cjs"),r);var i=e("./constants.cjs");Object.defineProperty(r,"ETHERSCAN_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return i.ETHERSCAN_SUPPORTED_CHAIN_IDS}})}}},{package:"@metamask/preferences-controller",file:"node_modules/@metamask/preferences-controller/dist/index.cjs"}],[204,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:70,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=70;const r=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[205,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:71,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=71;const r=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[206,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:72,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=72;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[207,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:73,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=73;const r=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[2075,{"@metamask/base-controller":1349,"@metamask/selected-network-controller":2157,"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g,y,b,v=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},w=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=r.controllerName=void 0;const _=e("@metamask/base-controller"),T=e("@metamask/selected-network-controller"),k=e("@metamask/utils");r.controllerName="QueuedRequestController",r.QueuedRequestControllerActionTypes={enqueueRequest:`${r.controllerName}:enqueueRequest`,getState:`${r.controllerName}:getState`},r.QueuedRequestControllerEventTypes={networkSwitched:`${r.controllerName}:networkSwitched`,stateChange:`${r.controllerName}:stateChange`};class S extends _.BaseController{constructor({messenger:e,shouldRequestSwitchNetwork:t,canRequestSwitchNetworkWithoutApproval:f,clearPendingConfirmations:m,showApprovalRequest:p}){super({name:r.controllerName,metadata:{queuedRequestCount:{anonymous:!0,persist:!1}},messenger:e,state:{queuedRequestCount:0}}),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,[]),o.set(this,0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),v(this,c,t,"f"),v(this,u,f,"f"),v(this,l,m,"f"),v(this,d,p,"f"),w(this,s,"m",h).call(this)}async enqueueRequest(e,t){if(e.networkClientId===undefined)throw new Error("Error while attempting to enqueue request: networkClientId is required.");w(this,n,"f")===undefined&&v(this,n,e.origin,"f"),w(this,i,"f")===undefined&&v(this,i,e.networkClientId,"f");try{let r;const a=w(this,o,"f")>0&&w(this,u,"f").call(this,e);if(this.state.queuedRequestCount>0||w(this,n,"f")!==e.origin||w(this,i,"f")!==e.networkClientId||a){w(this,d,"f").call(this);const t=w(this,s,"m",y).call(this,e);r=t.requestHasEnded,await t.dequeuedPromise}else w(this,c,"f").call(this,e)&&await w(this,s,"m",p).call(this,e.networkClientId);v(this,o,w(this,o,"f")+1,"f");try{await t()}finally{r?.(),v(this,o,w(this,o,"f")-1,"f")}return undefined}finally{w(this,s,"m",b).call(this)}}}r.QueuedRequestController=S,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,s=new WeakSet,h=function(){this.messagingSystem.registerActionHandler(`${r.controllerName}:enqueueRequest`,this.enqueueRequest.bind(this)),this.messagingSystem.subscribe(T.SelectedNetworkControllerEventTypes.stateChange,((e,t)=>{t.forEach((({op:e,path:t})=>{if(2===t.length&&"domains"===t[0]&&"string"==typeof t[1]){const r=t[1];w(this,s,"m",f).call(this,r),"remove"===e&&r===w(this,n,"f")&&w(this,l,"f").call(this)}}))}))},f=function(e){w(this,a,"f").filter((({request:t})=>t.origin===e)).forEach((({processRequest:e})=>{e(new Error("The request has been rejected due to a change in selected network. Please verify the selected network and retry the request."))})),v(this,a,w(this,a,"f").filter((({request:t})=>t.origin!==e)),"f"),w(this,s,"m",g).call(this)},m=async function(){const e=w(this,a,"f").shift();v(this,n,e.request.origin,"f"),v(this,i,e.request.networkClientId,"f");const t=[e];let r;try{await w(this,s,"m",p).call(this,e.request.networkClientId)}catch(e){r=e}if(w(this,u,"f").call(this,e.request)){v(this,o,w(this,o,"f")+1,"f");try{e.processRequest(r),w(this,s,"m",g).call(this),await e.requestHasBeenProcessed}finally{v(this,o,w(this,o,"f")-1,"f")}const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return w(this,i,"f")!==t&&w(this,s,"m",f).call(this,w(this,n,"f")),void w(this,s,"m",b).call(this)}for(;w(this,a,"f")[0]?.request.networkClientId===w(this,i,"f")&&w(this,a,"f")[0]?.request.origin===w(this,n,"f")&&!w(this,u,"f").call(this,w(this,a,"f")[0]?.request);){const e=w(this,a,"f").shift();t.push(e)}for(const{processRequest:e}of t)e(r);w(this,s,"m",g).call(this)},p=async function(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");e!==t&&(await this.messagingSystem.call("NetworkController:setActiveNetwork",e),this.messagingSystem.publish("QueuedRequestController:networkSwitched",e))},g=function(){this.update((e=>{e.queuedRequestCount=w(this,a,"f").length}))},y=function(e){const{promise:t,reject:r,resolve:n}=(0,k.createDeferredPromise)({suppressUnhandledRejection:!0}),{promise:i,resolve:o}=(0,k.createDeferredPromise)({suppressUnhandledRejection:!0});return w(this,a,"f").push({request:e,processRequest:e=>{e?r(e):n()},requestHasBeenProcessed:i}),w(this,s,"m",g).call(this),{dequeuedPromise:t,requestHasEnded:o}},b=function(){0===w(this,o,"f")&&(v(this,n,undefined,"f"),v(this,i,undefined,"f"),w(this,a,"f").length>0&&w(this,s,"m",m).call(this))}}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestController.cjs"}],[2076,{"@metamask/json-rpc-engine":1700,"@metamask/rpc-errors":2141},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=void 0;const s=e("@metamask/json-rpc-engine"),n=e("@metamask/rpc-errors");r.createQueuedRequestMiddleware=({enqueueRequest:e,useRequestQueue:t,shouldEnqueueRequest:r})=>(0,s.createAsyncMiddleware)((async(s,i,a)=>{if(function(e){if(!e.origin)throw new Error("Request object is lacking an 'origin'");if("string"!=typeof e.origin)throw new Error(`Request object has an invalid origin of type '${typeof e.origin}'`);if(!e.networkClientId)throw new Error("Request object is lacking a 'networkClientId'");if("string"!=typeof e.networkClientId)throw new Error(`Request object has an invalid networkClientId of type '${typeof e.networkClientId}'`)}(s),!t()||!r(s))return await a();try{await e(s,a)}catch(e){i.error=(0,n.serializeError)(e)}return undefined}))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestMiddleware.cjs"}],[2077,{"./QueuedRequestController.cjs":2075,"./QueuedRequestMiddleware.cjs":2076},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=void 0;var s=e("./QueuedRequestController.cjs");Object.defineProperty(r,"QueuedRequestControllerActionTypes",{enumerable:!0,get:function(){return s.QueuedRequestControllerActionTypes}}),Object.defineProperty(r,"QueuedRequestControllerEventTypes",{enumerable:!0,get:function(){return s.QueuedRequestControllerEventTypes}}),Object.defineProperty(r,"QueuedRequestController",{enumerable:!0,get:function(){return s.QueuedRequestController}});var n=e("./QueuedRequestMiddleware.cjs");Object.defineProperty(r,"createQueuedRequestMiddleware",{enumerable:!0,get:function(){return n.createQueuedRequestMiddleware}})}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.cjs"}],[2078,{"@metamask/base-controller":2085,"@metamask/rpc-errors":2089,"@metamask/utils":2122},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("@metamask/base-controller"),n=e("@metamask/rpc-errors"),i=e("@metamask/utils"),a="RateLimitController",o={requests:{persist:!1,anonymous:!1}},c=class extends s.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:s,implementations:n}){const c={requests:i.getKnownPropertyNames.call(void 0,n).reduce(((e,t)=>({...e,[t]:{}})),{})};super({name:a,metadata:o,messenger:r,state:{...c,...s}}),this.implementations=n,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${a}:call`,((e,t,...r)=>this.call(e,t,...r)))}async call(e,t,...r){if(this.isRateLimited(t,e))throw n.rpcErrors.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const s=this.implementations[t].method;if(!s)throw new Error("Invalid api type");return s(...r)}isRateLimited(e,t){const r=this.implementations[e].rateLimitCount??this.rateLimitCount;return this.state.requests[e][t]>=r}recordRequest(e,t){const r=this.implementations[e].rateLimitTimeout??this.rateLimitTimeout,s=this.state.requests[e][t]??0;this.update((n=>{0===s&&setTimeout((()=>this.resetRequestCount(e,t)),r),Object.assign(n,{requests:{...n.requests,[e]:{[t]:s+1}}})}))}resetRequestCount(e,t){this.update((r=>{Object.assign(r,{requests:{...r.requests,[e]:{[t]:0}}})}))}};r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/chunk-37GF32BR.js"}],[2079,{"./chunk-37GF32BR.js":2078},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-37GF32BR.js");r.RateLimitController=s.RateLimitController}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[208,{"../../../shared/constants/network":4993,"bignumber.js":3341,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,n=e("lodash"),i=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},a=e("../../../shared/constants/network");const o=e=>new i.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],u={"0x3":{rpcUrl:(0,a.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,a.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,a.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};r.default={version:74,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=74;const r=function(e){var t,r;const s=(null==e?void 0:e.PreferencesController)||{},i=s.preferences||{},a=(null==e?void 0:e.NetworkController)||{},l=(null==a?void 0:a.provider)||{},d=c.filter((e=>e===(null==l?void 0:l.chainId)));if(!i.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},f=(null===(r=e.CachedBalancesController)||void 0===r?void 0:r.cachedBalances)||{},m=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),p=c.filter((e=>Object.values(f[e]||{}).some(o))),g=(0,n.uniq)([...p,...m,...d]),y=s.frequentRpcListDetail??[];g.forEach((e=>{y.find((t=>t.chainId===e))||y.unshift({rpcUrl:u[e].rpcUrl,chainId:e,ticker:u[e].ticker,nickname:u[e].nickname,rpcPrefs:{}})})),y.length&&(s.frequentRpcListDetail=y);if(d.length){const e=d[0];a.provider={...a.provider,type:"rpc",rpcUrl:u[e].rpcUrl,chainId:e,nickname:u[e].nickname,ticker:u[e].ticker}}return{...e,PreferencesController:{...s},NetworkController:{...a}}}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[2080,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const r=e[t];this.internalConfig[t]=r,this[t]=r}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},n=s;r.BaseControllerV1=s,r.BaseControllerV1_default=n}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2081,{"./chunk-UJFCPTF3.js":2083,"./chunk-Z4BLTVTB.js":2084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,r.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,s,new Map),c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,s).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,s).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,s).delete(e)}clearActions(){c.__privateGet.call(void 0,this,s).clear()}call(e,...t){const r=c.__privateGet.call(void 0,this,s).get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const r=c.__privateGet.call(void 0,this,n).get(e);if(r)for(const[e,s]of r.entries())try{if(s){const r=c.__privateGet.call(void 0,this,a).get(e),n=s(...t);n!==r&&(c.__privateGet.call(void 0,this,a).set(e,n),e(n,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let s=c.__privateGet.call(void 0,this,n).get(e);if(s||(s=new Map,c.__privateGet.call(void 0,this,n).set(e,s)),s.set(t,r),r){const s=c.__privateGet.call(void 0,this,i).get(e);if(s){const e=r(...s());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const r=c.__privateGet.call(void 0,this,n).get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),r.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,n).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,n).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2082,{"./chunk-Z4BLTVTB.js":2084,immer:3926},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,r){return Object.keys(e).reduce(((s,n)=>{try{const i=t[n];if(!i)throw new Error(`No metadata found for '${String(n)}'`);const a=i[r],o=e[n];return"function"==typeof a?s[n]=a(o):a&&(s[n]=o),s}catch(e){return setTimeout((()=>{throw e})),s}}),{})}s=new WeakMap,r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:a}){n.__privateAdd.call(void 0,this,s,void 0),this.messagingSystem=e,this.name=r,n.__privateSet.call(void 0,this,s,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${r}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return n.__privateGet.call(void 0,this,s)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,a]=i.produceWithPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);return n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,n.__privateGet.call(void 0,this,s),e);n.__privateSet.call(void 0,this,s,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},r.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2083,{"./chunk-Z4BLTVTB.js":2084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s,n,i,a,o,c,u,l,d,h,f=e("./chunk-Z4BLTVTB.js");s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=f.__privateGet.call(void 0,this,a);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=f.__privateGet.call(void 0,this,i);return f.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${f.__privateGet.call(void 0,this,n)}:`)},r.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:c}){f.__privateAdd.call(void 0,this,o),f.__privateAdd.call(void 0,this,u),f.__privateAdd.call(void 0,this,d),f.__privateAdd.call(void 0,this,s,void 0),f.__privateAdd.call(void 0,this,n,void 0),f.__privateAdd.call(void 0,this,i,void 0),f.__privateAdd.call(void 0,this,a,void 0),f.__privateSet.call(void 0,this,s,e),f.__privateSet.call(void 0,this,n,t),f.__privateSet.call(void 0,this,i,r),f.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${f.__privateGet.call(void 0,this,n)}:'`);f.__privateGet.call(void 0,this,s).registerActionHandler(e,t)}unregisterActionHandler(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${f.__privateGet.call(void 0,this,n)}:'`);f.__privateGet.call(void 0,this,s).unregisterActionHandler(e)}call(e,...t){if(!f.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return f.__privateGet.call(void 0,this,s).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,n)}:'`);f.__privateGet.call(void 0,this,s).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${f.__privateGet.call(void 0,this,n)}:'`);f.__privateGet.call(void 0,this,s).publish(e,...t)}subscribe(e,t,r){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return r?f.__privateGet.call(void 0,this,s).subscribe(e,t,r):f.__privateGet.call(void 0,this,s).subscribe(e,t)}unsubscribe(e,t){if(!f.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);f.__privateGet.call(void 0,this,s).unsubscribe(e,t)}clearEventSubscriptions(e){if(!f.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${f.__privateGet.call(void 0,this,n)}:'`);f.__privateGet.call(void 0,this,s).clearEventSubscriptions(e)}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2084,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};r.__privateGet=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),r.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},r.__privateSet=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),r.__privateMethod=(e,t,r)=>(s(e,t,"access private method"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2085,{"./chunk-FTHCJ6HY.js":2080,"./chunk-G42723LG.js":2081,"./chunk-IURK6TKD.js":2082,"./chunk-UJFCPTF3.js":2083,"./chunk-Z4BLTVTB.js":2084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var s=e("./chunk-FTHCJ6HY.js"),n=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),r.BaseController=n.BaseController,r.BaseControllerV1=s.BaseControllerV1,r.ControllerMessenger=i.ControllerMessenger,r.RestrictedControllerMessenger=a.RestrictedControllerMessenger,r.getAnonymizedState=n.getAnonymizedState,r.getPersistentState=n.getPersistentState}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}],[2086,{"./utils.cjs":2090,"@metamask/utils":2101,"fast-safe-stringify":3714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumProviderError=r.JsonRpcError=void 0;const n=e("@metamask/utils"),i=s(e("fast-safe-stringify")),a=e("./utils.cjs");class o extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');(0,a.dataHasCause)(r)?(super(t,{cause:r.cause}),(0,n.hasProperty)(this,"cause")||Object.assign(this,{cause:r.cause})):super(t),r!==undefined&&(this.data=r),this.code=e}serialize(){const e={code:this.code,message:this.message};return this.data!==undefined&&(e.data=this.data,(0,n.isPlainObject)(this.data)&&(e.data.cause=(0,a.serializeCause)(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return(0,i.default)(this.serialize(),c,2)}}r.JsonRpcError=o;function c(e,t){return"[Circular]"===t?undefined:t}r.EthereumProviderError=class extends o{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/classes.cjs"}],[2087,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorValues=r.errorCodes=void 0,r.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},r.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/error-constants.cjs"}],[2088,{"./classes.cjs":2086,"./error-constants.cjs":2087,"./utils.cjs":2090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerErrors=r.rpcErrors=void 0;const s=e("./classes.cjs"),n=e("./error-constants.cjs"),i=e("./utils.cjs");function a(e,t){const[r,n]=c(t);return new s.JsonRpcError(e,r??(0,i.getMessageFromCode)(e),n)}function o(e,t){const[r,n]=c(t);return new s.EthereumProviderError(e,r??(0,i.getMessageFromCode)(e),n)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??undefined,r]}}return[]}r.rpcErrors={parse:e=>a(n.errorCodes.rpc.parse,e),invalidRequest:e=>a(n.errorCodes.rpc.invalidRequest,e),invalidParams:e=>a(n.errorCodes.rpc.invalidParams,e),methodNotFound:e=>a(n.errorCodes.rpc.methodNotFound,e),internal:e=>a(n.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(n.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(n.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(n.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(n.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(n.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(n.errorCodes.rpc.limitExceeded,e)},r.providerErrors={userRejectedRequest:e=>o(n.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(n.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(n.errorCodes.provider.unsupportedMethod,e),disconnected:e=>o(n.errorCodes.provider.disconnected,e),chainDisconnected:e=>o(n.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new s.EthereumProviderError(t,r,n)}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/errors.cjs"}],[2089,{"./classes.cjs":2086,"./error-constants.cjs":2087,"./errors.cjs":2088,"./utils.cjs":2090},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.errorCodes=r.providerErrors=r.rpcErrors=r.getMessageFromCode=r.serializeError=r.serializeCause=r.dataHasCause=r.EthereumProviderError=r.JsonRpcError=void 0;var s=e("./classes.cjs");Object.defineProperty(r,"JsonRpcError",{enumerable:!0,get:function(){return s.JsonRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return s.EthereumProviderError}});var n=e("./utils.cjs");Object.defineProperty(r,"dataHasCause",{enumerable:!0,get:function(){return n.dataHasCause}}),Object.defineProperty(r,"serializeCause",{enumerable:!0,get:function(){return n.serializeCause}}),Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});var i=e("./errors.cjs");Object.defineProperty(r,"rpcErrors",{enumerable:!0,get:function(){return i.rpcErrors}}),Object.defineProperty(r,"providerErrors",{enumerable:!0,get:function(){return i.providerErrors}});var a=e("./error-constants.cjs");Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/index.cjs"}],[209,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:75,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=75;const r=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[2090,{"./error-constants.cjs":2087,"@metamask/utils":2101},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.dataHasCause=r.serializeCause=r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const s=e("@metamask/utils"),n=e("./error-constants.cjs"),i=n.errorCodes.rpc.internal,a={code:i,message:o(i)};function o(e,t="Unspecified error message. This is a bug, please report it."){if(c(e)){const t=e.toString();if((0,s.hasProperty)(n.errorValues,t))return n.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function c(e){return Number.isInteger(e)}function u(e){return Array.isArray(e)?e.map((e=>(0,s.isValidJson)(e)?e:(0,s.isObject)(e)?l(e):null)):(0,s.isObject)(e)?l(e):(0,s.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return(0,s.isValidJson)(n)&&(t[r]=n),t}),{})}r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",r.getMessageFromCode=o,r.isValidCode=c,r.serializeError=function(e,{fallbackError:t=a,shouldIncludeStack:r=!0}={}){if(!(0,s.isJsonRpcError)(t))throw new Error("Must provide fallback error with integer number code and string message.");const n=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,s.isJsonRpcError)(e))return e;const r=u(e),n={...t,data:{cause:r}};return n}(e,t);return r||delete n.stack,n},r.serializeCause=u,r.dataHasCause=function(e){return(0,s.isObject)(e)&&(0,s.hasProperty)(e,"cause")&&(0,s.isObject)(e.cause)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/dist/utils.cjs"}],[2091,{"./errors.cjs":2099,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/assert.cjs"}],[2092,{"./assert.cjs":2091,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/base64.cjs"}],[2093,{"./assert.cjs":2091,"./hex.cjs":2100,"@scure/base":2697,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function m(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=n-(n<o?a:c);s[e]=16*i+u}return s}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return m(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return m(e.toString(16))}function y(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?m(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=m,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=b,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=b(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/bytes.cjs"}],[2094,{"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAssetId=r.isCaipAssetType=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAssetIdStruct=r.CaipAssetTypeStruct=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ASSET_ID_REGEX=r.CAIP_ASSET_TYPE_REGEX=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),r.CaipAssetTypeStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_TYPE_REGEX),r.CaipAssetIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ASSET_ID_REGEX),function(e){e.Bip122="bip122",e.Eip155="eip155",e.Wallet="wallet"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.isCaipAssetType=function(e){return(0,s.is)(e,r.CaipAssetTypeStruct)},r.isCaipAssetId=function(e){return(0,s.is)(e,r.CaipAssetIdStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2095,{"./base64.cjs":2092,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/checksum.cjs"}],[2096,{"./assert.cjs":2091,"./bytes.cjs":2093,"./hex.cjs":2100,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),u=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/coercers.cjs"}],[2097,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/collections.cjs"}],[2098,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2099,{"./misc.cjs":2105,"pony-cause":4247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/errors.cjs"}],[21,{"../../../shared/constants/metametrics":4989,"../../../shared/modules/hexstring-utils":5036,"@metamask/base-controller":1349,"@metamask/controller-utils":1375,"@metamask/message-manager":1836,"@metamask/utils":2620,buffer:3392,events:3678,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var s=d(e("events")),n=d(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},m=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=m;const p=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=p;class g extends a.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new s.default,this._decryptMessageManager=new i.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!m(r))throw new Error("Invalid encrypted data.");const s=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,s,"decrypted"),this._acceptApproval(t)}catch(e){throw n.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!m(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((s=>{t(s,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const s=e[r],n=this._migrateMessage(s);t[r]=n}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||o.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:o.ApprovalType.EthDecrypt},!0)}catch(e){n.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,l.stripHexPrefix)(e),s=t.from(r,"hex");return JSON.parse(s.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){n.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[210,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:76,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=76;const r=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:r,ignoredCollectibles:s,...n}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...r?{allNfts:r}:{},...s?{ignoredNfts:s}:{},...n},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[2100,{"./assert.cjs":2091,"./bytes.cjs":2093,"@metamask/superstruct":2494,"@noble/hashes/sha3":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/hex.cjs"}],[2101,{"./assert.cjs":2091,"./base64.cjs":2092,"./bytes.cjs":2093,"./caip-types.cjs":2094,"./checksum.cjs":2095,"./coercers.cjs":2096,"./collections.cjs":2097,"./encryption-types.cjs":2098,"./errors.cjs":2099,"./hex.cjs":2100,"./json.cjs":2102,"./keyring.cjs":2103,"./logging.cjs":2104,"./misc.cjs":2105,"./number.cjs":2106,"./opaque.cjs":2107,"./promise.cjs":2108,"./time.cjs":2109,"./transaction-types.cjs":2110,"./versions.cjs":2111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/index.cjs"}],[2102,{"./assert.cjs":2091,"./misc.cjs":2105,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/json.cjs"}],[2103,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/keyring.cjs"}],[2104,{debug:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/logging.cjs"}],[2105,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/misc.cjs"}],[2106,{"./assert.cjs":2091,"./hex.cjs":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/number.cjs"}],[2107,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/opaque.cjs"}],[2108,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/promise.cjs"}],[2109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/time.cjs"}],[211,{"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,s.hasProperty)(e,"PreferencesController")&&(0,s.isObject)(e.PreferencesController)&&(0,s.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var s=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[2110,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2111,{"./assert.cjs":2091,"@metamask/superstruct":2494,semver:4793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/rpc-errors>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/rpc-errors/node_modules/@metamask/utils/dist/versions.cjs"}],[2112,{"./errors.cjs":2120,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const s=e("@metamask/superstruct"),n=e("./errors.cjs");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=a,r.assert=function(e,t="Assertion failed.",r=a){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=a){try{(0,s.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2113,{"./assert.cjs":2112,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,s.pattern)(e,o)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2114,{"./assert.cjs":2112,"./hex.cjs":2121,"@scure/base":2697,buffer:3392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.base64ToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToBase64=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const s=e("@scure/base"),n=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(l(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=t[e[s]];return(0,i.add0x)(r.join(""))}function f(e){d(e);const t=h(e);return BigInt(t)}function m(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,s=new Uint8Array(r.length/2);for(let e=0;e<s.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),i=t-(t<o?a:c),u=n-(n<o?a:c);s[e]=16*i+u}return s}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return m(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return m(e.toString(16))}function y(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?m(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=l,r.assertIsBytes=d,r.bytesToHex=h,r.bytesToBigInt=f,r.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){d(e);const t=f(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},r.bytesToBase64=function(e){return d(e),s.base64.encode(e)},r.hexToBytes=m,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const s=new Uint8Array(t);for(let e=0;e<s.length;e++)s[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return s.reverse()},r.numberToBytes=g,r.stringToBytes=y,r.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),s.base64.decode(e)},r.valueToBytes=b,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const n=b(e[s]);t[s]=n,r+=n.length}const s=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)s.set(t[e],r),r+=t[e].length;return s},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2115,{"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toCaipChainId=r.parseCaipAccountId=r.parseCaipChainId=r.isCaipAccountAddress=r.isCaipAccountId=r.isCaipReference=r.isCaipNamespace=r.isCaipChainId=r.KnownCaipNamespace=r.CaipAccountAddressStruct=r.CaipAccountIdStruct=r.CaipReferenceStruct=r.CaipNamespaceStruct=r.CaipChainIdStruct=r.CAIP_ACCOUNT_ADDRESS_REGEX=r.CAIP_ACCOUNT_ID_REGEX=r.CAIP_REFERENCE_REGEX=r.CAIP_NAMESPACE_REGEX=r.CAIP_CHAIN_ID_REGEX=void 0;const s=e("@metamask/superstruct");function n(e){return(0,s.is)(e,r.CaipNamespaceStruct)}function i(e){return(0,s.is)(e,r.CaipReferenceStruct)}r.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,r.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,r.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,r.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,r.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,r.CaipChainIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_CHAIN_ID_REGEX),r.CaipNamespaceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_NAMESPACE_REGEX),r.CaipReferenceStruct=(0,s.pattern)((0,s.string)(),r.CAIP_REFERENCE_REGEX),r.CaipAccountIdStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ID_REGEX),r.CaipAccountAddressStruct=(0,s.pattern)((0,s.string)(),r.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155"}(r.KnownCaipNamespace||(r.KnownCaipNamespace={})),r.isCaipChainId=function(e){return(0,s.is)(e,r.CaipChainIdStruct)},r.isCaipNamespace=n,r.isCaipReference=i,r.isCaipAccountId=function(e){return(0,s.is)(e,r.CaipAccountIdStruct)},r.isCaipAccountAddress=function(e){return(0,s.is)(e,r.CaipAccountAddressStruct)},r.parseCaipChainId=function(e){const t=r.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},r.parseCaipAccountId=function(e){const t=r.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},r.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${r.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${r.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2116,{"./base64.cjs":2113,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const s=e("@metamask/superstruct"),n=e("./base64.cjs");r.ChecksumStruct=(0,s.size)((0,n.base64)((0,s.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2117,{"./assert.cjs":2112,"./bytes.cjs":2114,"./hex.cjs":2121,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,s.union)([(0,s.number)(),(0,s.bigint)(),(0,s.string)(),a.StrictHexStruct]),c=(0,s.coerce)((0,s.number)(),o,Number),u=(0,s.coerce)((0,s.bigint)(),o,BigInt),l=((0,s.union)([a.StrictHexStruct,(0,s.instance)(Uint8Array)]),(0,s.coerce)((0,s.instance)(Uint8Array),(0,s.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,s.coerce)(a.StrictHexStruct,(0,s.instance)(Uint8Array),i.bytesToHex);r.createNumber=function(e){try{const t=(0,s.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof s.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,s.create)(e,u)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,s.create)(e,l)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,s.create)(e,d)}catch(e){if(e instanceof s.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class o{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}get(e){return i(this,s,"f").get(e)}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=o;class c{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((r,s,n)=>e.call(t,r,s,this)))}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[212,{"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"network")&&(0,s.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var s=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[2120,{"./misc.cjs":2126,"pony-cause":4247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.wrapError=r.getErrorMessage=r.isErrorWithStack=r.isErrorWithMessage=r.isErrorWithCode=void 0;const s=e("pony-cause"),n=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}r.isErrorWithCode=i,r.isErrorWithMessage=a,r.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},r.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},r.wrapError=function(e,t){if((r=e)instanceof Error||(0,n.isObject)(r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new s.ErrorWithCause(t,{cause:e}),i(e)&&(r.code=e.code),r}var r;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2121,{"./assert.cjs":2112,"./bytes.cjs":2114,"@metamask/superstruct":2494,"@noble/hashes/sha3":2678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const s=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,s.is)(e,r.HexStruct)}function c(e){return(0,s.is)(e,r.StrictHexStruct)}function u(e){(0,i.assert)((0,s.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=o[t];return(0,i.assert)((0,s.is)(r,(0,s.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,s.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,s.pattern)((0,s.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,s.pattern)((0,s.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=o,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,s.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2122,{"./assert.cjs":2112,"./base64.cjs":2113,"./bytes.cjs":2114,"./caip-types.cjs":2115,"./checksum.cjs":2116,"./coercers.cjs":2117,"./collections.cjs":2118,"./encryption-types.cjs":2119,"./errors.cjs":2120,"./hex.cjs":2121,"./json.cjs":2123,"./keyring.cjs":2124,"./logging.cjs":2125,"./misc.cjs":2126,"./number.cjs":2127,"./opaque.cjs":2128,"./promise.cjs":2129,"./time.cjs":2130,"./transaction-types.cjs":2131,"./versions.cjs":2132},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e("./assert.cjs"),r),n(e("./base64.cjs"),r),n(e("./bytes.cjs"),r),n(e("./caip-types.cjs"),r),n(e("./checksum.cjs"),r),n(e("./coercers.cjs"),r),n(e("./collections.cjs"),r),n(e("./encryption-types.cjs"),r),n(e("./errors.cjs"),r),n(e("./hex.cjs"),r),n(e("./json.cjs"),r),n(e("./keyring.cjs"),r),n(e("./logging.cjs"),r),n(e("./misc.cjs"),r),n(e("./number.cjs"),r),n(e("./opaque.cjs"),r),n(e("./promise.cjs"),r),n(e("./time.cjs"),r),n(e("./transaction-types.cjs"),r),n(e("./versions.cjs"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2123,{"./assert.cjs":2112,"./misc.cjs":2126,"@metamask/superstruct":2494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=r.exactOptional=r.object=void 0;const s=e("@metamask/superstruct"),n=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const r=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],r)}function o(e){return new s.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}r.object=e=>(0,s.object)(e),r.exactOptional=o;function c(e){return(0,s.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,s.union)([(0,s.literal)(null),(0,s.boolean)(),(0,s.define)("finite number",(e=>(0,s.is)(e,(0,s.number)())&&Number.isFinite(e))),(0,s.string)(),(0,s.array)((0,s.lazy)((()=>r.UnsafeJsonStruct))),(0,s.record)((0,s.string)(),(0,s.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,s.coerce)(r.UnsafeJsonStruct,(0,s.any)(),(e=>((0,n.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return c(e),!0}catch{return!1}},r.getSafeJson=c,r.getJsonSize=function(e){(0,n.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,s.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,s.nullable)((0,s.union)([(0,s.number)(),(0,s.string)()])),r.JsonRpcErrorStruct=(0,r.object)({code:(0,s.integer)(),message:(0,s.string)(),data:o(r.JsonStruct),stack:o((0,s.string)())}),r.JsonRpcParamsStruct=(0,s.union)([(0,s.record)((0,s.string)(),r.JsonStruct),(0,s.array)(r.JsonStruct)]),r.JsonRpcRequestStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.JsonRpcNotificationStruct=(0,r.object)({jsonrpc:r.JsonRpcVersionStruct,method:(0,s.string)(),params:o(r.JsonRpcParamsStruct)}),r.isJsonRpcNotification=function(e){return(0,s.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,s.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,s.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,s.optional)((0,s.unknown)()),error:(0,s.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,r.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,s.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,s.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,s.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,s.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,s.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,s.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:s}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||s&&null===e)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2124,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2125,{debug:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const n=(0,s(e("debug")).default)("metamask");r.createProjectLogger=function(e){return n.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2126,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.getKnownPropertyNames=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function s(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),r.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=s,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>s(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2127,{"./assert.cjs":2112,"./hex.cjs":2121},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const s=e("./assert.cjs"),n=e("./hex.cjs");r.numberToHex=e=>((0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2128,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2129,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferredPromise=void 0,r.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const s=new Promise(((e,s)=>{t=e,r=s}));return e&&s.catch((e=>{})),{promise:s,resolve:t,reject:r}}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[213,{"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){(0,s.hasProperty)(e,"NetworkController")&&(0,s.isObject)(e.NetworkController)&&(0,s.hasProperty)(e.NetworkController,"provider")&&(0,s.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var s=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[2130,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const s=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return s(e,"count"),e*t},r.timeSince=function(e){return s(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2132,{"./assert.cjs":2112,"@metamask/superstruct":2494,semver:4793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const s=e("@metamask/superstruct"),n=e("semver"),i=e("./assert.cjs");r.VersionStruct=(0,s.refine)((0,s.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,s.refine)((0,s.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,s.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,s.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/rate-limit-controller>@metamask/utils",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2133,{"../constants.cjs":2134,cockatiel:3442},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ClientConfigApiService=r.DEFAULT_DEGRADED_THRESHOLD=void 0;const l=e("cockatiel"),d=e("../constants.cjs");r.DEFAULT_DEGRADED_THRESHOLD=5e3;r.ClientConfigApiService=class{constructor({fetch:e,retries:t=3,maximumConsecutiveFailures:u=12,circuitBreakDuration:d=18e5,onBreak:h,onDegraded:f,config:m}){s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c(this,s,e,"f"),c(this,i,m.client,"f"),c(this,a,m.distribution,"f"),c(this,o,m.environment,"f");const p=(0,l.retry)(l.handleAll,{maxAttempts:t,backoff:new l.ExponentialBackoff}),g=(0,l.circuitBreaker)(l.handleAll,{halfOpenAfter:d,breaker:new l.ConsecutiveBreaker(u)});h&&g.onBreak(h),f&&(p.onGiveUp((()=>{g.state===l.CircuitState.Closed&&f()})),p.onSuccess((({duration:e})=>{g.state===l.CircuitState.Closed&&e>r.DEFAULT_DEGRADED_THRESHOLD&&f()}))),c(this,n,(0,l.wrap)(p,g),"f")}async fetchRemoteFeatureFlags(){const e=`${d.BASE_URL}/flags?client=${u(this,i,"f")}&distribution=${u(this,a,"f")}&environment=${u(this,o,"f")}`,t=await u(this,n,"f").execute((()=>u(this,s,"f").call(this,e,{cache:"no-cache"})));if(!t.ok)throw new Error("Failed to fetch remote feature flags");const r=await t.json();if(!Array.isArray(r))throw new Error("Feature flags api did not return an array");return{remoteFeatureFlags:this.flattenFeatureFlags(r),cacheTimestamp:Date.now()}}flattenFeatureFlags(e){return e.reduce(((e,t)=>({...e,...t})),{})}},s=new WeakMap,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap}}},{package:"@metamask/remote-feature-flag-controller",file:"node_modules/@metamask/remote-feature-flag-controller/dist/client-config-api-service/client-config-api-service.cjs"}],[2134,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BASE_URL=void 0,r.BASE_URL="https://client-config.api.cx.metamask.io/v1"}}},{package:"@metamask/remote-feature-flag-controller",file:"node_modules/@metamask/remote-feature-flag-controller/dist/constants.cjs"}],[2135,{"./client-config-api-service/client-config-api-service.cjs":2133,"./remote-feature-flag-controller-types.cjs":2136,"./remote-feature-flag-controller.cjs":2137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ClientConfigApiService=r.EnvironmentType=r.DistributionType=r.ClientType=r.RemoteFeatureFlagController=void 0;var s=e("./remote-feature-flag-controller.cjs");Object.defineProperty(r,"RemoteFeatureFlagController",{enumerable:!0,get:function(){return s.RemoteFeatureFlagController}});var n=e("./remote-feature-flag-controller-types.cjs");Object.defineProperty(r,"ClientType",{enumerable:!0,get:function(){return n.ClientType}}),Object.defineProperty(r,"DistributionType",{enumerable:!0,get:function(){return n.DistributionType}}),Object.defineProperty(r,"EnvironmentType",{enumerable:!0,get:function(){return n.EnvironmentType}});var i=e("./client-config-api-service/client-config-api-service.cjs");Object.defineProperty(r,"ClientConfigApiService",{enumerable:!0,get:function(){return i.ClientConfigApiService}})}}},{package:"@metamask/remote-feature-flag-controller",file:"node_modules/@metamask/remote-feature-flag-controller/dist/index.cjs"}],[2136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.EnvironmentType=r.DistributionType=r.ClientType=void 0,function(e){e.Extension="extension",e.Mobile="mobile"}(s||(r.ClientType=s={})),function(e){e.Main="main",e.Flask="flask"}(n||(r.DistributionType=n={})),function(e){e.Production="prod",e.ReleaseCandidate="rc",e.Development="dev"}(i||(r.EnvironmentType=i={}))}}},{package:"@metamask/remote-feature-flag-controller",file:"node_modules/@metamask/remote-feature-flag-controller/dist/remote-feature-flag-controller-types.cjs"}],[2137,{"@metamask/base-controller":1349},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.RemoteFeatureFlagController=r.getDefaultRemoteFeatureFlagControllerState=r.DEFAULT_CACHE_DURATION=r.controllerName=void 0;const h=e("@metamask/base-controller");r.controllerName="RemoteFeatureFlagController",r.DEFAULT_CACHE_DURATION=864e5;const f={remoteFeatureFlags:{persist:!0,anonymous:!0},cacheTimestamp:{persist:!0,anonymous:!0}};function m(){return{remoteFeatureFlags:{},cacheTimestamp:0}}r.getDefaultRemoteFeatureFlagControllerState=m;class p extends h.BaseController{constructor({messenger:e,state:t,clientConfigApiService:c,fetchInterval:u=r.DEFAULT_CACHE_DURATION,disabled:d=!1}){super({name:r.controllerName,metadata:f,messenger:e,state:{remoteFeatureFlags:{},cacheTimestamp:0,...t}}),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l(this,n,u,"f"),l(this,i,d,"f"),l(this,a,c,"f")}async updateRemoteFeatureFlags(){if(d(this,i,"f")||!d(this,s,"m",c).call(this))return;let e;if(d(this,o,"f"))await d(this,o,"f");else{try{l(this,o,d(this,a,"f").fetchRemoteFeatureFlags(),"f"),e=await d(this,o,"f")}finally{l(this,o,undefined,"f")}d(this,s,"m",u).call(this,e.remoteFeatureFlags)}}enable(){l(this,i,!1,"f")}disable(){l(this,i,!0,"f")}}r.RemoteFeatureFlagController=p,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakSet,c=function(){return Date.now()-this.state.cacheTimestamp>d(this,n,"f")},u=function(e){this.update((()=>({remoteFeatureFlags:e,cacheTimestamp:Date.now()})))}}}},{package:"@metamask/remote-feature-flag-controller",file:"node_modules/@metamask/remote-feature-flag-controller/dist/remote-feature-flag-controller.cjs"}],[214,{"@metamask/utils":2620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if((0,s.hasProperty)(e,"NftController")&&(0,s.isObject)(e.NftController)){const t=e.NftController;if((0,s.hasProperty)(t,"allNftContracts")&&(0,s.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,s.isObject)(r)&&n(r))for(const e of Object.keys(r))(0,s.isStrictHexString)(e)||delete r[e]}))}if((0,s.hasProperty)(t,"allNfts")&&(0,s.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,s.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const r=e[t];if((0,s.isObject)(r)&&n(r))for(const e of Object.keys(r))(0,s.isStrictHexString)(e)||delete r[e]}))}e.NftController=t}if((0,s.hasProperty)(e,"TokenListController")&&(0,s.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,s.hasProperty)(t,"tokensChainsCache")&&(0,s.isObject)(t.tokensChainsCache)&&n(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,s.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,s.hasProperty)(e,"TokensController")&&(0,s.isObject)(e.TokensController)){const t=e.TokensController;if((0,s.hasProperty)(t,"allTokens")&&(0,s.isObject)(t.allTokens)&&n(t.allTokens)){const{allTokens:e}=t;for(const r of Object.keys(e))(0,s.isStrictHexString)(r)||delete t.allTokens[r]}if((0,s.hasProperty)(t,"allIgnoredTokens")&&(0,s.isObject)(t.allIgnoredTokens)&&n(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const r of Object.keys(e))(0,s.isStrictHexString)(r)||delete t.allIgnoredTokens[r]}if((0,s.hasProperty)(t,"allDetectedTokens")&&(0,s.isObject)(t.allDetectedTokens)&&n(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const r of Object.keys(e))(0,s.isStrictHexString)(r)||delete t.allDetectedTokens[r]}e.TokensController=t}return e};var s=e("@metamask/utils");function n(e){return Object.keys(e).some((e=>(0,s.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[215,{"./077-supplements/077-supplement-for-082":211,"./077-supplements/077-supplement-for-084":212,"./077-supplements/077-supplement-for-086":213,"./077-supplements/077-supplement-for-088":214,"@metamask/utils":2620,lodash:4111,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash"),n=l(e("loglevel")),i=e("@metamask/utils"),a=l(e("./077-supplements/077-supplement-for-082")),o=l(e("./077-supplements/077-supplement-for-084")),c=l(e("./077-supplements/077-supplement-for-086")),u=l(e("./077-supplements/077-supplement-for-088"));function l(e){return e&&e.__esModule?e:{default:e}}r.default={version:77,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=77;let r=function(e){if(!(0,i.hasProperty)(e,"TokenListController"))return n.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,i.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,i.hasProperty)(e.TokenListController,"tokensChainsCache"))return n.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:s}=e,{tokensChainsCache:a}=s;let o,c;for(const e in a){var u,l;if(o=a[e].data||{},c={},Array.isArray(o))for(const e of o)c[e.address]=e;else if((null===(u=Object.keys(o)[0])||void 0===u?void 0:u.toLowerCase())!==(null===(l=o[Object.keys(o)[0]])||void 0===l||null===(l=l.address)||void 0===l?void 0:l.toLowerCase()))for(const e in o)c[o[e].address]=o[e];a[e].data=Object.keys(c).length>0?c:o}return s.tokensChainsCache=a,{...e,TokenListController:{...s}}}(t.data);return r=(0,a.default)(r),r=(0,o.default)(r),r=(0,c.default)(r),r=(0,u.default)(r),t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[2155,{"@metamask/base-controller":1349,"@metamask/swappable-obj-proxy":2503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=r.METAMASK_DOMAIN=r.controllerName=void 0;const f=e("@metamask/base-controller"),m=e("@metamask/swappable-obj-proxy");r.controllerName="SelectedNetworkController";const p={domains:{persist:!0,anonymous:!1}},g=["npm:","local:"];r.METAMASK_DOMAIN="metamask",r.SelectedNetworkControllerActionTypes={getState:`${r.controllerName}:getState`,getNetworkClientIdForDomain:`${r.controllerName}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${r.controllerName}:setNetworkClientIdForDomain`},r.SelectedNetworkControllerEventTypes={stateChange:`${r.controllerName}:stateChange`};class y extends f.BaseController{constructor({messenger:e,state:t={domains:{}},useRequestQueuePreference:o,onPreferencesStateChange:u,domainProxyMap:f}){super({name:r.controllerName,metadata:p,messenger:e,state:t}),s.add(this),n.set(this,void 0),i.set(this,void 0),d(this,i,o,"f"),d(this,n,f,"f"),h(this,s,"m",a).call(this),this.messagingSystem.call("PermissionController:getSubjectNames").filter((e=>this.state.domains[e]===undefined)).forEach((e=>this.setNetworkClientIdForDomain(e,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId))),this.messagingSystem.subscribe("PermissionController:stateChange",((e,t)=>{t.forEach((({op:e,path:t})=>{if("subjects"===t[0]&&t[1]!==undefined&&"string"==typeof t[1]){const r=t[1];"add"===e&&this.state.domains[r]===undefined?this.setNetworkClientIdForDomain(r,this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId):"remove"===e&&this.state.domains[r]!==undefined&&h(this,s,"m",c).call(this,r)}}))})),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e,networkConfigurationsByChainId:t},r)=>{const s=r.find((({op:e,path:t})=>("replace"===e||"remove"===e)&&"networkConfigurationsByChainId"===t[0]));if(s){const r=Object.values(t).reduce(((e,t)=>(t.rpcEndpoints.forEach((({networkClientId:r})=>e[r]=t.chainId)),e)),{});Object.entries(this.state.domains).forEach((([n,i])=>{const a=r[i];if("remove"!==s.op||a){if("replace"===s.op){const e=s.path[1];if(!a||a===e){const r=t[e],{networkClientId:s}=r.rpcEndpoints[r.defaultRpcEndpointIndex];i!==s&&this.setNetworkClientIdForDomain(n,s)}}}else this.setNetworkClientIdForDomain(n,e)}))}})),u((({useRequestQueue:e})=>{h(this,i,"f")!==e&&(e?h(this,s,"m",l).call(this):Object.keys(this.state.domains).forEach((e=>{h(this,s,"m",c).call(this,e)})),d(this,i,e,"f"))}))}setNetworkClientIdForDomain(e,t){if(h(this,i,"f")){if(e===r.METAMASK_DOMAIN)throw new Error(`NetworkClientId for domain "${r.METAMASK_DOMAIN}" cannot be set on the SelectedNetworkController`);if(!g.some((t=>e.startsWith(t)))){if(!h(this,s,"m",u).call(this,e))throw new Error("NetworkClientId for domain cannot be called with a domain that has not yet been granted permissions");h(this,s,"m",o).call(this,e,t)}}}getNetworkClientIdForDomain(e){const{selectedNetworkClientId:t}=this.messagingSystem.call("NetworkController:getState");return h(this,i,"f")?this.state.domains[e]??t:t}getProviderAndBlockTracker(e){if(e===r.METAMASK_DOMAIN||g.some((t=>e.startsWith(t)))){const e=this.messagingSystem.call("NetworkController:getSelectedNetworkClient");if(e===undefined)throw new Error("Selected network not initialized");return e}let t=h(this,n,"f").get(e);if(t===undefined){let r;if(h(this,i,"f")&&h(this,s,"m",u).call(this,e)){const t=this.getNetworkClientIdForDomain(e);r=this.messagingSystem.call("NetworkController:getNetworkClientById",t)}else if(r=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),r===undefined)throw new Error("Selected network not initialized");t={provider:(0,m.createEventEmitterProxy)(r.provider),blockTracker:(0,m.createEventEmitterProxy)(r.blockTracker,{eventFilter:"skipInternal"})},h(this,n,"f").set(e,t)}return t}}r.SelectedNetworkController=y,n=new WeakMap,i=new WeakMap,s=new WeakSet,a=function(){this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))},o=function(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t);this.update((r=>{r.domains[e]=t}));const s=this.getProviderAndBlockTracker(e);s.provider.setTarget(r.provider),s.blockTracker.setTarget(r.blockTracker)},c=function(e){const t=this.messagingSystem.call("NetworkController:getSelectedNetworkClient"),r=h(this,n,"f").get(e);r&&t?(r.provider.setTarget(t.provider),r.blockTracker.setTarget(t.blockTracker)):r&&h(this,n,"f").delete(e),this.update((t=>{delete t.domains[e]}))},u=function(e){return this.messagingSystem.call("PermissionController:hasPermissions",e)},l=function(){h(this,n,"f").forEach(((e,t)=>{const{selectedNetworkClientId:r}=this.messagingSystem.call("NetworkController:getState");h(this,s,"m",u).call(this,t)&&h(this,s,"m",o).call(this,t,r)}))}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkController.cjs"}],[2156,{"./SelectedNetworkController.cjs":2155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=void 0;const s=e("./SelectedNetworkController.cjs");r.createSelectedNetworkMiddleware=e=>(t,r,n)=>{if(!t.origin)throw new Error("Request object is lacking an 'origin'");var i;return t.networkClientId=(i=t.origin,e.call(s.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,i)),n()}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkMiddleware.cjs"}],[2157,{"./SelectedNetworkController.cjs":2155,"./SelectedNetworkMiddleware.cjs":2156},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=r.METAMASK_DOMAIN=r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=void 0;var s=e("./SelectedNetworkController.cjs");Object.defineProperty(r,"SelectedNetworkControllerActionTypes",{enumerable:!0,get:function(){return s.SelectedNetworkControllerActionTypes}}),Object.defineProperty(r,"SelectedNetworkControllerEventTypes",{enumerable:!0,get:function(){return s.SelectedNetworkControllerEventTypes}}),Object.defineProperty(r,"SelectedNetworkController",{enumerable:!0,get:function(){return s.SelectedNetworkController}}),Object.defineProperty(r,"METAMASK_DOMAIN",{enumerable:!0,get:function(){return s.METAMASK_DOMAIN}});var n=e("./SelectedNetworkMiddleware.cjs");Object.defineProperty(r,"createSelectedNetworkMiddleware",{enumerable:!0,get:function(){return n.createSelectedNetworkMiddleware}})}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.cjs"}],[216,{"@metamask/utils":2620,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.hasProperty)(e,"PhishingController")||!(0,n.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[217,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:79,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=79;const r=function(e){var t,r;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(r=e.metamask)||void 0===r?void 0:r.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[218,{lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=e("lodash");r.default={version:80,async migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=80;const r=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[219,{"@metamask/utils":2620,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);t.meta.version=i;const r=function(e){if(!(0,n.hasProperty)(e,"SnapController")||!(0,n.hasProperty)(e,"PermissionController")||!(0,n.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:r}=t;if(!(0,n.isObject)(r))return e;const i="wallet_snap_";for(const[t,a]of Object.entries(r)){if(!(0,n.isObject)(a)||!(0,n.isObject)(a.permissions))return e;let r,o=1;const{permissions:c}=a,u={...c};for(const[a,l]of Object.entries(c))if(a.startsWith(i)){if(!(0,n.isObject)(l)||!(0,n.hasProperty)(l,"id")||!(0,n.hasProperty)(l,"date"))return e;if((0,n.hasProperty)(u,"wallet_snap")||(u.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,n.isObject)(u.wallet_snap))return e;if(!(0,s.isArray)(u.wallet_snap.caveats))return e;const c=a.slice(i.length),d=u.wallet_snap.caveats[0];if(!(0,n.isObject)(d))return e;if(!(0,n.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,n.hasProperty)(d,"value")||!(0,n.isObject)(d.value))return e;if(d.value[c]={},"number"!=typeof l.date||"string"!=typeof l.id)return e;l.date>o&&(o=l.date,r=l.id),delete u[a]}u.wallet_snap&&(u.wallet_snap.date=o,u.wallet_snap.id=r,a.permissions=u)}return e}(t.data);return t.data=r,t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[2192,{"./constants":2193,"./types":2195,"./utils":2196,"@ethersproject/bytes":487,"@metamask/controller-utils":1375,"@metamask/eth-query":1534,"@metamask/polling-controller":2004,"@metamask/transaction-controller":2523,"bignumber.js":2235,"lodash/cloneDeep":4091},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s,n,i,a,o,c,u,l,d,h,f,m,p,g,y,b,v,w,_,T,k,S,E,I=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},P=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},j=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultSmartTransactionsControllerState=r.DEFAULT_INTERVAL=void 0;const C=e("@ethersproject/bytes"),A=e("@metamask/controller-utils"),x=j(e("@metamask/eth-query")),R=e("@metamask/polling-controller"),O=e("@metamask/transaction-controller"),M=e("bignumber.js"),N=j(e("lodash/cloneDeep")),B=e("./constants"),L=e("./types"),D=e("./utils");r.DEFAULT_INTERVAL=5e3;const H="`ethQuery` is not defined on SmartTransactionsController",$="SmartTransactionsController",F={smartTransactionsState:{persist:!1,anonymous:!0}};function U(){return{smartTransactionsState:{smartTransactions:{},userOptIn:null,userOptInV2:null,fees:{approvalTxFees:null,tradeTxFees:null},liveness:!0,livenessByChainId:{[A.ChainId.mainnet]:!0,[A.ChainId.sepolia]:!0},feesByChainId:{[A.ChainId.mainnet]:{approvalTxFees:null,tradeTxFees:null},[A.ChainId.sepolia]:{approvalTxFees:null,tradeTxFees:null}}}}}r.getDefaultSmartTransactionsControllerState=U;class V extends((0,R.StaticIntervalPollingController)()){constructor({interval:e=r.DEFAULT_INTERVAL,clientId:t,chainId:g=A.ChainId.mainnet,supportedChainIds:y=[A.ChainId.mainnet,A.ChainId.sepolia],getNonceLock:b,confirmExternalTransaction:v,trackMetaMetricsEvent:w,state:_={},messenger:T,getTransactions:k,getMetaMetricsProps:S,getFeatureFlags:E,updateTransaction:P}){super({name:$,metadata:F,messenger:T,state:Object.assign(Object.assign({},U()),_)}),s.add(this),n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f.set(this,void 0),m.set(this,void 0),p.set(this,void 0),I(this,n,e,"f"),I(this,i,t,"f"),I(this,a,g,"f"),I(this,o,y,"f"),this.setIntervalLength(e),I(this,c,b,"f"),I(this,u,undefined,"f"),I(this,l,v,"f"),I(this,d,k,"f"),I(this,h,w,"f"),I(this,f,S,"f"),I(this,m,E,"f"),I(this,p,P,"f"),this.initializeSmartTransactionsForChainId(),this.messagingSystem.subscribe("NetworkController:stateChange",(({selectedNetworkClientId:e})=>{const{configuration:{chainId:t},provider:r}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);I(this,a,t,"f"),I(this,u,new x.default(r),"f"),this.initializeSmartTransactionsForChainId(),this.checkPoll(this.state)})),this.messagingSystem.subscribe(`${$}:stateChange`,(e=>this.checkPoll(e)))}async _executePoll({networkClientId:e}){const t=P(this,s,"m",T).call(this,{networkClientId:e});return P(this,o,"f").includes(t)?this.updateSmartTransactions({networkClientId:e}):Promise.resolve()}checkPoll({smartTransactionsState:{smartTransactions:e}}){const t=e[P(this,a,"f")],r=null==t?void 0:t.filter(D.isSmartTransactionPending);!this.timeoutHandle&&(null==r?void 0:r.length)>0?this.poll():this.timeoutHandle&&0===(null==r?void 0:r.length)&&this.stop()}initializeSmartTransactionsForChainId(){P(this,o,"f").includes(P(this,a,"f"))&&this.update((e=>{var t;e.smartTransactionsState.smartTransactions[P(this,a,"f")]=null!==(t=e.smartTransactionsState.smartTransactions[P(this,a,"f")])&&void 0!==t?t:[]}))}async poll(e){e&&I(this,n,e,"f"),this.timeoutHandle&&clearInterval(this.timeoutHandle),P(this,o,"f").includes(P(this,a,"f"))&&(this.timeoutHandle=setInterval((()=>{(0,A.safelyExecute)((async()=>this.updateSmartTransactions()))}),P(this,n,"f")),await(0,A.safelyExecute)((async()=>this.updateSmartTransactions())))}async stop(){this.timeoutHandle&&clearInterval(this.timeoutHandle),this.timeoutHandle=undefined}setOptInState(e){this.update((t=>{t.smartTransactionsState.userOptInV2=e}))}trackStxStatusChange(e,t){let r=(0,N.default)(e);r=Object.assign(Object.assign({},(0,N.default)(t)),r),r.status!==(null==t?void 0:t.status)&&P(this,h,"f").call(this,{event:B.MetaMetricsEventName.StxStatusUpdated,category:B.MetaMetricsEventCategory.Transactions,properties:(0,D.getSmartTransactionMetricsProperties)(r),sensitiveProperties:(0,D.getSmartTransactionMetricsSensitiveProperties)(r)})}isNewSmartTransaction(e){const{smartTransactionsState:{smartTransactions:t}}=this.state,r=t[P(this,a,"f")],s=null==r?void 0:r.findIndex((t=>t.uuid===e));return-1===s||s===undefined}updateSmartTransaction(e,{networkClientId:t}={}){let r=P(this,u,"f"),n=P(this,a,"f");if(t){const{configuration:e,provider:s}=this.messagingSystem.call("NetworkController:getNetworkClientById",t);n=e.chainId,r=new x.default(s)}P(this,s,"m",v).call(this,e,{chainId:n,ethQuery:r})}async updateSmartTransactions({networkClientId:e}={}){const{smartTransactionsState:{smartTransactions:t}}=this.state,r=t[P(this,s,"m",T).call(this,{networkClientId:e})].filter(D.isSmartTransactionPending).map((e=>e.uuid));r.length>0&&this.fetchSmartTransactionsStatus(r,{networkClientId:e})}async fetchSmartTransactionsStatus(e,{networkClientId:t}={}){const r=new URLSearchParams({uuids:e.join(",")}),n=P(this,s,"m",T).call(this,{networkClientId:t}),i=P(this,s,"m",k).call(this,{networkClientId:t}),a=`${(0,D.getAPIRequestURL)(L.APIType.BATCH_STATUS,n)}?${r.toString()}`,o=await P(this,s,"m",g).call(this,a);for(const[e,t]of Object.entries(o)){const r={statusMetadata:t,status:(0,D.calculateStatus)(t),cancellable:(0,D.isSmartTransactionCancellable)(t),uuid:e};await P(this,s,"m",v).call(this,r,{chainId:n,ethQuery:i})}return o}async addNonceToTransaction(e){const t=await P(this,c,"f").call(this,e.from),r=t.nextNonce;return t.releaseLock(),Object.assign(Object.assign({},e),{nonce:`0x${r.toString(16)}`})}clearFees(){const e={approvalTxFees:null,tradeTxFees:null};return this.update((t=>{t.smartTransactionsState.fees=e})),e}async getFees(e,t,{networkClientId:r}={}){const n=P(this,s,"m",T).call(this,{networkClientId:r}),i=[];let o;if(t){const r=await this.addNonceToTransaction(t);i.push(r),o=Object.assign(Object.assign({},e),{nonce:(0,D.incrementNonceInHex)(r.nonce)})}else o=e.nonce?e:await this.addNonceToTransaction(e);i.push(o);const c=await P(this,s,"m",g).call(this,(0,D.getAPIRequestURL)(L.APIType.GET_FEES,n),{method:"POST",body:JSON.stringify({txs:i})});let u,l;return t?(u=null==c?void 0:c.txs[0],l=null==c?void 0:c.txs[1]):(u=null,l=null==c?void 0:c.txs[0]),this.update((e=>{n===P(this,a,"f")&&(e.smartTransactionsState.fees={approvalTxFees:u,tradeTxFees:l}),e.smartTransactionsState.feesByChainId[n]={approvalTxFees:u,tradeTxFees:l}})),{approvalTxFees:u,tradeTxFees:l}}async submitSignedTransactions({transactionMeta:e,txParams:t,signedTransactions:r,signedCanceledTransactions:n,networkClientId:i}){var a,o;const u=P(this,s,"m",T).call(this,{networkClientId:i}),l=P(this,s,"m",k).call(this,{networkClientId:i}),d=await P(this,s,"m",g).call(this,(0,D.getAPIRequestURL)(L.APIType.SUBMIT_TRANSACTIONS,u),{method:"POST",body:JSON.stringify({rawTxs:r,rawCancelTxs:n})}),h=Date.now();let f;try{const e=await(0,A.query)(l,"getBalance",[null==t?void 0:t.from]);f=new M.BigNumber(e).toString(16)}catch(e){console.error("provider error",e)}let m,p,y={};t&&!t.nonce&&(p=await P(this,c,"f").call(this,t.from),m=(0,C.hexlify)(p.nextNonce),y=p.nonceDetails,null!==(a=t.nonce)&&void 0!==a||(t.nonce=m));const b=Object.assign(Object.assign({},d),{txHash:(0,D.getTxHash)(r[0])});try{await P(this,s,"m",v).call(this,{chainId:u,nonceDetails:y,preTxBalance:f,status:L.SmartTransactionStatuses.PENDING,time:h,txParams:t,uuid:b.uuid,txHash:b.txHash,cancellable:!0,type:null!==(o=null==e?void 0:e.type)&&void 0!==o?o:"swap",transactionId:null==e?void 0:e.id},{chainId:u,ethQuery:l})}finally{null==p||p.releaseLock()}return b}async cancelSmartTransaction(e,{networkClientId:t}={}){const r=P(this,s,"m",T).call(this,{networkClientId:t});await P(this,s,"m",g).call(this,(0,D.getAPIRequestURL)(L.APIType.CANCEL,r),{method:"POST",body:JSON.stringify({uuid:e})})}async fetchLiveness({networkClientId:e}={}){const t=P(this,s,"m",T).call(this,{networkClientId:e});let r=!1;try{const e=await P(this,s,"m",g).call(this,(0,D.getAPIRequestURL)(L.APIType.LIVENESS,t));r=Boolean(e.smartTransactions)}catch(e){console.log('"fetchLiveness" API call failed')}return this.update((e=>{t===P(this,a,"f")&&(e.smartTransactionsState.liveness=r),e.smartTransactionsState.livenessByChainId[t]=r})),r}async setStatusRefreshInterval(e){e!==P(this,n,"f")&&I(this,n,e,"f")}getTransactions({addressFrom:e,status:t}){return P(this,s,"m",S).call(this).filter((r=>{var s;return r.status===t&&(null===(s=r.txParams)||void 0===s?void 0:s.from)===e}))}getSmartTransactionByMinedTxHash(e){if(!e)return undefined;return P(this,s,"m",S).call(this).find((t=>{var r,s;return(null===(s=null===(r=t.statusMetadata)||void 0===r?void 0:r.minedHash)||void 0===s?void 0:s.toLowerCase())===e.toLowerCase()}))}wipeSmartTransactions({address:e,ignoreNetwork:t}){if(!e)return;const r=e.toLowerCase();if(t){const{smartTransactionsState:{smartTransactions:e}}=this.state;Object.keys(e).forEach((e=>{P(this,s,"m",E).call(this,{chainId:e,addressLowerCase:r})}))}else P(this,s,"m",E).call(this,{chainId:P(this,a,"f"),addressLowerCase:r})}}r.default=V,n=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,s=new WeakSet,g=async function(e,t){const r=Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json"},P(this,i,"f")&&{"X-Client-Id":P(this,i,"f")})});return(0,D.handleFetch)(e,r)},y=function(e,{chainId:t=P(this,a,"f")}){var r;const{smartTransactionsState:{smartTransactions:s}}=this.state,n=null!==(r=s[t])&&void 0!==r?r:[],i=null==n?void 0:n.findIndex((t=>t.uuid===e.uuid));-1!==i&&(0,A.isSafeDynamicKey)(t)&&this.update((r=>{r.smartTransactionsState.smartTransactions[t][i]=Object.assign(Object.assign({},r.smartTransactionsState.smartTransactions[t][i]),e)}))},b=async function(e){const t=await P(this,f,"f").call(this);e.accountHardwareType=null==t?void 0:t.accountHardwareType,e.accountType=null==t?void 0:t.accountType,e.deviceModel=null==t?void 0:t.deviceModel},v=async function(e,{chainId:t=P(this,a,"f"),ethQuery:r=P(this,u,"f")}){var n,o;const{smartTransactionsState:{smartTransactions:c}}=this.state,l=null!==(n=c[t])&&void 0!==n?n:[],h=null==l?void 0:l.findIndex((t=>t.uuid===e.uuid)),f=this.isNewSmartTransaction(e.uuid);if(P(this,u,"f")===undefined)throw new Error(H);if(f&&await P(this,s,"m",b).call(this,e),this.trackStxStatusChange(e,f?undefined:l[h]),f){const t=null==l?void 0:l.findIndex((t=>{var r,s,n;return(null===(r=t.txParams)||void 0===r?void 0:r.nonce)===(null===(s=e.txParams)||void 0===s?void 0:s.nonce)&&(null===(n=t.status)||void 0===n?void 0:n.startsWith("cancelled"))})),r=[(0,N.default)(e)],s=Object.assign(Object.assign({},e),{history:r}),n=t>-1?l.slice(0,t).concat(l.slice(t+1)).concat(s):l.concat(s);return void this.update((e=>{e.smartTransactionsState.smartTransactions[P(this,a,"f")]=n}))}const g=l[h],v=Object.assign(Object.assign({},g),e);if(this.messagingSystem.publish("SmartTransactionsController:smartTransaction",v),v.status===L.SmartTransactionStatuses.CANCELLED){if((0,D.getReturnTxHashAsap)(P(this,i,"f"),null===(o=P(this,m,"f").call(this))||void 0===o?void 0:o.smartTransactions)&&v.transactionId){const e=P(this,d,"f").call(this).find((e=>e.id===v.transactionId));if(e){const t=Object.assign(Object.assign({},e),{status:O.TransactionStatus.failed});P(this,p,"f").call(this,t,"Smart transaction cancelled")}}}e.status!==L.SmartTransactionStatuses.SUCCESS&&e.status!==L.SmartTransactionStatuses.REVERTED||e.confirmed?P(this,s,"m",y).call(this,e,{chainId:t}):await P(this,s,"m",_).call(this,v,{chainId:t,ethQuery:r})},w=function(e){if(!e)return!0;const t=P(this,d,"f").call(this),r=null==t?void 0:t.find((t=>{var r;return(null===(r=t.hash)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()}));return!r||![O.TransactionStatus.confirmed,O.TransactionStatus.submitted].includes(r.status)},_=async function(e,{chainId:t=P(this,a,"f"),ethQuery:r=P(this,u,"f")}){var n;if(r===undefined)throw new Error(H);const i=null===(n=e.statusMetadata)||void 0===n?void 0:n.minedHash;try{const n=await(0,A.query)(r,"getTransactionReceipt",[i]),a=await(0,A.query)(r,"getTransactionByHash",[i]),o=null==a?void 0:a.maxFeePerGas,c=null==a?void 0:a.maxPriorityFeePerGas;if(null==n?void 0:n.blockNumber){const a=await(0,A.query)(r,"getBlockByNumber",[null==n?void 0:n.blockNumber,!1]),u=null==a?void 0:a.baseFeePerGas,d=Object.assign(Object.assign({},e.txParams),{maxFeePerGas:o,maxPriorityFeePerGas:c}),f=Object.assign(Object.assign({},e),{id:e.uuid,status:O.TransactionStatus.confirmed,hash:i,txParams:d}),m=(0,D.snapshotFromTxMeta)(f),p=(0,D.replayHistory)(f.history),g=(0,D.generateHistoryEntry)(p,m,"txStateManager: setting status to confirmed"),b=g.length>0?Object.assign(Object.assign({},f),{history:f.history.concat(g)}):f;P(this,s,"m",w).call(this,i)&&P(this,l,"f").call(this,b,n,u),P(this,h,"f").call(this,{event:B.MetaMetricsEventName.StxConfirmed,category:B.MetaMetricsEventCategory.Transactions,properties:(0,D.getSmartTransactionMetricsProperties)(e),sensitiveProperties:(0,D.getSmartTransactionMetricsSensitiveProperties)(e)}),P(this,s,"m",y).call(this,Object.assign(Object.assign({},e),{confirmed:!0}),{chainId:t})}}catch(e){P(this,h,"f").call(this,{event:B.MetaMetricsEventName.StxConfirmationFailed,category:B.MetaMetricsEventCategory.Transactions}),console.error("confirm error",e)}finally{this.messagingSystem.publish("SmartTransactionsController:smartTransactionConfirmationDone",e)}},T=function({networkClientId:e}={}){return e?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId:P(this,a,"f")},k=function({networkClientId:e}={}){if(e){const{provider:t}=this.messagingSystem.call("NetworkController:getNetworkClientById",e);return new x.default(t)}if(P(this,u,"f")===undefined)throw new Error(H);return P(this,u,"f")},S=function(){const{smartTransactionsState:{smartTransactions:e}}=this.state,t=null==e?void 0:e[P(this,a,"f")];return t&&0!==t.length?t:[]},E=function({chainId:e,addressLowerCase:t}){const{smartTransactionsState:{smartTransactions:r}}=this.state,s=null==r?void 0:r[e];if(!s||0===s.length)return;const n=s.filter((e=>{var r;return(null===(r=e.txParams)||void 0===r?void 0:r.from)!==t}));this.update((t=>{t.smartTransactionsState.smartTransactions[e]=n}))}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/SmartTransactionsController.js"}],[2193,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsEventCategory=r.MetaMetricsEventName=r.SENTINEL_API_BASE_URL_MAP=r.API_BASE_URL=void 0,r.API_BASE_URL="https://transaction.api.cx.metamask.io",r.SENTINEL_API_BASE_URL_MAP={1:"https://tx-sentinel-ethereum-mainnet.api.cx.metamask.io",11155111:"https://tx-sentinel-ethereum-sepolia.api.cx.metamask.io"},function(e){e.StxStatusUpdated="STX Status Updated",e.StxConfirmed="STX Confirmed",e.StxConfirmationFailed="STX Confirmation Failed",e.ReceiveRequest="Receive Request"}(r.MetaMetricsEventName||(r.MetaMetricsEventName={})),function(e){e.Transactions="Transactions",e.Navigation="Navigation"}(r.MetaMetricsEventCategory||(r.MetaMetricsEventCategory={}))}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/constants.js"}],[2194,{"./SmartTransactionsController":2192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./SmartTransactionsController");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s(n).default}})}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/index.js"}],[2196,{"../package.json":2236,"./constants":2193,"./types":2195,"@ethereumjs/tx":2209,"@ethereumjs/util":2223,"@ethersproject/bytes":487,"bignumber.js":2235,buffer:3392,"fast-json-patch":3712,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.getReturnTxHashAsap=r.getSmartTransactionMetricsSensitiveProperties=r.getSmartTransactionMetricsProperties=r.getTxHash=r.incrementNonceInHex=r.isSmartTransactionCancellable=r.handleFetch=r.mapKeysToCamel=r.getStxProcessingTime=r.snapshotFromTxMeta=r.replayHistory=r.generateHistoryEntry=r.calculateStatus=r.getAPIRequestURL=r.isSmartTransactionStatusResolved=r.isSmartTransactionPending=void 0;const n=e("@ethereumjs/tx"),i=e("@ethereumjs/util"),a=e("@ethersproject/bytes"),o=e("bignumber.js"),c=s(e("fast-json-patch")),u=s(e("lodash")),l=s(e("../package.json")),d=e("./constants"),h=e("./types");r.isSmartTransactionPending=function(e){return e.status===h.SmartTransactionStatuses.PENDING};r.isSmartTransactionStatusResolved=e=>"uuid_not_found"===e,r.getAPIRequestURL=function(e,t){const r=parseInt(t,16);switch(e){case h.APIType.GET_FEES:return`${d.API_BASE_URL}/networks/${r}/getFees`;case h.APIType.ESTIMATE_GAS:return`${d.API_BASE_URL}/networks/${r}/estimateGas`;case h.APIType.SUBMIT_TRANSACTIONS:return`${d.API_BASE_URL}/networks/${r}/submitTransactions?stxControllerVersion=${l.default.version}`;case h.APIType.CANCEL:return`${d.API_BASE_URL}/networks/${r}/cancel`;case h.APIType.BATCH_STATUS:return`${d.API_BASE_URL}/networks/${r}/batchStatus`;case h.APIType.LIVENESS:return`${d.SENTINEL_API_BASE_URL_MAP[r]}/network`;default:throw new Error("Invalid APIType")}};r.calculateStatus=e=>{if((0,r.isSmartTransactionStatusResolved)(e))return h.SmartTransactionStatuses.RESOLVED;const t=[h.SmartTransactionCancellationReason.WOULD_REVERT,h.SmartTransactionCancellationReason.TOO_CHEAP,h.SmartTransactionCancellationReason.DEADLINE_MISSED,h.SmartTransactionCancellationReason.INVALID_NONCE,h.SmartTransactionCancellationReason.USER_CANCELLED,h.SmartTransactionCancellationReason.PREVIOUS_TX_CANCELLED];if((null==e?void 0:e.minedTx)===h.SmartTransactionMinedTx.NOT_MINED){if(e.cancellationReason===h.SmartTransactionCancellationReason.NOT_CANCELLED)return h.SmartTransactionStatuses.PENDING;const r=t.findIndex((t=>t===e.cancellationReason))>-1;if(e.cancellationReason&&r)return e.isSettled?h.cancellationReasonToStatusMap[e.cancellationReason]:h.SmartTransactionStatuses.PENDING}else{if((null==e?void 0:e.minedTx)===h.SmartTransactionMinedTx.SUCCESS)return h.SmartTransactionStatuses.SUCCESS;if((null==e?void 0:e.minedTx)===h.SmartTransactionMinedTx.CANCELLED)return h.SmartTransactionStatuses.CANCELLED;if((null==e?void 0:e.minedTx)===h.SmartTransactionMinedTx.REVERTED)return h.SmartTransactionStatuses.REVERTED;if((null==e?void 0:e.minedTx)===h.SmartTransactionMinedTx.UNKNOWN)return h.SmartTransactionStatuses.UNKNOWN}return h.SmartTransactionStatuses.UNKNOWN},r.generateHistoryEntry=function(e,t,r){const s=c.default.compare(e,t);return s[0]&&(r&&(s[0].note=r),s[0].timestamp=Date.now()),s},r.replayHistory=function(e){return u.default.cloneDeep(e).reduce(((e,t)=>c.default.applyPatch(e,t).newDocument))},r.snapshotFromTxMeta=function(e){const t=Object.assign({},e);return delete t.history,u.default.cloneDeep(t)};r.getStxProcessingTime=e=>e?Math.round((Date.now()-e)/1e3):undefined;r.mapKeysToCamel=e=>{if(!u.default.isObject(e))return e;const t=u.default.mapValues(e,(e=>u.default.isArray(e)?e.map(r.mapKeysToCamel):u.default.isObject(e)?(0,r.mapKeysToCamel)(e):e));return u.default.mapKeys(t,((e,t)=>u.default.camelCase(t)))},r.handleFetch=async function(e,t){const s=await fetch(e,t),n=await s.json();if(!s.ok)throw console.log("response",s),new Error(`Fetch error:${JSON.stringify(Object.assign({status:s.status},(0,r.mapKeysToCamel)(n)))}`);return n};r.isSmartTransactionCancellable=e=>e.minedTx===h.SmartTransactionMinedTx.NOT_MINED&&(!e.cancellationReason||e.cancellationReason===h.SmartTransactionCancellationReason.NOT_CANCELLED);r.incrementNonceInHex=e=>{const t=new o.BigNumber(e,16).toString(10);return(0,a.hexlify)(Number(t)+1)};r.getTxHash=e=>{if(!e)return"";const r=n.TransactionFactory.fromSerializedData(t.from(e.slice(2),"hex")).hash();return(0,i.bytesToHex)(r)};r.getSmartTransactionMetricsProperties=e=>{if(!e)return{};const t=e.statusMetadata;return{stx_status:e.status,type:e.type,processing_time:(0,r.getStxProcessingTime)(e.time),is_smart_transaction:!0,stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:!0,stx_duplicated:null==t?void 0:t.duplicated,stx_timed_out:null==t?void 0:t.timedOut,stx_proxied:null==t?void 0:t.proxied}};r.getSmartTransactionMetricsSensitiveProperties=e=>e?{token_from_symbol:e.sourceTokenSymbol,token_to_symbol:e.destinationTokenSymbol,account_hardware_type:e.accountHardwareType,account_type:e.accountType,device_model:e.deviceModel}:{};r.getReturnTxHashAsap=(e,t)=>e===h.ClientId.Extension?null==t?void 0:t.extensionReturnTxHashAsap:null==t?void 0:t.mobileReturnTxHashAsap}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/dist/utils.js"}],[2197,{"./types.js":2212,"./util.js":2213,"@ethereumjs/common":350,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseTransaction=void 0;const s=e("@ethereumjs/common"),n=e("@ethereumjs/util"),i=e("./types.js"),a=e("./util.js");r.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined,senderPubKey:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=s.Chain.Mainnet;const{nonce:r,gasLimit:i,to:o,value:c,data:u,v:l,r:d,s:h,type:f}=e;this._type=Number((0,n.bytesToBigInt)((0,n.toBytes)(f))),this.txOptions=t;const m=(0,n.toBytes)(""===o?"0x":o),p=(0,n.toBytes)(l),g=(0,n.toBytes)(d),y=(0,n.toBytes)(h);this.nonce=(0,n.bytesToBigInt)((0,n.toBytes)(r)),this.gasLimit=(0,n.bytesToBigInt)((0,n.toBytes)(i)),this.to=m.length>0?new n.Address(m):undefined,this.value=(0,n.bytesToBigInt)((0,n.toBytes)(c)),this.data=(0,n.toBytes)(""===u?"0x":u),this.v=p.length>0?(0,n.bytesToBigInt)(p):undefined,this.r=g.length>0?(0,n.bytesToBigInt)(g):undefined,this.s=y.length>0?(0,n.bytesToBigInt)(y):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const b=this.to===undefined||null===this.to,v=t.allowUnlimitedInitCodeSize??!1,w=t.common??this._getCommon();b&&w.isActivatedEIP(3860)&&!1===v&&(0,a.checkMaxInitCodeSize)(w,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}getValidationErrors(){const e=[];return this.isSigned()&&!this.verifySignature()&&e.push("Invalid Signature"),this.getBaseFee()>this.gasLimit&&e.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),e}isValid(){return 0===this.getValidationErrors().length}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=n.BIGINT_0;for(let s=0;s<this.data.length;s++)0===this.data[s]?r+=e:r+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return this.to===undefined||0===this.to.bytes.length}isSigned(){const{v:e,r:t,s:r}=this;return e!==undefined&&t!==undefined&&r!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,n.unpadBytes)(e).length}catch(e){return!1}}getSenderAddress(){return new n.Address((0,n.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;this.type===i.TransactionType.Legacy&&this.common.gteHardfork("spuriousDragon")&&!this.supports(i.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(i.Capability.EIP155ReplayProtection),t=!0);const r=this.getHashedMessageToSign(),s=this.common.customCrypto?.ecsign??n.ecsign,{v:a,r:o,s:c}=s(r,e),u=this.addSignature(a,o,c,!0);if(t){const e=this.activeCapabilities.indexOf(i.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return u}toJSON(){return{type:(0,n.bigIntToHex)(BigInt(this.type)),nonce:(0,n.bigIntToHex)(this.nonce),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:(0,n.bytesToHex)(this.data),v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}_getCommon(e,t){if(t!==undefined){const r=(0,n.bytesToBigInt)((0,n.toBytes)(t));if(e){if(e.chainId()!==r){const t=this._errorMsg(`The chain ID does not match the chain ID of Common. Got: ${r}, expected: ${e.chainId()}`);throw new Error(t)}return e.copy()}return s.Common.isSupportedChainId(r)?new s.Common({chain:r}):s.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN})}return e?.copy()??new s.Common({chain:this.DEFAULT_CHAIN})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[s,i]of Object.entries(e))switch(t){case 64:if(r){if(i!==undefined&&i>=n.MAX_UINT64){const e=this._errorMsg(`${s} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>n.MAX_UINT64){const e=this._errorMsg(`${s} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(r){if(i!==undefined&&i>=n.MAX_INTEGER){const e=this._errorMsg(`${s} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(i!==undefined&&i>n.MAX_INTEGER){const e=this._errorMsg(`${s} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,s]of Object.entries(e))if(t.includes(r)&&Array.isArray(s))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,n.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let s=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return s+=`signed=${t} hf=${r}`,s}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/baseTransaction.js"}],[2198,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getUpfrontCost=void 0,r.getUpfrontCost=function(e,t){const r=e.maxPriorityFeePerGas,s=e.maxFeePerGas-t,n=(r<s?r:s)+t;return e.gasLimit*n+e.value},r.getEffectivePriorityFee=function(e,t){if(t===undefined||t>e.maxFeePerGas)throw new Error("Tx cannot pay baseFee");const r=e.maxFeePerGas-t;return e.maxPriorityFeePerGas<r?e.maxPriorityFeePerGas:r}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip1559.js"}],[2199,{"../util.js":2213,"./legacy.js":2202,"@ethereumjs/rlp":375,"@ethereumjs/util":2223,"ethereum-cryptography/keccak.js":3589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateYParity=r.serialize=r.getHashedMessageToSign=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("../util.js"),o=e("./legacy.js");r.getHashedMessageToSign=function(e){return(e.common.customCrypto.keccak256??i.keccak256)(e.getMessageToSign())},r.serialize=function(e,t){return(0,n.concatBytes)((0,a.txTypeBytes)(e.type),s.RLP.encode(t??e.raw()))},r.validateYParity=function(e){const{v:t}=e;if(t!==undefined&&t!==n.BIGINT_0&&t!==n.BIGINT_1){const t=(0,o.errorMsg)(e,"The y-parity of the transaction should either be 0 or 1");throw new Error(t)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2718.js"}],[22,{"../../../shared/constants/app":4977,"../../../shared/constants/keyring":4986,"../../../shared/constants/metametrics":4989,"@metamask/base-controller":1349,"@metamask/message-manager":1836,events:3678,loglevel:4117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=l(e("events")),n=l(e("loglevel")),i=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends a.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:n,metricsEvent:a}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=n,this._metricsEvent=a,this.hub=new s.default,this._encryptionPublicKeyManager=new i.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){n.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),s=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,s,"received"),this._acceptApproval(t),this._getState()}catch(e){throw n.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:o.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((s=>{t(s,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const s=e[r],n=this._migrateMessage(s);t[r]=n}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,s=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:s,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[220,{"@metamask/utils":2620,lodash:4111,loglevel:4117,uuid:4904},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=c,t.data=function(e){if(!(0,i.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,i.isObject)(e.PreferencesController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,i.hasProperty)(e,"NetworkController")||!(0,i.isObject)(e.NetworkController)){var s,n;return null===(s=global.sentry)||void 0===s||null===(n=s.captureException)||void 0===n||n.call(s,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,i.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var c,u;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(i.isObject)){var l,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,i.isObject)(e)));return null===(l=global.sentry)||void 0===l||null===(d=l.captureException)||void 0===d||d.call(l,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:f}=e,{frequentRpcListDetail:m}=h;if(!Array.isArray(m))return e;const p=m.reduce(((e,{rpcUrl:t,chainId:r,ticker:s,nickname:n,rpcPrefs:i})=>({...e,[(0,a.v4)()]:{rpcUrl:t,chainId:r,ticker:s,rpcPrefs:i,nickname:n}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...f,networkConfigurations:p},PreferencesController:{...h}}}(t.data),t},r.version=void 0;var s,n=e("lodash"),i=e("@metamask/utils"),a=e("uuid"),o=(s=e("loglevel"))&&s.__esModule?s:{default:s};const c=r.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[2200,{"../util.js":2213,"./legacy.js":2202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const s=e("../util.js"),n=e("./legacy.js");r.getDataFee=function(e){return n.getDataFee(e,BigInt(s.AccessLists.getDataFeeEIP2930(e.accessList,e.common)))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip2930.js"}],[2201,{"../util.js":2213,"./legacy.js":2202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDataFee=void 0;const s=e("../util.js"),n=e("./legacy.js");r.getDataFee=function(e){const t=BigInt(s.AccessLists.getDataFeeEIP2930(e.accessList,e.common)),r=BigInt(e.authorizationList.length*Number(e.common.param("gasPrices","perAuthBaseCost")));return n.getDataFee(e,t+r)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/eip7702.js"}],[2202,{"../baseTransaction.js":2197,"../types.js":2212,"@ethereumjs/util":2223,"ethereum-cryptography/keccak.js":3589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getEffectivePriorityFee=r.getSenderPublicKey=r.validateHighS=r.hash=r.getDataFee=r.isSigned=r.errorMsg=void 0;const s=e("@ethereumjs/util"),n=e("ethereum-cryptography/keccak.js"),i=e("../baseTransaction.js"),a=e("../types.js");function o(e,t){return`${t} (${e.errorStr()})`}function c(e){const{s:t}=e;if(e.common.gteHardfork("homestead")&&t!==undefined&&t>s.SECP256K1_ORDER_DIV_2){const t=o(e,"Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(t)}}r.errorMsg=o,r.isSigned=function(e){const{v:t,r:r,s:s}=e;return t!==undefined&&r!==undefined&&s!==undefined},r.getDataFee=function(e,t){if(e.cache.dataFee&&e.cache.dataFee.hardfork===e.common.hardfork())return e.cache.dataFee.value;const r=i.BaseTransaction.prototype.getDataFee.bind(e)()+(t??0n);return Object.isFrozen(e)&&(e.cache.dataFee={value:r,hardfork:e.common.hardfork()}),r},r.hash=function(e){if(!e.isSigned()){const t=o(e,"Cannot call hash method if transaction is not signed");throw new Error(t)}const t=e.common.customCrypto.keccak256??n.keccak256;return Object.isFrozen(e)?(e.cache.hash||(e.cache.hash=t(e.serialize())),e.cache.hash):t(e.serialize())},r.validateHighS=c,r.getSenderPublicKey=function(e){if(e.cache.senderPubKey!==undefined)return e.cache.senderPubKey;const t=e.getMessageToVerifySignature(),{v:r,r:n,s:i}=e;c(e);try{const o=(e.common.customCrypto.ecrecover??s.ecrecover)(t,r,(0,s.bigIntToUnpaddedBytes)(n),(0,s.bigIntToUnpaddedBytes)(i),e.supports(a.Capability.EIP155ReplayProtection)?e.common.chainId():undefined);return Object.isFrozen(e)&&(e.cache.senderPubKey=o),o}catch(t){const r=o(e,"Invalid Signature");throw new Error(r)}},r.getEffectivePriorityFee=function(e,t){if(t!==undefined&&t>e)throw new Error("Tx cannot pay baseFee");return t===undefined?e:e-t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/capabilities/legacy.js"}],[2203,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BYTES_PER_FIELD_ELEMENT=r.FIELD_ELEMENTS_PER_BLOB=r.MAX_TX_WRAP_KZG_COMMITMENTS=r.LIMIT_BLOBS_PER_TX=r.MAX_VERSIONED_HASHES_LIST_SIZE=r.MAX_ACCESS_LIST_SIZE=r.MAX_CALLDATA_SIZE=void 0,r.MAX_CALLDATA_SIZE=16777216,r.MAX_ACCESS_LIST_SIZE=16777216,r.MAX_VERSIONED_HASHES_LIST_SIZE=16777216,r.LIMIT_BLOBS_PER_TX=6,r.MAX_TX_WRAP_KZG_COMMITMENTS=16777216,r.FIELD_ELEMENTS_PER_BLOB=4096,r.BYTES_PER_FIELD_ELEMENT=32}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/constants.js"}],[2204,{"./baseTransaction.js":2197,"./capabilities/eip1559.js":2198,"./capabilities/eip2718.js":2199,"./capabilities/eip2930.js":2200,"./capabilities/legacy.js":2202,"./types.js":2212,"./util.js":2213,"@ethereumjs/rlp":375,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FeeMarketEIP1559Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),u=e("./capabilities/legacy.js"),l=e("./types.js"),d=e("./util.js");class h extends i.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.FeeMarketEIP1559},t);const{chainId:r,accessList:s,maxFeePerGas:a,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const h=d.AccessLists.getAccessListData(s??[]);if(this.accessList=h.accessList,this.AccessListJSON=h.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(a)),this.maxPriorityFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),u.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,n.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(l.TransactionType.FeeMarketEIP1559)))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${l.TransactionType.FeeMarketEIP1559}, received: ${(0,n.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,s,i,a,o,c,u,l,d,f,m,p]=e;return this._validateNotArray({chainId:r,v:f}),(0,n.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:u,v:f,r:m,s:p}),new h({chainId:(0,n.bytesToBigInt)(r),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:u,data:l,accessList:d??[],v:f!==undefined?(0,n.bytesToBigInt)(f):undefined,r:m,s:p},t)}getDataFee(){return c.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=n.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,n.bigIntToUnpaddedBytes)(this.chainId),(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,n.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,n.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,9))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return u.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return u.getSenderPublicKey(this)}addSignature(e,t,r,s=!1){t=(0,n.toBytes)(t),r=(0,n.toBytes)(r);const i={...this.txOptions,common:this.common};return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-n.BIGINT_27:e,r:(0,n.bytesToBigInt)(t),s:(0,n.bytesToBigInt)(r)},i)}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,n.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,n.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(this.maxFeePerGas),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return u.errorMsg(this,e)}}r.FeeMarketEIP1559Transaction=h}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip1559Transaction.js"}],[2205,{"./baseTransaction.js":2197,"./capabilities/eip2718.js":2199,"./capabilities/eip2930.js":2200,"./capabilities/legacy.js":2202,"./types.js":2212,"./util.js":2213,"@ethereumjs/rlp":375,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessListEIP2930Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip2718.js"),o=e("./capabilities/eip2930.js"),c=e("./capabilities/legacy.js"),u=e("./types.js"),l=e("./util.js");class d extends i.BaseTransaction{constructor(e,t={}){super({...e,type:u.TransactionType.AccessListEIP2930},t);const{chainId:r,accessList:s,gasPrice:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const d=l.AccessLists.getAccessListData(s??[]);if(this.accessList=d.accessList,this.AccessListJSON=d.AccessListJSON,l.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,n.bytesToBigInt)((0,n.toBytes)(o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),i.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}a.validateYParity(this),c.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new d(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,n.equalsBytes)(e.subarray(0,1),(0,l.txTypeBytes)(u.TransactionType.AccessListEIP2930)))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ${u.TransactionType.AccessListEIP2930}, received: ${(0,n.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return d.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,s,i,a,o,c,u,l,h,f,m]=e;this._validateNotArray({chainId:r,v:h}),(0,n.validateNoLeadingZeroes)({nonce:s,gasPrice:i,gasLimit:a,value:c,v:h,r:f,s:m});return new d({chainId:(0,n.bytesToBigInt)(r),nonce:s,gasPrice:i,gasLimit:a,to:o,value:c,data:u,accessList:l??[],v:h!==undefined?(0,n.bytesToBigInt)(h):undefined,r:f,s:m},t)}getEffectivePriorityFee(e){return c.getEffectivePriorityFee(this.gasPrice,e)}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,n.bigIntToUnpaddedBytes)(this.chainId),(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.gasPrice),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,n.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,n.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return a.serialize(this)}getMessageToSign(){return a.serialize(this,this.raw().slice(0,8))}getHashedMessageToSign(){return a.getHashedMessageToSign(this)}hash(){return c.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return c.getSenderPublicKey(this)}addSignature(e,t,r,s=!1){t=(0,n.toBytes)(t),r=(0,n.toBytes)(r);const i={...this.txOptions,common:this.common};return d.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-n.BIGINT_27:e,r:(0,n.bytesToBigInt)(t),s:(0,n.bytesToBigInt)(r)},i)}toJSON(){const e=l.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,n.bigIntToHex)(this.chainId),gasPrice:(0,n.bigIntToHex)(this.gasPrice),accessList:e}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return c.errorMsg(this,e)}}r.AccessListEIP2930Transaction=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip2930Transaction.js"}],[2206,{"./baseTransaction.js":2197,"./capabilities/eip1559.js":2198,"./capabilities/eip2718.js":2199,"./capabilities/eip2930.js":2200,"./capabilities/legacy.js":2202,"./constants.js":2203,"./types.js":2212,"./util.js":2213,"@ethereumjs/rlp":375,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BlobEIP4844Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip2930.js"),u=e("./capabilities/legacy.js"),l=e("./constants.js"),d=e("./types.js"),h=e("./util.js");class f extends i.BaseTransaction{constructor(e,t={}){super({...e,type:d.TransactionType.BlobEIP4844},t);const{chainId:r,accessList:s,maxFeePerGas:a,maxPriorityFeePerGas:c,maxFeePerBlobGas:f}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");if(!this.common.isActivatedEIP(4844))throw new Error("EIP-4844 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const m=h.AccessLists.getAccessListData(s??[]);if(this.accessList=m.accessList,this.AccessListJSON=m.AccessListJSON,h.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(a)),this.maxPriorityFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this.maxFeePerBlobGas=(0,n.bytesToBigInt)((0,n.toBytes)(""===(f??"")?"0x":f)),this.blobVersionedHashes=(e.blobVersionedHashes??[]).map((e=>(0,n.toBytes)(e))),o.validateYParity(this),u.validateHighS(this);for(const e of this.blobVersionedHashes){if(32!==e.length){const e=this._errorMsg("versioned hash is invalid length");throw new Error(e)}if(BigInt(e[0])!==this.common.param("sharding","blobCommitmentVersionKzg")){const e=this._errorMsg("versioned hash does not start with KZG commitment version");throw new Error(e)}}if(this.blobVersionedHashes.length>l.LIMIT_BLOBS_PER_TX){const e=this._errorMsg(`tx can contain at most ${l.LIMIT_BLOBS_PER_TX} blobs`);throw new Error(e)}if(0===this.blobVersionedHashes.length){const e=this._errorMsg("tx should contain at least one blob");throw new Error(e)}if(this.to===undefined){const e=this._errorMsg('tx should have a "to" field and cannot be used to create contracts');throw new Error(e)}this.blobs=e.blobs?.map((e=>(0,n.toBytes)(e))),this.kzgCommitments=e.kzgCommitments?.map((e=>(0,n.toBytes)(e))),this.kzgProofs=e.kzgProofs?.map((e=>(0,n.toBytes)(e)));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");const r=t.common.customCrypto.kzg;if(e.blobsData!==undefined){if(e.blobs!==undefined)throw new Error("cannot have both raw blobs data and encoded blobs in constructor");if(e.kzgCommitments!==undefined)throw new Error("cannot have both raw blobs data and KZG commitments in constructor");if(e.blobVersionedHashes!==undefined)throw new Error("cannot have both raw blobs data and versioned hashes in constructor");if(e.kzgProofs!==undefined)throw new Error("cannot have both raw blobs data and KZG proofs in constructor");e.blobs=(0,n.getBlobs)(e.blobsData.reduce(((e,t)=>e+t))),e.kzgCommitments=(0,n.blobsToCommitments)(r,e.blobs),e.blobVersionedHashes=(0,n.commitmentsToVersionedHashes)(e.kzgCommitments),e.kzgProofs=(0,n.blobsToProofs)(r,e.blobs,e.kzgCommitments)}return new f(e,t)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}static minimalFromNetworkWrapper(e,t){if(t?.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");return f.fromTxData({...e,blobs:undefined,kzgCommitments:undefined,kzgProofs:undefined},t)}static fromSerializedTx(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,n.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(d.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${d.TransactionType.BlobEIP4844}, received: ${(0,n.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return f.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(11!==e.length&&14!==e.length)throw new Error("Invalid EIP-4844 transaction. Only expecting 11 values (for unsigned tx) or 14 values (for signed tx).");const[r,s,i,a,o,c,u,l,d,h,m,p,g,y]=e;return this._validateNotArray({chainId:r,v:p}),(0,n.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:u,maxFeePerBlobGas:h,v:p,r:g,s:y}),new f({chainId:(0,n.bytesToBigInt)(r),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:u,data:l,accessList:d??[],maxFeePerBlobGas:h,blobVersionedHashes:m,v:p!==undefined?(0,n.bytesToBigInt)(p):undefined,r:g,s:y},t)}static fromSerializedBlobTxNetworkWrapper(e,t){if(!t||!t.common)throw new Error("common instance required to validate versioned hashes");if(t.common?.customCrypto?.kzg===undefined)throw new Error("A common object with customCrypto.kzg initialized required to instantiate a 4844 blob tx");if(!1===(0,n.equalsBytes)(e.subarray(0,1),(0,h.txTypeBytes)(d.TransactionType.BlobEIP4844)))throw new Error(`Invalid serialized tx input: not an EIP-4844 transaction (wrong tx type, expected: ${d.TransactionType.BlobEIP4844}, received: ${(0,n.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(e.subarray(1));if(4!==r.length)throw Error("Expected 4 values in the deserialized network transaction");const[i,a,o,c]=r,u=f.fromValuesArray(i,{...t,freeze:!1});if(u.to===undefined)throw Error("BlobEIP4844Transaction can not be send without a valid `to`");const l=Number(t.common.param("sharding","blobCommitmentVersionKzg"));((e,t,r,s,i,a)=>{if(e.length!==t.length||t.length!==r.length)throw new Error("Number of blobVersionedHashes, blobs, and commitments not all equal");if(0===e.length)throw new Error("Invalid transaction with empty blobs");let o;try{o=a.verifyBlobKzgProofBatch(t,r,s)}catch(e){throw new Error(`KZG verification of blobs fail with error=${e}`)}if(!o)throw new Error("KZG proof cannot be verified from blobs/commitments");for(let t=0;t<e.length;t++){const s=(0,n.computeVersionedHash)(r[t],i);if(!(0,n.equalsBytes)(s,e[t]))throw new Error(`commitment for blob at index ${t} does not match versionedHash`)}})(u.blobVersionedHashes,a,o,c,l,t.common.customCrypto.kzg),u.blobs=a,u.kzgCommitments=o,u.kzgProofs=c;return(t?.freeze??!0)&&Object.freeze(u),u}getDataFee(){return c.getDataFee(this)}getUpfrontCost(e=n.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,n.bigIntToUnpaddedBytes)(this.chainId),(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,(0,n.bigIntToUnpaddedBytes)(this.maxFeePerBlobGas),this.blobVersionedHashes,this.v!==undefined?(0,n.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,n.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,n.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}serializeNetworkWrapper(){if(this.blobs===undefined||this.kzgCommitments===undefined||this.kzgProofs===undefined)throw new Error("cannot serialize network wrapper without blobs, KZG commitments and KZG proofs provided");return o.serialize(this,[this.raw(),this.blobs,this.kzgCommitments,this.kzgProofs])}getMessageToSign(){return o.serialize(this,this.raw().slice(0,11))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return u.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return u.getSenderPublicKey(this)}static networkWrapperToJson(e,t){const r=this.fromSerializedBlobTxNetworkWrapper(e,t),s=h.AccessLists.getAccessListJSON(r.accessList);return{...r.toJSON(),chainId:(0,n.bigIntToHex)(r.chainId),maxPriorityFeePerGas:(0,n.bigIntToHex)(r.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(r.maxFeePerGas),accessList:s,maxFeePerBlobGas:(0,n.bigIntToHex)(r.maxFeePerBlobGas),blobVersionedHashes:r.blobVersionedHashes.map((e=>(0,n.bytesToHex)(e))),blobs:r.blobs.map((e=>(0,n.bytesToHex)(e))),kzgCommitments:r.kzgCommitments.map((e=>(0,n.bytesToHex)(e))),kzgProofs:r.kzgProofs.map((e=>(0,n.bytesToHex)(e)))}}toJSON(){const e=h.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,n.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,n.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(this.maxFeePerGas),accessList:e,maxFeePerBlobGas:(0,n.bigIntToHex)(this.maxFeePerBlobGas),blobVersionedHashes:this.blobVersionedHashes.map((e=>(0,n.bytesToHex)(e)))}}addSignature(e,t,r,s=!1){t=(0,n.toBytes)(t),r=(0,n.toBytes)(r);const i={...this.txOptions,common:this.common};return f.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:s?e-n.BIGINT_27:e,r:(0,n.bytesToBigInt)(t),s:(0,n.bytesToBigInt)(r),maxFeePerBlobGas:this.maxFeePerBlobGas,blobVersionedHashes:this.blobVersionedHashes,blobs:this.blobs,kzgCommitments:this.kzgCommitments,kzgProofs:this.kzgProofs},i)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return u.errorMsg(this,e)}numBlobs(){return this.blobVersionedHashes.length}}r.BlobEIP4844Transaction=f}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip4844Transaction.js"}],[2207,{"./baseTransaction.js":2197,"./capabilities/eip1559.js":2198,"./capabilities/eip2718.js":2199,"./capabilities/eip7702.js":2201,"./capabilities/legacy.js":2202,"./types.js":2212,"./util.js":2213,"@ethereumjs/rlp":375,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EOACodeEIP7702Transaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("./baseTransaction.js"),a=e("./capabilities/eip1559.js"),o=e("./capabilities/eip2718.js"),c=e("./capabilities/eip7702.js"),u=e("./capabilities/legacy.js"),l=e("./types.js"),d=e("./util.js");class h extends i.BaseTransaction{constructor(e,t={}){super({...e,type:l.TransactionType.EOACodeEIP7702},t);const{chainId:r,accessList:s,authorizationList:a,maxFeePerGas:c,maxPriorityFeePerGas:h}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(7702))throw new Error("EIP-7702 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930,7702]);const f=d.AccessLists.getAccessListData(s??[]);this.accessList=f.accessList,this.AccessListJSON=f.AccessListJSON,d.AccessLists.verifyAccessList(this.accessList);const m=d.AuthorizationLists.getAuthorizationListData(a??[]);if(this.authorizationList=m.authorizationList,this.AuthorizationListJSON=m.AuthorizationListJSON,d.AuthorizationLists.verifyAuthorizationList(this.authorizationList),this.maxFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(c)),this.maxPriorityFeePerGas=(0,n.bytesToBigInt)((0,n.toBytes)(h)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}o.validateYParity(this),u.validateHighS(this);(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!1===(0,n.equalsBytes)(e.subarray(0,1),(0,d.txTypeBytes)(l.TransactionType.EOACodeEIP7702)))throw new Error(`Invalid serialized tx input: not an EIP-7702 transaction (wrong tx type, expected: ${l.TransactionType.EOACodeEIP7702}, received: ${(0,n.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(10!==e.length&&13!==e.length)throw new Error("Invalid EIP-7702 transaction. Only expecting 10 values (for unsigned tx) or 13 values (for signed tx).");const[r,s,i,a,o,c,u,l,d,f,m,p,g]=e;return this._validateNotArray({chainId:r,v:m}),(0,n.validateNoLeadingZeroes)({nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,value:u,v:m,r:p,s:g}),new h({chainId:(0,n.bytesToBigInt)(r),nonce:s,maxPriorityFeePerGas:i,maxFeePerGas:a,gasLimit:o,to:c,value:u,data:l,accessList:d??[],authorizationList:f??[],v:m!==undefined?(0,n.bytesToBigInt)(m):undefined,r:p,s:g},t)}getDataFee(){return c.getDataFee(this)}getEffectivePriorityFee(e){return a.getEffectivePriorityFee(this,e)}getUpfrontCost(e=n.BIGINT_0){return a.getUpfrontCost(this,e)}raw(){return[(0,n.bigIntToUnpaddedBytes)(this.chainId),(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.maxPriorityFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.maxFeePerGas),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data,this.accessList,this.authorizationList,this.v!==undefined?(0,n.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,n.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,n.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return o.serialize(this)}getMessageToSign(){return o.serialize(this,this.raw().slice(0,10))}getHashedMessageToSign(){return o.getHashedMessageToSign(this)}hash(){return u.hash(this)}getMessageToVerifySignature(){return this.getHashedMessageToSign()}getSenderPublicKey(){return u.getSenderPublicKey(this)}addSignature(e,t,r,s=!1){t=(0,n.toBytes)(t),r=(0,n.toBytes)(r);const i={...this.txOptions,common:this.common};return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,authorizationList:this.authorizationList,v:s?e-n.BIGINT_27:e,r:(0,n.bytesToBigInt)(t),s:(0,n.bytesToBigInt)(r)},i)}toJSON(){const e=d.AccessLists.getAccessListJSON(this.accessList);return{...super.toJSON(),chainId:(0,n.bigIntToHex)(this.chainId),maxPriorityFeePerGas:(0,n.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(this.maxFeePerGas),accessList:e,authorizationList:this.AuthorizationListJSON}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return u.errorMsg(this,e)}}r.EOACodeEIP7702Transaction=h}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/eip7702Transaction.js"}],[2208,{"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeTxParams=void 0;const s=e("@ethereumjs/util");r.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,s.toType)(t.gasLimit??t.gas,s.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,s.setLengthLeft)((0,s.toBytes)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"===t.v&&"0x"===t.r&&"0x"===t.s||(t.v=(0,s.toType)(t.v,s.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/fromRpc.js"}],[2209,{"./eip1559Transaction.js":2204,"./eip2930Transaction.js":2205,"./eip4844Transaction.js":2206,"./eip7702Transaction.js":2207,"./legacyTransaction.js":2210,"./transactionFactory.js":2211,"./types.js":2212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=r.LegacyTransaction=r.EOACodeEIP7702Transaction=r.BlobEIP4844Transaction=r.AccessListEIP2930Transaction=r.FeeMarketEIP1559Transaction=void 0;var i=e("./eip1559Transaction.js");Object.defineProperty(r,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return i.FeeMarketEIP1559Transaction}});var a=e("./eip2930Transaction.js");Object.defineProperty(r,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return a.AccessListEIP2930Transaction}});var o=e("./eip4844Transaction.js");Object.defineProperty(r,"BlobEIP4844Transaction",{enumerable:!0,get:function(){return o.BlobEIP4844Transaction}});var c=e("./eip7702Transaction.js");Object.defineProperty(r,"EOACodeEIP7702Transaction",{enumerable:!0,get:function(){return c.EOACodeEIP7702Transaction}});var u=e("./legacyTransaction.js");Object.defineProperty(r,"LegacyTransaction",{enumerable:!0,get:function(){return u.LegacyTransaction}});var l=e("./transactionFactory.js");Object.defineProperty(r,"TransactionFactory",{enumerable:!0,get:function(){return l.TransactionFactory}}),n(e("./types.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/index.js"}],[221,{"@metamask/utils":2620,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:s}=e;if(!(0,n.isObject)(s.networkConfigurations)){var i,a;return null===(i=global.sentry)||void 0===i||null===(a=i.captureException)||void 0===a||a.call(i,new Error("typeof NetworkController.networkConfigurations is "+typeof s.networkConfigurations)),e}const{networkConfigurations:o}=s,c={};for(const t of Object.keys(o)){const r=o[t];if(!(0,n.isObject)(r))return e;c[t]={...r,id:t}}return{...e,NetworkController:{...s,networkConfigurations:c}}}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[2210,{"./baseTransaction.js":2197,"./capabilities/legacy.js":2202,"./types.js":2212,"@ethereumjs/rlp":375,"@ethereumjs/util":2223,"ethereum-cryptography/keccak.js":3589},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LegacyTransaction=void 0;const s=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),i=e("ethereum-cryptography/keccak.js"),a=e("./baseTransaction.js"),o=e("./capabilities/legacy.js"),c=e("./types.js");function u(e,t){const r=Number(e),s=2*Number(t);return r===s+35||r===s+36}class l extends a.BaseTransaction{constructor(e,t={}){if(super({...e,type:c.TransactionType.Legacy},t),this.common=this._validateTxV(this.v,t.common),this.keccakFunction=this.common.customCrypto.keccak256??i.keccak256,this.gasPrice=(0,n.bytesToBigInt)((0,n.toBytes)(e.gasPrice)),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),a.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?u(this.v,this.common.chainId())&&this.activeCapabilities.push(c.Capability.EIP155ReplayProtection):this.activeCapabilities.push(c.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){const r=s.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,s,i,a,o,c,u,d,h]=e;return(0,n.validateNoLeadingZeroes)({nonce:r,gasPrice:s,gasLimit:i,value:o,v:u,r:d,s:h}),new l({nonce:r,gasPrice:s,gasLimit:i,to:a,value:o,data:c,v:u,r:d,s:h},t)}getEffectivePriorityFee(e){return o.getEffectivePriorityFee(this.gasPrice,e)}raw(){return[(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.gasPrice),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data,this.v!==undefined?(0,n.bigIntToUnpaddedBytes)(this.v):new Uint8Array(0),this.r!==undefined?(0,n.bigIntToUnpaddedBytes)(this.r):new Uint8Array(0),this.s!==undefined?(0,n.bigIntToUnpaddedBytes)(this.s):new Uint8Array(0)]}serialize(){return s.RLP.encode(this.raw())}getMessageToSign(){const e=[(0,n.bigIntToUnpaddedBytes)(this.nonce),(0,n.bigIntToUnpaddedBytes)(this.gasPrice),(0,n.bigIntToUnpaddedBytes)(this.gasLimit),this.to!==undefined?this.to.bytes:new Uint8Array(0),(0,n.bigIntToUnpaddedBytes)(this.value),this.data];return this.supports(c.Capability.EIP155ReplayProtection)&&(e.push((0,n.bigIntToUnpaddedBytes)(this.common.chainId())),e.push((0,n.unpadBytes)((0,n.toBytes)(0))),e.push((0,n.unpadBytes)((0,n.toBytes)(0)))),e}getHashedMessageToSign(){const e=this.getMessageToSign();return this.keccakFunction(s.RLP.encode(e))}getDataFee(){return o.getDataFee(this)}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){return o.hash(this)}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}return this.getHashedMessageToSign()}getSenderPublicKey(){return o.getSenderPublicKey(this)}addSignature(e,t,r,s=!1){t=(0,n.toBytes)(t),r=(0,n.toBytes)(r),s&&this.supports(c.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*n.BIGINT_2+n.BIGINT_8);const i={...this.txOptions,common:this.common};return l.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,n.bytesToBigInt)(t),s:(0,n.bytesToBigInt)(r)},i)}toJSON(){return{...super.toJSON(),gasPrice:(0,n.bigIntToHex)(this.gasPrice)}}_validateTxV(e,t){let r;const s=e!==undefined?Number(e):undefined;if(s!==undefined&&s<37&&27!==s&&28!==s)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${s}`);if(s!==undefined&&0!==s&&(!t||t.gteHardfork("spuriousDragon"))&&27!==s&&28!==s)if(t){if(!u(BigInt(s),t.chainId()))throw new Error(`Incompatible EIP155-based V ${s} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(s-35)%2==0?35:36,r=BigInt(s-e)/n.BIGINT_2}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return o.errorMsg(this,e)}}r.LegacyTransaction=l}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/legacyTransaction.js"}],[2211,{"./eip1559Transaction.js":2204,"./eip2930Transaction.js":2205,"./eip4844Transaction.js":2206,"./eip7702Transaction.js":2207,"./fromRpc.js":2208,"./legacyTransaction.js":2210,"./types.js":2212,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionFactory=void 0;const s=e("@ethereumjs/util"),n=e("./eip1559Transaction.js"),i=e("./eip2930Transaction.js"),a=e("./eip4844Transaction.js"),o=e("./eip7702Transaction.js"),c=e("./fromRpc.js"),u=e("./legacyTransaction.js"),l=e("./types.js");class d{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){if((0,l.isLegacyTxData)(e))return u.LegacyTransaction.fromTxData(e,t);if((0,l.isAccessListEIP2930TxData)(e))return i.AccessListEIP2930Transaction.fromTxData(e,t);if((0,l.isFeeMarketEIP1559TxData)(e))return n.FeeMarketEIP1559Transaction.fromTxData(e,t);if((0,l.isBlobEIP4844TxData)(e))return a.BlobEIP4844Transaction.fromTxData(e,t);if((0,l.isEOACodeEIP7702TxData)(e))return o.EOACodeEIP7702Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${e?.type} not supported`)}return u.LegacyTransaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return u.LegacyTransaction.fromSerializedTx(e,t);switch(e[0]){case l.TransactionType.AccessListEIP2930:return i.AccessListEIP2930Transaction.fromSerializedTx(e,t);case l.TransactionType.FeeMarketEIP1559:return n.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);case l.TransactionType.BlobEIP4844:return a.BlobEIP4844Transaction.fromSerializedTx(e,t);case l.TransactionType.EOACodeEIP7702:return o.EOACodeEIP7702Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return u.LegacyTransaction.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}static async fromJsonRpcProvider(e,t,r){const n=(0,s.getProvider)(e),i=await(0,s.fetchFromProvider)(n,{method:"eth_getTransactionByHash",params:[t]});if(null===i)throw new Error("No data returned from provider");return d.fromRPC(i,r)}static async fromRPC(e,t={}){return d.fromTxData((0,c.normalizeTxParams)(e),t)}}r.TransactionFactory=d}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/transactionFactory.js"}],[2212,{"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isEOACodeEIP7702TxData=r.isBlobEIP4844TxData=r.isFeeMarketEIP1559TxData=r.isAccessListEIP2930TxData=r.isLegacyTxData=r.isEOACodeEIP7702Tx=r.isBlobEIP4844Tx=r.isFeeMarketEIP1559Tx=r.isAccessListEIP2930Tx=r.isLegacyTx=r.TransactionType=r.isAuthorizationList=r.isAuthorizationListBytes=r.isAccessList=r.isAccessListBytes=r.Capability=void 0;const s=e("@ethereumjs/util");var n;function i(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}function a(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists",e[e.EIP7702EOACode=7702]="EIP7702EOACode"}(r.Capability||(r.Capability={})),r.isAccessListBytes=i,r.isAccessList=function(e){return!i(e)},r.isAuthorizationListBytes=a,r.isAuthorizationList=function(e){return!a(e)},function(e){e[e.Legacy=0]="Legacy",e[e.AccessListEIP2930=1]="AccessListEIP2930",e[e.FeeMarketEIP1559=2]="FeeMarketEIP1559",e[e.BlobEIP4844=3]="BlobEIP4844",e[e.EOACodeEIP7702=4]="EOACodeEIP7702"}(n=r.TransactionType||(r.TransactionType={})),r.isLegacyTx=function(e){return e.type===n.Legacy},r.isAccessListEIP2930Tx=function(e){return e.type===n.AccessListEIP2930},r.isFeeMarketEIP1559Tx=function(e){return e.type===n.FeeMarketEIP1559},r.isBlobEIP4844Tx=function(e){return e.type===n.BlobEIP4844},r.isEOACodeEIP7702Tx=function(e){return e.type===n.EOACodeEIP7702},r.isLegacyTxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===n.Legacy},r.isAccessListEIP2930TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===n.AccessListEIP2930},r.isFeeMarketEIP1559TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===n.FeeMarketEIP1559},r.isBlobEIP4844TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===n.BlobEIP4844},r.isEOACodeEIP7702TxData=function(e){return Number((0,s.bytesToBigInt)((0,s.toBytes)(e.type)))===n.EOACodeEIP7702}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/types.js"}],[2213,{"./types.js":2212,"@ethereumjs/util":2223},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.txTypeBytes=r.AuthorizationLists=r.AccessLists=r.checkMaxInitCodeSize=void 0;const s=e("@ethereumjs/util"),n=e("./types.js");r.checkMaxInitCodeSize=function(e,t){const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};r.AccessLists=class{static getAccessListData(e){let t,r;if((0,n.isAccessList)(e)){t=e;const n=[];for(let t=0;t<e.length;t++){const r=e[t],i=(0,s.hexToBytes)(r.address),a=[];for(let e=0;e<r.storageKeys.length;e++)a.push((0,s.hexToBytes)(r.storageKeys[e]));n.push([i,a])}r=n}else{r=e??[];const n=[];for(let e=0;e<r.length;e++){const t=r[e],i=(0,s.bytesToHex)(t[0]),a=[];for(let e=0;e<t[1].length;e++)a.push((0,s.bytesToHex)(t[1][e]));const o={address:i,storageKeys:a};n.push(o)}t=n}return{AccessListJSON:t,accessList:r}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const r=e[t],s=r[0],n=r[1];if(r[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==s.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<n.length;e++)if(32!==n[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],i={address:(0,s.bytesToHex)((0,s.setLengthLeft)(n[0],20)),storageKeys:[]},a=n[1];for(let e=0;e<a.length;e++){const t=a[e];i.storageKeys.push((0,s.bytesToHex)((0,s.setLengthLeft)(t,32)))}t.push(i)}return t}static getDataFeeEIP2930(e,t){const r=t.param("gasPrices","accessListStorageKeyCost"),s=t.param("gasPrices","accessListAddressCost");let n=0;for(let t=0;t<e.length;t++){n+=e[t][1].length}return e.length*Number(s)+n*Number(r)}};r.AuthorizationLists=class{static getAuthorizationListData(e){let t,r;if((0,n.isAuthorizationList)(e)){t=e;const n=[],i=["chainId","address","nonce","yParity","r","s"];for(let t=0;t<e.length;t++){const r=e[t];for(const e of i)if(r[e]===undefined)throw new Error(`EIP-7702 authorization list invalid: ${e} is not defined`);const a=(0,s.hexToBytes)(r.chainId),o=(0,s.hexToBytes)(r.address),c=[];for(let e=0;e<r.nonce.length;e++)c.push((0,s.hexToBytes)(r.nonce[e]));const u=(0,s.hexToBytes)(r.yParity),l=(0,s.hexToBytes)(r.r),d=(0,s.hexToBytes)(r.s);n.push([a,o,c,u,l,d])}r=n}else{r=e??[];const n=[];for(let e=0;e<r.length;e++){const t=r[e],i=(0,s.bytesToHex)(t[0]),a=(0,s.bytesToHex)(t[1]),o=t[2],c=[];for(let e=0;e<o.length;e++)c.push((0,s.bytesToHex)(o[e]));const u={chainId:i,address:a,nonce:c,yParity:(0,s.bytesToHex)(t[3]),r:(0,s.bytesToHex)(t[4]),s:(0,s.bytesToHex)(t[5])};n.push(u)}t=n}return{AuthorizationListJSON:t,authorizationList:r}}static verifyAuthorizationList(e){for(let t=0;t<e.length;t++){const r=e[t],n=r[1],i=r[2],a=r[3],o=r[4],c=r[5];if((0,s.validateNoLeadingZeroes)({yParity:a,r:o,s:c}),20!==n.length)throw new Error("Invalid EIP-7702 transaction: address length should be 20 bytes");if(i.length>1)throw new Error("Invalid EIP-7702 transaction: nonce list should consist of at most 1 item");1===i.length&&(0,s.validateNoLeadingZeroes)({nonce:i[0]})}}static getDataFeeEIP7702(e,t){const r=t.param("gasPrices","perAuthBaseCost");return e.length*Number(r)}},r.txTypeBytes=function(e){return(0,s.hexToBytes)(`0x${e.toString(16).padStart(2,"0")}`)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/tx/dist/cjs/util.js"}],[2214,{"./bytes.js":2218,"./constants.js":2219,"./helpers.js":2222,"./internal.js":2224,"@ethereumjs/rlp":375,"ethereum-cryptography/keccak.js":3589,"ethereum-cryptography/secp256k1.js":3598},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const s=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/keccak.js"),i=e("ethereum-cryptography/secp256k1.js"),a=e("./bytes.js"),o=e("./constants.js"),c=e("./helpers.js"),u=e("./internal.js");class l{constructor(e=o.BIGINT_0,t=o.BIGINT_0,r=o.KECCAK256_RLP,s=o.KECCAK256_NULL,n=null,i=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=e,this._balance=t,this._storageRoot=r,this._codeHash=s,null!==n||null===s||this.isContract()||(n=0),this._codeSize=n,this._version=i,this._validate()}get version(){if(null!==this._version)return this._version;throw Error(`version=${this._version} not loaded`)}set version(e){this._version=e}get nonce(){if(null!==this._nonce)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(e){this._nonce=e}get balance(){if(null!==this._balance)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(e){this._balance=e}get storageRoot(){if(null!==this._storageRoot)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(e){this._storageRoot=e}get codeHash(){if(null!==this._codeHash)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(e){this._codeHash=e}get codeSize(){if(null!==this._codeSize)return this._codeSize;throw Error(`codeHash=${this._codeSize} not loaded`)}set codeSize(e){this._codeSize=e}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:s,codeHash:n}=e;if(null===t||null===r||null===s||null===n)throw Error("Partial fields not supported in fromAccountData");return new l(t!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(t)):undefined,r!==undefined?(0,a.bytesToBigInt)((0,a.toBytes)(r)):undefined,s!==undefined?(0,a.toBytes)(s):undefined,n!==undefined?(0,a.toBytes)(n):undefined)}static fromPartialAccountData(e){const{nonce:t,balance:r,storageRoot:s,codeHash:n,codeSize:i,version:o}=e;if(null===t&&null===r&&null===s&&null===n&&null===i&&null===o)throw Error("All partial fields null");return new l(t!==undefined&&null!==t?(0,a.bytesToBigInt)((0,a.toBytes)(t)):t,r!==undefined&&null!==r?(0,a.bytesToBigInt)((0,a.toBytes)(r)):r,s!==undefined&&null!==s?(0,a.toBytes)(s):s,n!==undefined&&null!==n?(0,a.toBytes)(n):n,i!==undefined&&null!==i?(0,a.bytesToInt)((0,a.toBytes)(i)):i,o!==undefined&&null!==o?(0,a.bytesToInt)((0,a.toBytes)(o)):o)}static fromRlpSerializedAccount(e){const t=s.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromRlpSerializedPartialAccount(e){const t=s.RLP.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");let r=null;if(!Array.isArray(t[0]))throw new Error("Invalid partial nonce encoding. Must be array");{const e=(0,a.bytesToInt)(t[0][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for nonce`);1===e&&(r=(0,a.bytesToBigInt)(t[0][1]))}let n=null;if(!Array.isArray(t[1]))throw new Error("Invalid partial balance encoding. Must be array");{const e=(0,a.bytesToInt)(t[1][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for balance`);1===e&&(n=(0,a.bytesToBigInt)(t[1][1]))}let i=null;if(!Array.isArray(t[2]))throw new Error("Invalid partial storageRoot encoding. Must be array");{const e=(0,a.bytesToInt)(t[2][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for storageRoot`);1===e&&(i=t[2][1])}let o=null;if(!Array.isArray(t[3]))throw new Error("Invalid partial codeHash encoding. Must be array");{const e=(0,a.bytesToInt)(t[3][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for codeHash`);1===e&&(o=t[3][1])}let c=null;if(!Array.isArray(t[4]))throw new Error("Invalid partial codeSize encoding. Must be array");{const e=(0,a.bytesToInt)(t[4][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for codeSize`);1===e&&(c=(0,a.bytesToInt)(t[4][1]))}let u=null;if(!Array.isArray(t[5]))throw new Error("Invalid partial version encoding. Must be array");{const e=(0,a.bytesToInt)(t[5][0]);if(0!==e&&1!==e)throw new Error(`Invalid isNullIndicator=${e} for version`);1===e&&(u=(0,a.bytesToInt)(t[5][1]))}return this.fromPartialAccountData({balance:n,nonce:r,storageRoot:i,codeHash:o,codeSize:c,version:u})}static fromValuesArray(e){const[t,r,s,n]=e;return new l((0,a.bytesToBigInt)(t),(0,a.bytesToBigInt)(r),s,n)}_validate(){if(null!==this._nonce&&this._nonce<o.BIGINT_0)throw new Error("nonce must be greater than zero");if(null!==this._balance&&this._balance<o.BIGINT_0)throw new Error("balance must be greater than zero");if(null!==this._storageRoot&&32!==this._storageRoot.length)throw new Error("storageRoot must have a length of 32");if(null!==this._codeHash&&32!==this._codeHash.length)throw new Error("codeHash must have a length of 32");if(null!==this._codeSize&&this._codeSize<o.BIGINT_0)throw new Error("codeSize must be greater than zero")}raw(){return[(0,a.bigIntToUnpaddedBytes)(this.nonce),(0,a.bigIntToUnpaddedBytes)(this.balance),this.storageRoot,this.codeHash]}serialize(){return s.RLP.encode(this.raw())}serializeWithPartialInfo(){const e=[],t=(0,a.intToUnpaddedBytes)(0),r=(0,a.intToUnpaddedBytes)(1);return null!==this._nonce?e.push([r,(0,a.bigIntToUnpaddedBytes)(this._nonce)]):e.push([t]),null!==this._balance?e.push([r,(0,a.bigIntToUnpaddedBytes)(this._balance)]):e.push([t]),null!==this._storageRoot?e.push([r,this._storageRoot]):e.push([t]),null!==this._codeHash?e.push([r,this._codeHash]):e.push([t]),null!==this._codeSize?e.push([r,(0,a.intToUnpaddedBytes)(this._codeSize)]):e.push([t]),null!==this._version?e.push([r,(0,a.intToUnpaddedBytes)(this._version)]):e.push([t]),s.RLP.encode(e)}isContract(){if(null===this._codeHash&&null===this._codeSize)throw Error("Insufficient data as codeHash=null and codeSize=null");return null!==this._codeHash&&!(0,a.equalsBytes)(this._codeHash,o.KECCAK256_NULL)||null!==this._codeSize&&0!==this._codeSize}isEmpty(){return!(null!==this._balance&&this.balance!==o.BIGINT_0||null===this._nonce&&this.nonce!==o.BIGINT_0||null!==this._codeHash&&!(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL))&&(this.balance===o.BIGINT_0&&this.nonce===o.BIGINT_0&&(0,a.equalsBytes)(this.codeHash,o.KECCAK256_NULL))}}r.Account=l;r.isValidAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,t){(0,c.assertIsHexString)(e);const r=(0,u.stripHexPrefix)(e).toLowerCase();let s="";if(t!==undefined){s=(0,a.bytesToBigInt)((0,a.toBytes)(t)).toString()+"0x"}const i=(0,a.utf8ToBytes)(s+r),o=(0,a.bytesToHex)((0,n.keccak256)(i)).slice(2);let l="";for(let e=0;e<r.length;e++)parseInt(o[e],16)>=8?l+=r[e].toUpperCase():l+=r[e];return`0x${l}`};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,t){return(0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,a.bytesToBigInt)(t)===o.BIGINT_0?(0,n.keccak256)(s.RLP.encode([e,Uint8Array.from([])])).subarray(-20):(0,n.keccak256)(s.RLP.encode([e,t])).subarray(-20)};r.generateAddress2=function(e,t,r){if((0,c.assertIsBytes)(e),(0,c.assertIsBytes)(t),(0,c.assertIsBytes)(r),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");return(0,n.keccak256)((0,a.concatBytes)((0,a.hexToBytes)("0xff"),e,t,(0,n.keccak256)(r))).subarray(-20)};r.isValidPrivate=function(e){return i.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,t=!1){if((0,c.assertIsBytes)(e),64===e.length)try{return i.secp256k1.ProjectivePoint.fromHex((0,a.concatBytes)(Uint8Array.from([4]),e)),!0}catch(e){return!1}if(!t)return!1;try{return i.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,t=!1){if((0,c.assertIsBytes)(e),t&&64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),64!==e.length)throw new Error("Expected pubKey to be of length 64");return(0,n.keccak256)(e).subarray(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,c.assertIsBytes)(e),i.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1)};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,c.assertIsBytes)(e),64!==e.length&&(e=i.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),e};r.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bytesToHex)(e)};function d(e){const[t,r,s,n]=e;return[t,r,0===s.length?o.KECCAK256_RLP:s,0===n.length?o.KECCAK256_NULL:n]}r.isZeroAddress=function(e){try{(0,c.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=d;const h=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,s,n]=e;return[t,r,(0,a.equalsBytes)(s,o.KECCAK256_RLP)?h:s,(0,a.equalsBytes)(n,o.KECCAK256_NULL)?h:n]},r.accountBodyToRLP=function(e,t=!0){const r=t?d(e):e;return s.RLP.encode(r)}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/account.js"}],[2215,{"./account.js":2214,"./bytes.js":2218,"./constants.js":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const s=e("./account.js"),n=e("./bytes.js"),i=e("./constants.js");class a{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.bytes=e}static zero(){return new a((0,n.zeros)(20))}static fromString(e){if(!(0,s.isValidAddress)(e))throw new Error(`Invalid address input=${e}`);return new a((0,n.hexToBytes)(e))}static fromPublicKey(e){if(!(e instanceof Uint8Array))throw new Error("Public key should be Uint8Array");const t=(0,s.pubToAddress)(e);return new a(t)}static fromPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error("Private key should be Uint8Array");const t=(0,s.privateToAddress)(e);return new a(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new a((0,s.generateAddress)(e.bytes,(0,n.bigIntToBytes)(t)))}static generate2(e,t,r){if(!(t instanceof Uint8Array))throw new Error("Expected salt to be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("Expected initCode to be a Uint8Array");return new a((0,s.generateAddress2)(e.bytes,t,r))}equals(e){return(0,n.equalsBytes)(this.bytes,e.bytes)}isZero(){return this.equals(a.zero())}isPrecompileOrSystemAddress(){const e=(0,n.bytesToBigInt)(this.bytes),t=i.BIGINT_0,r=BigInt("0xffff");return e>=t&&e<=r}toString(){return(0,n.bytesToHex)(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}r.Address=a}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/address.js"}],[2216,{events:3678},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const s=e("events");class n extends s.EventEmitter{emit(e,...t){let[r,s]=t;const n=this;let i=n._events[e]??[];return s===undefined&&"function"==typeof r&&(s=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:s},s=undefined),i=Array.isArray(i)?i:[i],async function(e,t,r){let s;for await(const n of t)try{n.length<2?n.call(e,r):await new Promise(((t,s)=>{n.call(e,r,(e=>{e?s(e):t()}))}))}catch(e){s=e}if(s)throw s}(n,i.slice(),r).then(s).catch(s),n.listenerCount(e)>0}once(e,t){const r=this;let s;if("function"!=typeof t)throw new TypeError("listener must be a function");return s=t.length>=2?function(n,i){r.removeListener(e,s),t(n,i)}:function(n){r.removeListener(e,s),t(n,s)},r.on(e,s),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,s){let n,i,a=this._events[e]??[];const o="after"===s?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),i=a.length,n=a.length;n--;)if(a[n]===t){i=n+o;break}return a.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=n}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/asyncEventEmitter.js"}],[2217,{"./bytes.js":2218,"ethereum-cryptography/sha256.js":3599},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.commitmentsToVersionedHashes=r.computeVersionedHash=r.blobsToProofs=r.blobsToCommitments=r.getBlobs=void 0;const s=e("ethereum-cryptography/sha256.js"),n=e("./bytes.js"),i=4096,a=131072;function o(e){const t=new Uint8Array(131072);for(let r=0;r<i;r++){const s=new Uint8Array(32);s.set(e.subarray(31*r,31*(r+1)),0),t.set(s,32*r)}return t}r.getBlobs=e=>{const t=(0,n.utf8ToBytes)(e),r=t.byteLength;if(0===r)throw Error("invalid blob data");if(r>262143)throw Error("blob data is too large");const s=Math.ceil(r/a),i=function(e,t){const r=new Uint8Array(t*a).fill(0);return r.set(e),r[e.byteLength]=128,r}(t,s),c=[];for(let e=0;e<s;e++){const t=o(i.subarray(e*a,(e+1)*a));c.push(t)}return c};r.blobsToCommitments=(e,t)=>{const r=[];for(const s of t)r.push(e.blobToKzgCommitment(s));return r};r.blobsToProofs=(e,t,r)=>t.map(((t,s)=>e.computeBlobKzgProof(t,r[s])));r.computeVersionedHash=(e,t)=>{const r=new Uint8Array(32);return r.set([t],0),r.set((0,s.sha256)(e).subarray(1),1),r};r.commitmentsToVersionedHashes=e=>{const t=[];for(const s of e)t.push((0,r.computeVersionedHash)(s,1));return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/blobs.js"}],[2218,{"./helpers.js":2222,"./internal.js":2224,"ethereum-cryptography/random.js":3597,"ethereum-cryptography/utils.js":3600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.utf8ToBytes=r.equalsBytes=r.bytesToUtf8=r.bigInt64ToBytes=r.int32ToBytes=r.bytesToBigInt64=r.bytesToInt32=r.concatBytes=r.randomBytes=r.compareBytes=r.intToUnpaddedBytes=r.bigIntToAddressBytes=r.bigIntToUnpaddedBytes=r.bigIntMin=r.bigIntMax=r.bigIntToHex=r.validateNoLeadingZeroes=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.toBytes=r.unpadHex=r.unpadArray=r.unpadBytes=r.setLengthRight=r.setLengthLeft=r.zeros=r.bigIntToBytes=r.intToBytes=r.intToHex=r.hexToBytes=r.bytesToInt=r.bytesToBigInt=r.bytesToHex=r.unprefixedHexToBytes=r.bytesToUnprefixedHex=void 0;const s=e("ethereum-cryptography/random.js"),n=e("ethereum-cryptography/utils.js"),i=e("./helpers.js"),a=e("./internal.js"),o=BigInt(0);r.bytesToUnprefixedHex=n.bytesToHex;const c={},u={};for(let e=0;e<16;e++){const t=e,r=16*e,s=e.toString(16).toLowerCase();u[s]=t,u[s.toUpperCase()]=t,c[s]=r,c[s.toUpperCase()]=r}function l(e){const t=e.length,r=new Uint8Array(t/2);for(let s=0;s<t;s+=2)r[s/2]=c[e[s]]+u[e[s+1]];return r}r.unprefixedHexToBytes=e=>{if("0x"===e.slice(0,2))throw new Error("hex string is prefixed with 0x, should be unprefixed");return l((0,a.padToEven)(e))};const d=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=e=>{let t="0x";if(e===undefined||0===e.length)return t;for(const r of e)t=`${t}${d[r]}`;return t};const h=[];for(let e=0;e<=65535;e++)h[e]=BigInt(e);r.bytesToBigInt=(e,t=!1)=>{t&&e.reverse();const s=(0,r.bytesToHex)(e);return"0x"===s?o:4===s.length?h[e[0]]:6===s.length?h[256*e[0]+e[1]]:BigInt(s)};r.bytesToInt=e=>{const t=Number((0,r.bytesToBigInt)(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.hexToBytes=e=>{if("string"!=typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return l(t.length%2==0?t:(0,a.padToEven)(t))};r.intToHex=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBytes=e=>{const t=(0,r.intToHex)(e);return(0,r.hexToBytes)(t)};r.bigIntToBytes=(e,t=!1)=>{const s=(0,r.toBytes)(`0x${(0,a.padToEven)(e.toString(16))}`);return t?s.reverse():s};r.zeros=e=>new Uint8Array(e);const f=(e,t,s)=>s?e.length<t?new Uint8Array([...e,...(0,r.zeros)(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...(0,r.zeros)(t-e.length),...e]):e.subarray(-t);r.setLengthLeft=(e,t)=>((0,i.assertIsBytes)(e),f(e,t,!1));r.setLengthRight=(e,t)=>((0,i.assertIsBytes)(e),f(e,t,!0));const m=e=>{let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBytes=e=>((0,i.assertIsBytes)(e),m(e));r.unpadArray=e=>((0,i.assertIsArray)(e),m(e));r.unpadHex=e=>((0,i.assertIsHexString)(e),`0x${m((0,a.stripHexPrefix)(e))}`);r.toBytes=e=>{if(null===e||e===undefined)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if("string"==typeof e){if(!(0,a.isHexString)(e))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return(0,r.hexToBytes)(e)}if("number"==typeof e)return(0,r.intToBytes)(e);if("bigint"==typeof e){if(e<o)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),(0,r.unprefixedHexToBytes)(t)}if(e.toBytes!==undefined)return e.toBytes();throw new Error("invalid type")};r.fromSigned=e=>BigInt.asIntN(256,(0,r.bytesToBigInt)(e));r.toUnsigned=e=>(0,r.bigIntToBytes)(BigInt.asUintN(256,e));r.addHexPrefix=e=>"string"!=typeof e||(0,a.isHexString)(e)?e:`0x${e}`;r.short=(e,t=50)=>{const s=e instanceof Uint8Array?(0,r.bytesToHex)(e):e,n="0x"===s.slice(0,2)?t+2:t;return s.length<=n?s:s.slice(0,n)+"…"};r.validateNoLeadingZeroes=e=>{for(const[t,s]of Object.entries(e))if(s!==undefined&&s.length>0&&0===s[0])throw new Error(`${t} cannot have leading zeroes, received: ${(0,r.bytesToHex)(s)}`)};r.bigIntToHex=e=>`0x${e.toString(16)}`;r.bigIntMax=(...e)=>e.reduce(((e,t)=>t>e?t:e));r.bigIntMin=(...e)=>e.reduce(((e,t)=>t<e?t:e));r.bigIntToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.bigIntToBytes)(e));r.bigIntToAddressBytes=(e,t=!0)=>{const s=(0,r.bigIntToBytes)(e);if(t&&s.length>20)throw Error(`Invalid address bytes length=${s.length} strict=${t}`);return(0,r.setLengthLeft)(s,20)};r.intToUnpaddedBytes=e=>(0,r.unpadBytes)((0,r.intToBytes)(e));r.compareBytes=(e,t)=>{const s=(0,r.bytesToBigInt)(e),n=(0,r.bytesToBigInt)(t);return s>n?1:s<n?-1:0};r.randomBytes=e=>(0,s.getRandomBytesSync)(e);r.concatBytes=(...e)=>{if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,s=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return r},r.bytesToInt32=function(e,t=!1){return e.length<4&&(e=f(e,4,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,t)},r.bytesToBigInt64=function(e,t=!1){return e.length<8&&(e=f(e,8,t)),new DataView(e.buffer,e.byteOffset,e.byteLength).getBigUint64(0,t)},r.int32ToBytes=function(e,t=!1){const r=new ArrayBuffer(4);return new DataView(r).setUint32(0,e,t),new Uint8Array(r)},r.bigInt64ToBytes=function(e,t=!1){const r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,e,t),new Uint8Array(r)};var p=e("ethereum-cryptography/utils.js");Object.defineProperty(r,"bytesToUtf8",{enumerable:!0,get:function(){return p.bytesToUtf8}}),Object.defineProperty(r,"equalsBytes",{enumerable:!0,get:function(){return p.equalsBytes}}),Object.defineProperty(r,"utf8ToBytes",{enumerable:!0,get:function(){return p.utf8ToBytes}}),r.hexToBigInt=function(e){return(0,r.bytesToBigInt)((0,r.hexToBytes)((0,a.isHexString)(e)?e:`0x${e}`))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/bytes.js"}],[2219,{"./bytes.js":2218,"ethereum-cryptography/secp256k1.js":3598},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BIGINT_2EXP256=r.BIGINT_2EXP224=r.BIGINT_2EXP160=r.BIGINT_2EXP96=r.BIGINT_224=r.BIGINT_160=r.BIGINT_100=r.BIGINT_96=r.BIGINT_256=r.BIGINT_255=r.BIGINT_128=r.BIGINT_64=r.BIGINT_32=r.BIGINT_31=r.BIGINT_28=r.BIGINT_27=r.BIGINT_8=r.BIGINT_7=r.BIGINT_3=r.BIGINT_2=r.BIGINT_1=r.BIGINT_0=r.BIGINT_NEG1=r.RIPEMD160_ADDRESS_STRING=r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const s=e("ethereum-cryptography/secp256k1.js"),n=e("./bytes.js");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=s.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=s.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=(0,n.hexToBytes)(r.KECCAK256_NULL_S),r.KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=(0,n.hexToBytes)(r.KECCAK256_RLP_ARRAY_S),r.KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=(0,n.hexToBytes)(r.KECCAK256_RLP_S),r.RLP_EMPTY_STRING=Uint8Array.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16,r.RIPEMD160_ADDRESS_STRING="0000000000000000000000000000000000000003",r.BIGINT_NEG1=BigInt(-1),r.BIGINT_0=BigInt(0),r.BIGINT_1=BigInt(1),r.BIGINT_2=BigInt(2),r.BIGINT_3=BigInt(3),r.BIGINT_7=BigInt(7),r.BIGINT_8=BigInt(8),r.BIGINT_27=BigInt(27),r.BIGINT_28=BigInt(28),r.BIGINT_31=BigInt(31),r.BIGINT_32=BigInt(32),r.BIGINT_64=BigInt(64),r.BIGINT_128=BigInt(128),r.BIGINT_255=BigInt(255),r.BIGINT_256=BigInt(256),r.BIGINT_96=BigInt(96),r.BIGINT_100=BigInt(100),r.BIGINT_160=BigInt(160),r.BIGINT_224=BigInt(224),r.BIGINT_2EXP96=BigInt(7922816251426434e13),r.BIGINT_2EXP160=BigInt(1461501637330903e33),r.BIGINT_2EXP224=BigInt(2695994666715064e52),r.BIGINT_2EXP256=r.BIGINT_2**r.BIGINT_256}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/constants.js"}],[222,{"@metamask/utils":2620,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.hasProperty)(e,"NetworkController")||!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,n.hasProperty)(e.NetworkController,"network")){var s,i;if(e.NetworkController.networkId===undefined)null===(s=global.sentry)||void 0===s||null===(i=s.captureException)||void 0===i||i.call(s,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const a={...e.NetworkController};"loading"===a.network?(a.networkId=null,a.networkStatus="unknown"):(a.networkId=a.network,a.networkStatus="available");return delete a.network,{...e,NetworkController:a}}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[2220,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ValueEncoding=r.KeyEncoding=void 0,function(e){e.String="string",e.Bytes="view",e.Number="number"}(r.KeyEncoding||(r.KeyEncoding={})),function(e){e.String="string",e.Bytes="view",e.JSON="json"}(r.ValueEncoding||(r.ValueEncoding={}))}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/db.js"}],[2221,{"./bytes.js":2218,"./internal.js":2224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseGethGenesisState=void 0;const s=e("./bytes.js"),n=e("./internal.js");r.parseGethGenesisState=function(e){const t={};for(const r of Object.keys(e.alloc)){let{balance:i,code:a,storage:o,nonce:c}=e.alloc[r];const u=(0,s.addHexPrefix)(r.toLowerCase());i=(0,n.isHexString)(i)?i:(0,s.bigIntToHex)(BigInt(i)),a=a!==undefined?(0,s.addHexPrefix)(a):undefined,o=o!==undefined?Object.entries(o):undefined,c=c!==undefined?(0,s.addHexPrefix)(c):undefined,t[u]=[i,a,o,c]}return t}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/genesis.js"}],[2222,{"./internal.js":2224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBytes=r.assertIsHexString=void 0;const s=e("./internal.js");r.assertIsHexString=function(e){if(!(0,s.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBytes=function(e){if(!(e instanceof Uint8Array)){throw new Error(`This method only supports Uint8Array but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/helpers.js"}],[2223,{"./account.js":2214,"./address.js":2215,"./asyncEventEmitter.js":2216,"./blobs.js":2217,"./bytes.js":2218,"./constants.js":2219,"./db.js":2220,"./genesis.js":2221,"./internal.js":2224,"./kzg.js":2225,"./lock.js":2226,"./mapDB.js":2227,"./provider.js":2228,"./requests.js":2229,"./signature.js":2230,"./types.js":2231,"./units.js":2232,"./verkle.js":2233,"./withdrawal.js":2234},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){s===undefined&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){s===undefined&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,n(e("./constants.js"),r),n(e("./units.js"),r),n(e("./account.js"),r),n(e("./address.js"),r),n(e("./db.js"),r),n(e("./withdrawal.js"),r),n(e("./signature.js"),r),n(e("./bytes.js"),r),n(e("./types.js"),r),n(e("./asyncEventEmitter.js"),r),n(e("./blobs.js"),r),n(e("./genesis.js"),r);var i=e("./internal.js");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),n(e("./kzg.js"),r),n(e("./lock.js"),r),n(e("./mapDB.js"),r),n(e("./provider.js"),r),n(e("./requests.js"),r),n(e("./verkle.js"),r)}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/index.js"}],[2224,{"./bytes.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexString=void 0;const s=e("./bytes.js");function n(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}r.isHexString=n;function i(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return n(e)?e.slice(2):e},r.padToEven=i,r.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return(0,s.utf8ToBytes)(e).byteLength},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const s=e.length;for("0x"===e.substring(0,2)&&(r=2);r<s;r+=2){const s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t},r.fromUtf8=function(e){const t=(0,s.utf8ToBytes)(e);return`0x${i((0,s.bytesToUnprefixedHex)(t)).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const s=[];for(let n=0;n<e.length;n++){let i=e[n][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";s.push(i)}return s}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/internal.js"}],[2225,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.initKZG=void 0,r.initKZG=function(e,t){e.loadTrustedSetup()}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/kzg.js"}],[2226,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/lock.js"}],[2227,{"./bytes.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MapDB=void 0;const s=e("./bytes.js");class n{constructor(e){this._database=e??new Map}async get(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();return this._database.get(t)}async put(e,t){const r=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.set(r,t)}async del(e){const t=e instanceof Uint8Array?(0,s.bytesToUnprefixedHex)(e):e.toString();this._database.delete(t)}async batch(e){for(const t of e)"del"===t.type&&await this.del(t.key),"put"===t.type&&await this.put(t.key,t.value)}shallowCopy(){return new n(this._database)}open(){return Promise.resolve()}}r.MapDB=n}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/mapDB.js"}],[2228,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;r.fetchFromProvider=async(e,t)=>{const r=JSON.stringify({method:t.method,params:t.params,jsonrpc:"2.0",id:1}),s=await fetch(e,{headers:{"content-type":"application/json"},method:"POST",body:r});if(!s.ok)throw new Error(`JSONRpcError: ${JSON.stringify({method:t.method,status:s.status,message:await s.text().catch((()=>"Could not parse error message likely because of a network error"))},null,2)}`);return(await s.json()).result};r.getProvider=e=>{if("string"==typeof e)return e;if("object"==typeof e&&e._getConnection!==undefined)return e._getConnection().url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/provider.js"}],[2229,{"./bytes.js":2218,"./constants.js":2219,"@ethereumjs/rlp":375,"ethereum-cryptography/utils":3600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CLRequestFactory=r.ConsolidationRequest=r.WithdrawalRequest=r.DepositRequest=r.CLRequest=r.CLRequestType=void 0;const s=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/utils"),i=e("./bytes.js"),a=e("./constants.js");var o;!function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"}(o=r.CLRequestType||(r.CLRequestType={}));class c{constructor(e){this.type=e}}r.CLRequest=c;class u extends c{constructor(e,t,r,s,n){super(o.Deposit),this.pubkey=e,this.withdrawalCredentials=t,this.amount=r,this.signature=s,this.index=n}static fromRequestData(e){const{pubkey:t,withdrawalCredentials:r,amount:s,signature:n,index:i}=e;return new u(t,r,s,n,i)}static fromJSON(e){const{pubkey:t,withdrawalCredentials:r,amount:s,signature:n,index:a}=e;return this.fromRequestData({pubkey:(0,i.hexToBytes)(t),withdrawalCredentials:(0,i.hexToBytes)(r),amount:(0,i.hexToBigInt)(s),signature:(0,i.hexToBytes)(n),index:(0,i.hexToBigInt)(a)})}serialize(){const e=this.index===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.index),t=this.amount===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.amount);return(0,n.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.pubkey,this.withdrawalCredentials,t,this.signature,e]))}toJSON(){return{pubkey:(0,i.bytesToHex)(this.pubkey),withdrawalCredentials:(0,i.bytesToHex)(this.withdrawalCredentials),amount:(0,i.bigIntToHex)(this.amount),signature:(0,i.bytesToHex)(this.signature),index:(0,i.bigIntToHex)(this.index)}}static deserialize(e){const[t,r,n,a,o]=s.RLP.decode(e.slice(1));return this.fromRequestData({pubkey:t,withdrawalCredentials:r,amount:(0,i.bytesToBigInt)(n),signature:a,index:(0,i.bytesToBigInt)(o)})}}r.DepositRequest=u;class l extends c{constructor(e,t,r){super(o.Withdrawal),this.sourceAddress=e,this.validatorPubkey=t,this.amount=r}static fromRequestData(e){const{sourceAddress:t,validatorPubkey:r,amount:s}=e;return new l(t,r,s)}static fromJSON(e){const{sourceAddress:t,validatorPubkey:r,amount:s}=e;return this.fromRequestData({sourceAddress:(0,i.hexToBytes)(t),validatorPubkey:(0,i.hexToBytes)(r),amount:(0,i.hexToBigInt)(s)})}serialize(){const e=this.amount===a.BIGINT_0?new Uint8Array:(0,i.bigIntToBytes)(this.amount);return(0,n.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.sourceAddress,this.validatorPubkey,e]))}toJSON(){return{sourceAddress:(0,i.bytesToHex)(this.sourceAddress),validatorPubkey:(0,i.bytesToHex)(this.validatorPubkey),amount:(0,i.bigIntToHex)(this.amount)}}static deserialize(e){const[t,r,n]=s.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:t,validatorPubkey:r,amount:(0,i.bytesToBigInt)(n)})}}r.WithdrawalRequest=l;class d extends c{constructor(e,t,r){super(o.Consolidation),this.sourceAddress=e,this.sourcePubkey=t,this.targetPubkey=r}static fromRequestData(e){const{sourceAddress:t,sourcePubkey:r,targetPubkey:s}=e;return new d(t,r,s)}static fromJSON(e){const{sourceAddress:t,sourcePubkey:r,targetPubkey:s}=e;return this.fromRequestData({sourceAddress:(0,i.hexToBytes)(t),sourcePubkey:(0,i.hexToBytes)(r),targetPubkey:(0,i.hexToBytes)(s)})}serialize(){return(0,n.concatBytes)(Uint8Array.from([this.type]),s.RLP.encode([this.sourceAddress,this.sourcePubkey,this.targetPubkey]))}toJSON(){return{sourceAddress:(0,i.bytesToHex)(this.sourceAddress),sourcePubkey:(0,i.bytesToHex)(this.sourcePubkey),targetPubkey:(0,i.bytesToHex)(this.targetPubkey)}}static deserialize(e){const[t,r,n]=s.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:t,sourcePubkey:r,targetPubkey:n})}}r.ConsolidationRequest=d;r.CLRequestFactory=class{static fromSerializedRequest(e){switch(e[0]){case o.Deposit:return u.deserialize(e);case o.Withdrawal:return l.deserialize(e);case o.Consolidation:return d.deserialize(e);default:throw Error(`Invalid request type=${e[0]}`)}}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/requests.js"}],[223,{"@metamask/utils":2620,lodash:4111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=i,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},r.version=void 0;var s=e("lodash"),n=e("@metamask/utils");const i=r.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[2230,{"./bytes.js":2218,"./constants.js":2219,"./helpers.js":2222,"ethereum-cryptography/keccak.js":3589,"ethereum-cryptography/secp256k1.js":3598},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.calculateSigRecovery=r.ecsign=void 0;const s=e("ethereum-cryptography/keccak.js"),n=e("ethereum-cryptography/secp256k1.js"),i=e("./bytes.js"),a=e("./constants.js"),o=e("./helpers.js");function c(e,t){return e===a.BIGINT_0||e===a.BIGINT_1?e:t===undefined?e-a.BIGINT_27:e-(t*a.BIGINT_2+BigInt(35))}function u(e){return e===a.BIGINT_0||e===a.BIGINT_1}r.ecsign=function(e,t,r){const s=n.secp256k1.sign(e,t),i=s.toCompactRawBytes();return{r:i.slice(0,32),s:i.slice(32,64),v:r===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(r)*a.BIGINT_2}},r.calculateSigRecovery=c;r.ecrecover=function(e,t,r,s,a){const o=(0,i.concatBytes)((0,i.setLengthLeft)(r,32),(0,i.setLengthLeft)(s,32)),l=c(t,a);if(!u(l))throw new Error("Invalid signature v value");return n.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(l)).recoverPublicKey(e).toRawBytes(!1).slice(1)};r.toRpcSig=function(e,t,r,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");return(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(r,32),(0,i.toBytes)(e)))};r.toCompactSig=function(e,t,r,s){if(!u(c(e,s)))throw new Error("Invalid signature v value");const n=Uint8Array.from([...r]);return(e>BigInt(28)&&e%a.BIGINT_2===a.BIGINT_1||e===a.BIGINT_1||e===BigInt(28))&&(n[0]|=128),(0,i.bytesToHex)((0,i.concatBytes)((0,i.setLengthLeft)(t,32),(0,i.setLengthLeft)(n,32)))};r.fromRpcSig=function(e){const t=(0,i.toBytes)(e);let r,s,n;if(t.length>=65)r=t.subarray(0,32),s=t.subarray(32,64),n=(0,i.bytesToBigInt)(t.subarray(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.subarray(0,32),s=t.subarray(32,64),n=BigInt((0,i.bytesToInt)(t.subarray(32,33))>>7),s[0]&=127}return n<27&&(n+=a.BIGINT_27),{v:n,r:r,s:s}};r.isValidSignature=function(e,t,r,s=!0,n){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,n)))return!1;const o=(0,i.bytesToBigInt)(t),l=(0,i.bytesToBigInt)(r);return!(o===a.BIGINT_0||o>=a.SECP256K1_ORDER||l===a.BIGINT_0||l>=a.SECP256K1_ORDER)&&!(s&&l>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBytes)(e);const t=(0,i.utf8ToBytes)(`Ethereum Signed Message:\n${e.length}`);return(0,s.keccak256)((0,i.concatBytes)(t,e))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/signature.js"}],[2231,{"./bytes.js":2218,"./internal.js":2224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=r.isNestedUint8Array=void 0;const s=e("./bytes.js"),n=e("./internal.js");var i;r.isNestedUint8Array=function e(t){if(!Array.isArray(t))return!1;for(const r of t)if(Array.isArray(r)){if(!e(r))return!1}else if(!(r instanceof Uint8Array))return!1;return!0},function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,n.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,s.toBytes)(e);switch(t){case i.Uint8Array:return r;case i.BigInt:return(0,s.bytesToBigInt)(r);case i.Number:{const e=(0,s.bytesToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case i.PrefixedHexString:return(0,s.bytesToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/types.js"}],[2232,{"./constants.js":2219},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.formatBigDecimal=r.GWEI_TO_WEI=void 0;const s=e("./constants.js");r.GWEI_TO_WEI=BigInt(1e9),r.formatBigDecimal=function(e,t,r){t===s.BIGINT_0&&(t=s.BIGINT_1);const n=e/t,i=(e-n*t)*r/t,a=String(r).length-1-String(i).length;return`${n}.${"0".repeat(a)}${i}`}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/units.js"}],[2233,{"./bytes.js":2218},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getVerkleTreeKeyForStorageSlot=r.chunkifyCode=r.getVerkleTreeKeyForCodeChunk=r.getVerkleTreeIndicesForCodeChunk=r.getVerkleTreeIndexesForStorageSlot=r.getVerkleKey=r.VERKLE_MAIN_STORAGE_OFFSET=r.VERKLE_NODE_WIDTH=r.VERKLE_CODE_OFFSET=r.VERKLE_HEADER_STORAGE_OFFSET=r.VERKLE_CODE_SIZE_LEAF_KEY=r.VERKLE_CODE_HASH_LEAF_KEY=r.VERKLE_NONCE_LEAF_KEY=r.VERKLE_BALANCE_LEAF_KEY=r.VERKLE_VERSION_LEAF_KEY=r.VerkleLeafType=r.verifyVerkleProof=r.getVerkleStem=void 0;const s=e("./bytes.js");function n(e,t,r=0){const n=(0,s.setLengthLeft)(t.toBytes(),32);let i;i="number"==typeof r?(0,s.setLengthRight)((0,s.int32ToBytes)(Number(r),!0),32):(0,s.setLengthRight)((0,s.bigIntToBytes)(BigInt(r),!0).slice(0,32),32);return e.getTreeKey(n,i,0).slice(0,31)}var i;r.getVerkleStem=n,r.verifyVerkleProof=function(e,t,r){return e.verifyExecutionWitnessPreState((0,s.bytesToHex)(t),JSON.stringify(r))},function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"}(i=r.VerkleLeafType||(r.VerkleLeafType={})),r.VERKLE_VERSION_LEAF_KEY=(0,s.intToBytes)(i.Version),r.VERKLE_BALANCE_LEAF_KEY=(0,s.intToBytes)(i.Balance),r.VERKLE_NONCE_LEAF_KEY=(0,s.intToBytes)(i.Nonce),r.VERKLE_CODE_HASH_LEAF_KEY=(0,s.intToBytes)(i.CodeHash),r.VERKLE_CODE_SIZE_LEAF_KEY=(0,s.intToBytes)(i.CodeSize),r.VERKLE_HEADER_STORAGE_OFFSET=64,r.VERKLE_CODE_OFFSET=128,r.VERKLE_NODE_WIDTH=256,r.VERKLE_MAIN_STORAGE_OFFSET=BigInt(256)**BigInt(31);function a(e){let t;t=e<r.VERKLE_CODE_OFFSET-r.VERKLE_HEADER_STORAGE_OFFSET?BigInt(r.VERKLE_HEADER_STORAGE_OFFSET)+e:r.VERKLE_MAIN_STORAGE_OFFSET+e;return{treeIndex:t/BigInt(r.VERKLE_NODE_WIDTH),subIndex:Number(t%BigInt(r.VERKLE_NODE_WIDTH))}}function o(e){return{treeIndex:Math.floor((r.VERKLE_CODE_OFFSET+e)/r.VERKLE_NODE_WIDTH),subIndex:(r.VERKLE_CODE_OFFSET+e)%r.VERKLE_NODE_WIDTH}}r.getVerkleKey=(e,t)=>{switch(t){case i.Version:return(0,s.concatBytes)(e,r.VERKLE_VERSION_LEAF_KEY);case i.Balance:return(0,s.concatBytes)(e,r.VERKLE_BALANCE_LEAF_KEY);case i.Nonce:return(0,s.concatBytes)(e,r.VERKLE_NONCE_LEAF_KEY);case i.CodeHash:return(0,s.concatBytes)(e,r.VERKLE_CODE_HASH_LEAF_KEY);case i.CodeSize:return(0,s.concatBytes)(e,r.VERKLE_CODE_SIZE_LEAF_KEY);default:return(0,s.concatBytes)(e,t)}},r.getVerkleTreeIndexesForStorageSlot=a,r.getVerkleTreeIndicesForCodeChunk=o;r.getVerkleTreeKeyForCodeChunk=async(e,t,r)=>{const{treeIndex:i,subIndex:a}=o(t);return(0,s.concatBytes)(n(r,e,i),(0,s.toBytes)(a))};r.chunkifyCode=e=>{if(e.length%31!=0){const t=31-e.length%31;e=(0,s.setLengthRight)(e,e.length+t)}throw new Error("Not implemented")};r.getVerkleTreeKeyForStorageSlot=async(e,t,r)=>{const{treeIndex:i,subIndex:o}=a(t);return(0,s.concatBytes)(n(r,e,i),(0,s.toBytes)(o))}}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/verkle.js"}],[2234,{"./address.js":2215,"./bytes.js":2218,"./constants.js":2219,"./types.js":2231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const s=e("./address.js"),n=e("./bytes.js"),i=e("./constants.js"),a=e("./types.js");class o{constructor(e,t,r,s){this.index=e,this.validatorIndex=t,this.address=r,this.amount=s}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:c}=e,u=(0,a.toType)(t,a.TypeOutput.BigInt),l=(0,a.toType)(r,a.TypeOutput.BigInt),d=i instanceof s.Address?i:new s.Address((0,n.toBytes)(i)),h=(0,a.toType)(c,a.TypeOutput.BigInt);return new o(u,l,d,h)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,s,n]=e;return o.fromWithdrawalData({index:t,validatorIndex:r,address:s,amount:n})}static toBytesArray(e){const{index:t,validatorIndex:r,address:n,amount:o}=e;return[(0,a.toType)(t,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(t,a.TypeOutput.Uint8Array),(0,a.toType)(r,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(r,a.TypeOutput.Uint8Array),n instanceof s.Address?n.bytes:(0,a.toType)(n,a.TypeOutput.Uint8Array),(0,a.toType)(o,a.TypeOutput.BigInt)===i.BIGINT_0?new Uint8Array:(0,a.toType)(o,a.TypeOutput.Uint8Array)]}raw(){return o.toBytesArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:(0,n.bigIntToHex)(this.index),validatorIndex:(0,n.bigIntToHex)(this.validatorIndex),address:(0,n.bytesToHex)(this.address.bytes),amount:(0,n.bigIntToHex)(this.amount)}}}r.Withdrawal=o}}},{package:"@metamask/smart-transactions-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@ethereumjs/util/dist/cjs/withdrawal.js"}]],[],{});